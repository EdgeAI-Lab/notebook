{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Wiki Create Guide \u00b6 \u4e2d\u6587\u8bf7\u70b9\u51fb\u8fd9\u91cc Welcome to My WiKi! If you want to build a wiki like this. Please follow me. 1. Use Notepad++(Optional) \u00b6 Notepad++ is a very useful editor, and very small, recommended to use! Notepad++ Download Explorer Plug 2. Install MKDocs \u00b6 MKDocs Office Website MKDocs is a program that converts Markdown files into HTML web page files Material Theme Office Website The Material Theme is a beautiful web page style Config your site according to official instructions, and add something Now your site looks like this: 3. Host Your Site To Github \u00b6 3.1 Init a local Git repository in \"my-project\" folder \u00b6 1 2 cd my-project git init After success, it looks like it\uff1a 3.2 Create a new GitHub repository\uff0cand get the URL.Look like it: \u00b6 1 https://github.com/user_name/repository_name 3.3 Add a remote repository link for your local repository \u00b6 1 git add remote https://github.com/user_name/repository_name 3.4 Push local repository to remote\uff08Optional\uff09 \u00b6 It is optional,because deploy your WiKi site only need to push HTML files to remote. 1 2 3 git add . git commit -m \"first commit\" git push origin master 3.5 Deploy your WiKi site on the GitHub \u00b6 1 mkdocs gh-deploy After deploy,the HTML files of your WiKi site is deployed on the gh-pages branch,and the Markdown files is deployed on the master branch(if you push it). It is master branch: It is gh-pages branch: Now you can access your WiKi site use the URL like this: 1 https://user_name.github.io/repository_name/ Success It is OK. Scan code attention my WeChat official account \u00b6","title":"Home"},{"location":"#wiki-create-guide","text":"\u4e2d\u6587\u8bf7\u70b9\u51fb\u8fd9\u91cc Welcome to My WiKi! If you want to build a wiki like this. Please follow me.","title":"Wiki Create Guide"},{"location":"#1-use-notepadoptional","text":"Notepad++ is a very useful editor, and very small, recommended to use! Notepad++ Download Explorer Plug","title":"1. Use Notepad++(Optional)"},{"location":"#2-install-mkdocs","text":"MKDocs Office Website MKDocs is a program that converts Markdown files into HTML web page files Material Theme Office Website The Material Theme is a beautiful web page style Config your site according to official instructions, and add something Now your site looks like this:","title":"2. Install MKDocs"},{"location":"#3-host-your-site-to-github","text":"","title":"3. Host Your Site To Github"},{"location":"#31-init-a-local-git-repository-in-my-project-folder","text":"1 2 cd my-project git init After success, it looks like it\uff1a","title":"3.1 Init a local Git repository in \"my-project\" folder"},{"location":"#32-create-a-new-github-repositoryand-get-the-urllook-like-it","text":"1 https://github.com/user_name/repository_name","title":"3.2 Create a new GitHub repository\uff0cand get the URL.Look like it:"},{"location":"#33-add-a-remote-repository-link-for-your-local-repository","text":"1 git add remote https://github.com/user_name/repository_name","title":"3.3 Add a remote repository link for your local repository"},{"location":"#34-push-local-repository-to-remoteoptional","text":"It is optional,because deploy your WiKi site only need to push HTML files to remote. 1 2 3 git add . git commit -m \"first commit\" git push origin master","title":"3.4 Push local repository to remote\uff08Optional\uff09"},{"location":"#35-deploy-your-wiki-site-on-the-github","text":"1 mkdocs gh-deploy After deploy,the HTML files of your WiKi site is deployed on the gh-pages branch,and the Markdown files is deployed on the master branch(if you push it). It is master branch: It is gh-pages branch: Now you can access your WiKi site use the URL like this: 1 https://user_name.github.io/repository_name/ Success It is OK.","title":"3.5 Deploy your WiKi site on the GitHub"},{"location":"#scan-code-attention-my-wechat-official-account","text":"","title":"Scan code attention my WeChat official account"},{"location":"about-zh/","text":"WiKi\u7ad9\u957f\u4ecb\u7ecd \u00b6 \u5173\u4e8e\u6211 \u00b6 \u6211\u662f\u4e00\u540d\u8f6f\u4ef6\u5de5\u7a0b\u5e08\uff0c\u4e86\u89e3C/C++\u3001Java\u548cPython\u7f16\u7a0b\u8bed\u8a00\u3002 \u6211\u64c5\u957f\u5d4c\u5165\u5f0fMCU\u7f16\u7a0b\uff08\u6bd4\u5982\uff1aSTM32\uff09\u548cAndroid \u73b0\u5728\u6211\u5f00\u59cb\u6d89\u8db3\u56fe\u50cf\u5904\u7406\uff08\u4f7f\u7528OpenCV\uff09\uff0c\u97f3\u89c6\u9891\u5904\u7406\uff08\u4f7f\u7528FFMPEG\u548cWebRTC\uff09 \u4e86\u89e3\u6211 \u00b6 \u6211\u7684GitHub \u6211\u7684CSDN\u535a\u5ba2 \u6211\u7684\u77e5\u4e4e \u63d0\u793a \u6709\u4e00\u6bb5\u65f6\u95f4\u6ca1\u6709\u66f4\u65b0\u8fc7\u6211\u7684CSDN\u535a\u5ba2\u4e86\uff0c\u56e0\u4e3a\u5e73\u65f6\u5de5\u4f5c\u5c31\u6bd4\u8f83\u5fd9\u3002\u4ece\u73b0\u5728\u5f00\u59cb\u6211\u5c06\u65f6\u5e38\u5728\u8fd9\u4e2a\u7ad9\u70b9\u66f4\u65b0\u6211\u7684\u5b66\u4e60\u7b14\u8bb0\u3002 \u8054\u7cfb\u6211 \u00b6 \u90ae\u7bb1: fanhongchaung@foxmail.com QQ: 847923458 \u5fae\u4fe1: shoujimaizi2289 \u66f4\u591a\u8d44\u8baf\uff0c\u8bf7\u626b\u7801\u5173\u6ce8\uff01 \u00b6","title":"WiKi\u7ad9\u957f\u4ecb\u7ecd"},{"location":"about-zh/#wiki","text":"","title":"WiKi\u7ad9\u957f\u4ecb\u7ecd"},{"location":"about-zh/#_1","text":"\u6211\u662f\u4e00\u540d\u8f6f\u4ef6\u5de5\u7a0b\u5e08\uff0c\u4e86\u89e3C/C++\u3001Java\u548cPython\u7f16\u7a0b\u8bed\u8a00\u3002 \u6211\u64c5\u957f\u5d4c\u5165\u5f0fMCU\u7f16\u7a0b\uff08\u6bd4\u5982\uff1aSTM32\uff09\u548cAndroid \u73b0\u5728\u6211\u5f00\u59cb\u6d89\u8db3\u56fe\u50cf\u5904\u7406\uff08\u4f7f\u7528OpenCV\uff09\uff0c\u97f3\u89c6\u9891\u5904\u7406\uff08\u4f7f\u7528FFMPEG\u548cWebRTC\uff09","title":"\u5173\u4e8e\u6211"},{"location":"about-zh/#_2","text":"\u6211\u7684GitHub \u6211\u7684CSDN\u535a\u5ba2 \u6211\u7684\u77e5\u4e4e \u63d0\u793a \u6709\u4e00\u6bb5\u65f6\u95f4\u6ca1\u6709\u66f4\u65b0\u8fc7\u6211\u7684CSDN\u535a\u5ba2\u4e86\uff0c\u56e0\u4e3a\u5e73\u65f6\u5de5\u4f5c\u5c31\u6bd4\u8f83\u5fd9\u3002\u4ece\u73b0\u5728\u5f00\u59cb\u6211\u5c06\u65f6\u5e38\u5728\u8fd9\u4e2a\u7ad9\u70b9\u66f4\u65b0\u6211\u7684\u5b66\u4e60\u7b14\u8bb0\u3002","title":"\u4e86\u89e3\u6211"},{"location":"about-zh/#_3","text":"\u90ae\u7bb1: fanhongchaung@foxmail.com QQ: 847923458 \u5fae\u4fe1: shoujimaizi2289","title":"\u8054\u7cfb\u6211"},{"location":"about-zh/#_4","text":"","title":"\u66f4\u591a\u8d44\u8baf\uff0c\u8bf7\u626b\u7801\u5173\u6ce8\uff01"},{"location":"about/","text":"Wikier Info \u00b6 \u4e2d\u6587\u8bf7\u70b9\u51fb\u8fd9\u91cc About Me \u00b6 I am a Software Engineer, I konw abou C/C++, Java and Python program language. I am good at embedded programming for MCU(example: STM32) and Android. Now I'm getting into image processing(Use OpenCV), audio and video processing(Use FFMPEG and WebRTC). Know Me \u00b6 My GitHub My CSDN Blog My Zhihu Note I haven't update my CSDN blog for a long time,because I am very busy with my job.But I will update my konwledge on this wiki site from now on. Connect Me \u00b6 Email: fanhongchaung@foxmail.com QQ: 847923458 WeChat: shoujimaizi2289 Scan code attention my WeChat official account \u00b6","title":"About Me"},{"location":"about/#wikier-info","text":"\u4e2d\u6587\u8bf7\u70b9\u51fb\u8fd9\u91cc","title":"Wikier Info"},{"location":"about/#about-me","text":"I am a Software Engineer, I konw abou C/C++, Java and Python program language. I am good at embedded programming for MCU(example: STM32) and Android. Now I'm getting into image processing(Use OpenCV), audio and video processing(Use FFMPEG and WebRTC).","title":"About Me"},{"location":"about/#know-me","text":"My GitHub My CSDN Blog My Zhihu Note I haven't update my CSDN blog for a long time,because I am very busy with my job.But I will update my konwledge on this wiki site from now on.","title":"Know Me"},{"location":"about/#connect-me","text":"Email: fanhongchaung@foxmail.com QQ: 847923458 WeChat: shoujimaizi2289","title":"Connect Me"},{"location":"about/#scan-code-attention-my-wechat-official-account","text":"","title":"Scan code attention my WeChat official account"},{"location":"index-zh/","text":"Wiki\u521b\u5efa\u5411\u5bfc \u00b6 \u6b22\u8fce\u6765\u5230\u6211\u7684WiKi\u3002 \u5047\u5982\u4f60\u4e5f\u60f3\u642d\u5efa\u8fd9\u6837\u4e00\u4e2aWiKi\uff0c\u8bf7\u5f80\u4e0b\u770b\u3002 1. \u4f7f\u7528Notepad++(\u53ef\u9009) \u00b6 Notepad++\u662f\u4e00\u6b3e\u975e\u5e38\u5b9e\u7528\u7684\u7f16\u8f91\u5668\uff0c\u5e76\u4e14\u5341\u5206\u5c0f\u5de7\uff0c\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\uff01 Notepad++ Download Explorer Plug 2. \u5b89\u88c5MKDocs\u548cMaterial\u4e3b\u9898 \u00b6 MKDocs\u5b98\u65b9\u7f51\u7ad9 MKDocs\u662f\u4e00\u4e2a\u53ef\u4ee5\u5c06Markdown\u6587\u4ef6\u8f6c\u6362\u6210HTML\u7f51\u9875\u6587\u4ef6\u7684\u7a0b\u5e8f Material\u4e3b\u9898\u5b98\u65b9\u7f51\u7ad9 Material\u4e3b\u9898\u662f\u4e00\u4e2a\u6f02\u4eae\u7684\u7f51\u9875\u6837\u5f0f \u6839\u636e\u5b98\u65b9\u7684\u6307\u5bfc\u914d\u7f6e\u4f60\u7684\u7f51\u7ad9, \u5e76\u6dfb\u52a0\u5185\u5bb9 \u73b0\u5728\u4f60\u7684WiKi\u770b\u4e0a\u53bb\u5c06\u4f1a\u662f\u8fd9\u4e2a\u6837\u5b50: 3. \u5c06\u4f60\u7684WiKi\u7f51\u7ad9\u6258\u7ba1\u5230Github \u00b6 3.1 \u5c06\u4f60\u7684\u201cmy-project\u201d\u6587\u4ef6\u5939\uff0c\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u672c\u5730Git\u4ed3\u5e93 \u00b6 1 2 cd my-project git init git\u4ed3\u5e93\u521d\u59cb\u5316\u6210\u529f\u540e\uff0c\u770b\u4e0a\u53bb\u5c31\u50cf\u8fd9\u6837\uff1a 3.2 \u521b\u5efa\u4e00\u4e2a\u65b0GitHub\u7684\u4ed3\u5e93\uff0c\u83b7\u53d6\u4ed3\u5e93\u7684URL\u3002\u50cf\u8fd9\u6837: \u00b6 1 https://github.com/user_name/repository_name 3.3 \u5728\u672c\u5730\u4ed3\u5e93\u4e2d\u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5 \u00b6 1 git add remote https://github.com/user_name/repository_name 3.4 \u5c06\u672c\u5730git\u4ed3\u5e93\u63a8\u9001\u5230\u8fdc\u7aef\uff08\u53ef\u9009\uff09 \u00b6 \u5c06\u4f60\u7684\u6e90\u6587\u4ef6\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\u662f\u53ef\u9009\u7684\uff0c\u56e0\u4e3a\u90e8\u7f72\u4f60\u7684WiKi\u7f51\u7ad9\u53ea\u9700\u8981\u5c06HTML\u7f51\u9875\u6587\u4ef6\u63a8\u9001\u5230\u8fdc\u7aef\u5373\u53ef 1 2 3 git add . git commit -m \"first commit\" git push origin master 3.5 \u5c06\u4f60\u7684WiKi\u7ad9\u70b9\u90e8\u7f72\u5230GitHub \u00b6 1 mkdocs gh-deploy \u5b8c\u6210\u90e8\u7f72\u4e4b\u540e\uff0c\u4f60\u7684WiKi\u7f51\u7ad9\u7684HTML\u6587\u4ef6\u90fd\u90e8\u7f72\u5728\u4e86gh-pages\u5206\u652f\uff1bmarkdown\u6587\u4ef6\u90fd\u90e8\u7f72\u5728\u4e86master\u5206\u652f\uff08\u5047\u5982\u4f60\u63d0\u4ea4\u4e86\u7684\u8bdd\uff09 \u8fd9\u662fmaster\u5206\u652f: \u8fd9\u662fgh-pages\u5206\u652f: \u73b0\u5728\u4f7f\u7528\u7c7b\u4f3c\u4e0b\u9762\u7684URL\uff0c\u4f60\u5c31\u53ef\u4ee5\u8bbf\u95ee\u4f60\u7684Wiki\u7ad9\u70b9\u4e86 1 https://user_name.github.io/repository_name/ \u606d\u559c \u73b0\u5728\u4f60\u7684WiKi\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u3002 \u66f4\u591a\u7cbe\u5f69\u8d44\u8baf\uff0c\u8bf7\u626b\u7801\u5173\u6ce8\uff01 \u00b6","title":"Wiki\u521b\u5efa\u5411\u5bfc"},{"location":"index-zh/#wiki","text":"\u6b22\u8fce\u6765\u5230\u6211\u7684WiKi\u3002 \u5047\u5982\u4f60\u4e5f\u60f3\u642d\u5efa\u8fd9\u6837\u4e00\u4e2aWiKi\uff0c\u8bf7\u5f80\u4e0b\u770b\u3002","title":"Wiki\u521b\u5efa\u5411\u5bfc"},{"location":"index-zh/#1-notepad","text":"Notepad++\u662f\u4e00\u6b3e\u975e\u5e38\u5b9e\u7528\u7684\u7f16\u8f91\u5668\uff0c\u5e76\u4e14\u5341\u5206\u5c0f\u5de7\uff0c\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\uff01 Notepad++ Download Explorer Plug","title":"1. \u4f7f\u7528Notepad++(\u53ef\u9009)"},{"location":"index-zh/#2-mkdocsmaterial","text":"MKDocs\u5b98\u65b9\u7f51\u7ad9 MKDocs\u662f\u4e00\u4e2a\u53ef\u4ee5\u5c06Markdown\u6587\u4ef6\u8f6c\u6362\u6210HTML\u7f51\u9875\u6587\u4ef6\u7684\u7a0b\u5e8f Material\u4e3b\u9898\u5b98\u65b9\u7f51\u7ad9 Material\u4e3b\u9898\u662f\u4e00\u4e2a\u6f02\u4eae\u7684\u7f51\u9875\u6837\u5f0f \u6839\u636e\u5b98\u65b9\u7684\u6307\u5bfc\u914d\u7f6e\u4f60\u7684\u7f51\u7ad9, \u5e76\u6dfb\u52a0\u5185\u5bb9 \u73b0\u5728\u4f60\u7684WiKi\u770b\u4e0a\u53bb\u5c06\u4f1a\u662f\u8fd9\u4e2a\u6837\u5b50:","title":"2. \u5b89\u88c5MKDocs\u548cMaterial\u4e3b\u9898"},{"location":"index-zh/#3-wikigithub","text":"","title":"3. \u5c06\u4f60\u7684WiKi\u7f51\u7ad9\u6258\u7ba1\u5230Github"},{"location":"index-zh/#31-my-projectgit","text":"1 2 cd my-project git init git\u4ed3\u5e93\u521d\u59cb\u5316\u6210\u529f\u540e\uff0c\u770b\u4e0a\u53bb\u5c31\u50cf\u8fd9\u6837\uff1a","title":"3.1 \u5c06\u4f60\u7684\u201cmy-project\u201d\u6587\u4ef6\u5939\uff0c\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u672c\u5730Git\u4ed3\u5e93"},{"location":"index-zh/#32-githuburl","text":"1 https://github.com/user_name/repository_name","title":"3.2 \u521b\u5efa\u4e00\u4e2a\u65b0GitHub\u7684\u4ed3\u5e93\uff0c\u83b7\u53d6\u4ed3\u5e93\u7684URL\u3002\u50cf\u8fd9\u6837:"},{"location":"index-zh/#33","text":"1 git add remote https://github.com/user_name/repository_name","title":"3.3 \u5728\u672c\u5730\u4ed3\u5e93\u4e2d\u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93\u94fe\u63a5"},{"location":"index-zh/#34-git","text":"\u5c06\u4f60\u7684\u6e90\u6587\u4ef6\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\u662f\u53ef\u9009\u7684\uff0c\u56e0\u4e3a\u90e8\u7f72\u4f60\u7684WiKi\u7f51\u7ad9\u53ea\u9700\u8981\u5c06HTML\u7f51\u9875\u6587\u4ef6\u63a8\u9001\u5230\u8fdc\u7aef\u5373\u53ef 1 2 3 git add . git commit -m \"first commit\" git push origin master","title":"3.4 \u5c06\u672c\u5730git\u4ed3\u5e93\u63a8\u9001\u5230\u8fdc\u7aef\uff08\u53ef\u9009\uff09"},{"location":"index-zh/#35-wikigithub","text":"1 mkdocs gh-deploy \u5b8c\u6210\u90e8\u7f72\u4e4b\u540e\uff0c\u4f60\u7684WiKi\u7f51\u7ad9\u7684HTML\u6587\u4ef6\u90fd\u90e8\u7f72\u5728\u4e86gh-pages\u5206\u652f\uff1bmarkdown\u6587\u4ef6\u90fd\u90e8\u7f72\u5728\u4e86master\u5206\u652f\uff08\u5047\u5982\u4f60\u63d0\u4ea4\u4e86\u7684\u8bdd\uff09 \u8fd9\u662fmaster\u5206\u652f: \u8fd9\u662fgh-pages\u5206\u652f: \u73b0\u5728\u4f7f\u7528\u7c7b\u4f3c\u4e0b\u9762\u7684URL\uff0c\u4f60\u5c31\u53ef\u4ee5\u8bbf\u95ee\u4f60\u7684Wiki\u7ad9\u70b9\u4e86 1 https://user_name.github.io/repository_name/ \u606d\u559c \u73b0\u5728\u4f60\u7684WiKi\u5df2\u7ecf\u6210\u529f\u90e8\u7f72\u3002","title":"3.5 \u5c06\u4f60\u7684WiKi\u7ad9\u70b9\u90e8\u7f72\u5230GitHub"},{"location":"index-zh/#_1","text":"","title":"\u66f4\u591a\u7cbe\u5f69\u8d44\u8baf\uff0c\u8bf7\u626b\u7801\u5173\u6ce8\uff01"},{"location":"Android/Application/RecycleView/","text":"RecycleView\u4f7f\u7528 \u00b6 1.\u65b0\u5efaRecycleViewTest\u9879\u76ee\uff1a \u00b6 2.\u6dfb\u52a0RecycleView\u4f9d\u8d56 \u00b6 \u9f20\u6807\u53f3\u51fb\u9009\u62e9 \" Open Module Settings \"\u9009\u9879\uff0c\u7136\u540e\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a 3.\u521b\u5efaRecycleView Item\u5e03\u5c40\u6587\u4ef6 \u00b6 layout/recycleview_item.xml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 <?xml version=\"1.0\" encoding=\"utf-8\"?> <LinearLayout xmlns:android= \"http://schemas.android.com/apk/res/android\" xmlns:app= \"http://schemas.android.com/apk/res-auto\" xmlns:tools= \"http://schemas.android.com/tools\" android:layout_width= \"match_parent\" android:layout_height= \"wrap_content\" android:layout_margin= \"10dp\" android:orientation= \"horizontal\" > <ImageView android:id= \"@+id/imageView\" android:layout_width= \"wrap_content\" android:layout_height= \"wrap_content\" tools:srcCompat= \"@tools:sample/avatars[1]\" /> <TextView android:id= \"@+id/textView\" android:layout_width= \"wrap_content\" android:layout_height= \"wrap_content\" android:layout_marginLeft= \"30dp\" android:layout_marginTop= \"40dp\" android:fontFamily= \"sans-serif-black\" android:text= \"TextView\" android:textSize= \"25sp\" /> </LinearLayout> 4.\u5728layout/activity_main.xml\u4e2d\u6dfb\u52a0RecycleView\u7ec4\u4ef6 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android= \"http://schemas.android.com/apk/res/android\" xmlns:app= \"http://schemas.android.com/apk/res-auto\" xmlns:tools= \"http://schemas.android.com/tools\" android:layout_width= \"match_parent\" android:layout_height= \"match_parent\" tools:context= \".MainActivity\" > <androidx.recyclerview.widget.RecyclerView android:id= \"@+id/recycleview\" android:layout_width= \"match_parent\" android:layout_height= \"match_parent\" tools:listitem= \"@layout/recycleview_item\" /> </androidx.constraintlayout.widget.ConstraintLayout> 5.\u521b\u5efaAdapter \u00b6 6.\u4f7f\u7528RecycleView\u7ec4\u4ef6 \u00b6","title":"RecycleView\u4f7f\u7528"},{"location":"Android/Application/RecycleView/#recycleview","text":"","title":"RecycleView\u4f7f\u7528"},{"location":"Android/Application/RecycleView/#1recycleviewtest","text":"","title":"1.\u65b0\u5efaRecycleViewTest\u9879\u76ee\uff1a"},{"location":"Android/Application/RecycleView/#2recycleview","text":"\u9f20\u6807\u53f3\u51fb\u9009\u62e9 \" Open Module Settings \"\u9009\u9879\uff0c\u7136\u540e\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a","title":"2.\u6dfb\u52a0RecycleView\u4f9d\u8d56"},{"location":"Android/Application/RecycleView/#3recycleview-item","text":"layout/recycleview_item.xml 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 <?xml version=\"1.0\" encoding=\"utf-8\"?> <LinearLayout xmlns:android= \"http://schemas.android.com/apk/res/android\" xmlns:app= \"http://schemas.android.com/apk/res-auto\" xmlns:tools= \"http://schemas.android.com/tools\" android:layout_width= \"match_parent\" android:layout_height= \"wrap_content\" android:layout_margin= \"10dp\" android:orientation= \"horizontal\" > <ImageView android:id= \"@+id/imageView\" android:layout_width= \"wrap_content\" android:layout_height= \"wrap_content\" tools:srcCompat= \"@tools:sample/avatars[1]\" /> <TextView android:id= \"@+id/textView\" android:layout_width= \"wrap_content\" android:layout_height= \"wrap_content\" android:layout_marginLeft= \"30dp\" android:layout_marginTop= \"40dp\" android:fontFamily= \"sans-serif-black\" android:text= \"TextView\" android:textSize= \"25sp\" /> </LinearLayout>","title":"3.\u521b\u5efaRecycleView Item\u5e03\u5c40\u6587\u4ef6"},{"location":"Android/Application/RecycleView/#4layoutactivity_mainxmlrecycleview","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 <?xml version=\"1.0\" encoding=\"utf-8\"?> <androidx.constraintlayout.widget.ConstraintLayout xmlns:android= \"http://schemas.android.com/apk/res/android\" xmlns:app= \"http://schemas.android.com/apk/res-auto\" xmlns:tools= \"http://schemas.android.com/tools\" android:layout_width= \"match_parent\" android:layout_height= \"match_parent\" tools:context= \".MainActivity\" > <androidx.recyclerview.widget.RecyclerView android:id= \"@+id/recycleview\" android:layout_width= \"match_parent\" android:layout_height= \"match_parent\" tools:listitem= \"@layout/recycleview_item\" /> </androidx.constraintlayout.widget.ConstraintLayout>","title":"4.\u5728layout/activity_main.xml\u4e2d\u6dfb\u52a0RecycleView\u7ec4\u4ef6"},{"location":"Android/Application/RecycleView/#5adapter","text":"","title":"5.\u521b\u5efaAdapter"},{"location":"Android/Application/RecycleView/#6recycleview","text":"","title":"6.\u4f7f\u7528RecycleView\u7ec4\u4ef6"},{"location":"Android/android_compiler_system/android_compile_system/","text":"android compiler office site Android \u5e73\u53f0\u7684\u7edd\u5927\u591a\u6570\u5e94\u7528\u662f\u4f7f\u7528 Java \u8bed\u8a00\u5199\u7684\uff0cCPU \u53ea\u80fd\u7406\u89e3\u6c47\u7f16\u6307\u4ee4\uff0c\u65e0\u6cd5\u76f4\u63a5\u8bc6\u522b Java \u8bed\u8a00\u7684\u865a\u62df\u673a\u6307\u4ee4\uff1b\u4e3a\u4e86\u8ba9 CPU \u80fd\u8fd0\u884c Java \u8bed\u8a00\u7f16\u5199\u7684\u7a0b\u5e8f\uff0c\u4e00\u822c\u6709\u4e24\u79cd\u529e\u6cd5\uff1a * \u300c\u8ba1\u7b97\u673a\u79d1\u5b66\u9886\u57df\u7684\u4efb\u4f55\u95ee\u9898\u90fd\u53ef\u4ee5\u901a\u8fc7\u589e\u52a0\u4e00\u4e2a\u95f4\u63a5\u7684\u4e2d\u95f4\u5c42\u6765\u89e3\u51b3\u300d \u5f15\u5165\u4e00\u4e2a\u4e2d\u95f4\u5c42\uff0c\u8fd9\u4e2a\u4e2d\u95f4\u5c42\u8d1f\u8d23 Java\u4ee3\u7801\u7684\u6267\u884c\uff0c\u7136\u540e\u8fd9\u4e2a\u4e2d\u95f4\u5c42\u672c\u8eab\u7f16\u8bd1\u4e3a CPU \u80fd\u7406\u89e3\u7684\u6c47\u7f16\u6307\u4ee4\uff0c\u4e5f\u5c31\u662f CPU -> \u4e2d\u95f4\u5c42 -> Java \u4ee3\u7801\u3002\u5982\u679c\u8fd9\u4e2a\u4e2d\u95f4\u5c42\u91c7\u7528 Java \u8bed\u8a00\u76f4\u63a5\u4f5c\u4e3a\u8f93\u5165\uff0c\u7406\u89e3\u4e00\u53e5 Java \u8bed\u53e5\u5c31\u628aJava\u8bed\u8a00\u7ffb\u8bd1\u4e00\u4e0b\u8ba9CPU \u6267\u884c\u4e00\u6bb5\uff0c\u6211\u4eec\u4e00\u822c\u79f0\u8fd9\u79cd\u6a21\u5f0f\u4e3a\u300c\u89e3\u91ca\u6267\u884c\u300d\u3002\u6bcb\u5eb8\u7f6e\u7591\u8fd9\u79cd\u65b9\u5f0f\u6548\u7387\u662f\u76f8\u5f53\u4f4e\u6548\u7684\u3002 \u76f4\u63a5\u628a Java \u8bed\u8a00\u7ffb\u8bd1\u6210 CPU \u80fd\u7406\u89e3\u7684\u673a\u5668\u8bed\u8a00\u3002\u8fd9\u91cc\u53c8\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a \u5728\u7a0b\u5e8f\u8fd0\u884c\u4e4b\u524d\u76f4\u63a5\u628a Java \u4ee3\u7801\u7f16\u8bd1\u4e3a\u673a\u5668\u8bed\u8a00\u3002\u8fd9\u79cd\u6a21\u5f0f\u6211\u4eec\u79f0\u4e4b\u4e3a AOT \uff08Ahead of time\uff09\u7f16\u8bd1\u3002 \u5728\u7a0b\u5e8f\u8fd0\u884c\u8d77\u6765\u4e4b\u540e\uff0c\u5b9e\u65f6\u5730\u628a Java \u8bed\u8a00\u7f16\u8bd1\u4e3a\u673a\u5668\u8bed\u8a00\u7136\u540e\u6267\u884c\u3002\u8fd9\u79cd\u6a21\u5f0f\u79f0\u4e4b\u4e3a JIT\uff08Just in time\uff09 \u7f16\u8bd1\u3002 \u80cc\u666f\u4ecb\u7ecd\u5b8c\u4e86\u56de\u5230 Android \u5e73\u53f0\u4e0a\u9762\uff0cAndroid \u5e73\u53f0\u5206\u4e3a\u51e0\u4e2a\u9636\u6bb5\uff1a\u5728 Android 5.0 \u6b63\u5f0f\u91c7\u7528 ART \u4e4b\u524d\uff0cAndroid \u91c7\u7528\u7684\u662f \u89e3\u91ca\u6267\u884c + \u8fa3\u9e21 JIT \u7684\u65b9\u5f0f\u6267\u884c Java\u4ee3\u7801\u3002\u5728\u8fd9\u4e2a\u9636\u6bb5\u662f\u8d27\u771f\u4ef7\u5b9e\u7684\u300c\u8fb9\u89e3\u91ca\u8fb9\u6267\u884c\u300d\u7684\u6a21\u5f0f\uff0c\u4ee3\u7801\u6548\u7387\u76f8\u5f53\u4f4e\u4e0b\uff0c\u518d\u52a0\u4e0a\u90a3\u65f6\u5019\u540c\u6837\u8fa3\u9e21\u7684 GC \uff08\u5783\u573e\u56de\u6536\uff09\uff0cAndroid \u7528\u8d77\u6765\u771f\u662f\u60e8\u4e0d\u5fcd\u7779\u3002Android 5.0 \uff5e Android 6.0 \u3002Google \u63a8\u51fa\u4e86 ART \uff08Android Runtime\uff09\u6765\u89e3\u51b3\u4e4b\u524d\u7684 Java \u4ee3\u7801\u6267\u884c\u6548\u7387\u95ee\u9898\u3002\u8fd9\u4e2a\u9636\u6bb5\u91c7\u7528\u7684\u662f\u5b8c\u5168 AOT \u6a21\u5f0f\uff1bAndroid \u5e94\u7528\u5728\u5b89\u88c5\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u4f1a\u628a\u6240\u6709Java\u4ee3\u7801\u63d0\u524d\u7f16\u8bd1\u4e3a\u673a\u5668\u7801\u3002\u8fd9\u79cd\u6a21\u5f0f\u6709\u4e24\u4e2a\u7f3a\u70b9\u4e0d\u80fd\u5fcd\uff1a\u5b89\u88c5\u901f\u5ea6\u5de8\u6162\u3002\u5373\u4f7f\u662f\u73b0\u5728\u540a\u70b8\u5929\u7684 855 \u91c7\u7528 AOT \u6a21\u5f0f\u7f16\u8bd1\u4e00\u4e0b\u5b89\u88c5\u5305\u6bd4\u8f83\u5927\u7684\u5e94\u7528\uff08\u5982\u652f\u4ed8\u5b9d\uff09\u53ef\u80fd\u5c31\u8981\u4e00\u5206\u949f\u3002\u90a3\u4e2a\u65f6\u5019\u7684 CPU \u53ef\u4e0d\u5982\u73b0\u5728\uff0c\u5b89\u88c5\u4e00\u4e2a\u5e94\u7528\u90fd\u8ba9\u4f60\u7b49\u5f97\u5934\u76ae\u53d1\u9ebb\u3002\u66f4\u8981\u547d\u7684\u65f6\u5019\uff0c\u7cfb\u7edf OTA \u5f00\u673a\u4f1a\u5bf9\u6240\u6709\u7684\u5e94\u7528\u6267\u884c AOT \u64cd\u4f5c\uff0c\u8fd9\u65f6\u5019\u4f60\u7684\u5f00\u673a\u901f\u5ea6\u53ef\u80fd\u8981\u534a\u4e2a\u5c0f\u65f6\u3002\u3002\u3002\u5360\u7528\u78c1\u76d8\u7a7a\u95f4\uff0cJava \u4ee3\u7801\u7f16\u8bd1\u4e3a\u673a\u5668\u7801\u4e4b\u540e\u4f53\u79ef\u4f1a\u6025\u5267\u81a8\u80c0\u3002Android 7.0 \uff5e \u73b0\u5728\u3002Google\u505a\u4e86\u5f88\u5927\u7684\u6539\u8fdb\uff0c\u57fa\u4e8e\u8fd9\u6837\u4e00\u4e2a\u4e8b\u5b9e\uff1a\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u5e94\u7528\u7684\u65f6\u5019\uff0c\u57fa\u672c\u6bcf\u4e2a\u4eba\u53ea\u4f7f\u7528\u5b83\u4e00\u5c0f\u90e8\u5206\u529f\u80fd\uff0c\u4e3a\u4ec0\u4e48\u8981\u628a\u6240\u6709\u4ee3\u7801\u5168\u7f16\u8bd1\u5462\uff1f\u53ea\u7f16\u8bd1\u4f60\u7ecf\u5e38\u7528\u7684\u90a3\u90e8\u5206\u4ee3\u7801\u4e0d\u5c31 OK \u4e86\uff0c\u8fd9\u6837\u5b89\u88c5\u7684\u65f6\u5019\u5565\u4e5f\u4e0d\u5e72\u901f\u5ea6\u98de\u5feb\uff0c\u7b49\u4f60\u7528\u7684\u65f6\u5019\u7cfb\u7edf\u5c31\u80fd\u77e5\u9053\u54ea\u90e8\u5206\u4ee3\u7801\u7ecf\u5e38\u88ab\u6267\u884c\uff0c\u628a\u8fd9\u90e8\u5206\u4ee3\u7801\u7f16\u8bd1\u4e3a\u673a\u5668\u7801\uff0c\u8fd0\u884c\u8d77\u6765\u901f\u5ea6\u4e5f\u5feb\u3002\u4e8e\u662f Google \u53c8\u5f15\u5165\u4e86 JIT\uff0c\u8fd9\u65f6\u5019\u7684\u6267\u884c\u6a21\u5f0f\u662f AOT + JIT + \u89e3\u91ca\u6267\u884c\u3002\u5e94\u7528\u5b89\u88c5\u7684\u65f6\u5019\u4e0d\u6267\u884c AOT \u7f16\u8bd1\uff0c\u5b89\u88c5\u901f\u5ea6\u98de\u5feb\u3002\u521d\u6b21\u4f7f\u7528\u5e94\u7528\u7684\u65f6\u5019\u6ca1\u6709\u673a\u5668\u7801\uff0c\u56e0\u6b64\u53ea\u80fd\u89e3\u91ca\u6267\u884c\u3002\u5e94\u7528\u8fd0\u884c\u8d77\u6765\u4e4b\u540e\uff0c\u7cfb\u7edf\u6536\u96c6\u7ecf\u5e38\u88ab\u8fd0\u884c\u7684\u4ee3\u7801\u7684\u4fe1\u606f\uff0c\u505a\u4e24\u4ef6\u4e8b\uff1a1\uff09\u5728\u5fc5\u8981\u7684\u65f6\u5019\u5728\u8fd0\u884c\u65f6\u76f4\u63a5\u628a Java \u4ee3\u7801\u7f16\u8bd1\u4e3a\u673a\u5668\u7801 \uff08JIT\uff09\uff0c\u7136\u540e\u4f7f\u7528\u673a\u5668\u7801\u6267\u884c\u63d0\u9ad8\u8fd0\u884c\u6548\u7387\u30022\uff09\u628a\u8fd9\u4e2a\u300c\u7ecf\u5e38\u88ab\u8fd0\u884c\u7684\u4ee3\u7801\u4fe1\u606f\u4fdd\u5b58\u8d77\u6765\u300d\u8bbe\u5907\u7a7a\u95f2\u7684\u65f6\u5019\uff0c\u7cfb\u7edf\u62ff\u51fa\u5e94\u7528\u8fd0\u884c\u65f6\u5019\u4fdd\u5b58\u7684\u300c\u70ed\u70b9\u4ee3\u7801\u4fe1\u606f\u300d\u76f4\u63a5\u628a\u8fd9\u4e9b\u4ee3\u7801\u7f16\u8bd1\u4e3a\u673a\u5668\u7801 \uff08AOT\uff09\u5173\u4e8e Android 7.0 \u7cfb\u7edf\u7684\u6f14\u8fdb\u53ef\u4ee5\u53c2\u9605\u8fd9\u91cc\uff1ahttp://s3.amazonaws.com/connect.linaro.org/las16/Presentations/Tuesday/LAS16-201%20-%20ART%20JIT%20in%20Android%20N.pdfAndroid 8.0\u4e0a\u6539\u8fdb\u4e86\u89e3\u91ca\u5668\uff0c\u89e3\u91ca\u6a21\u5f0f\u6267\u884c\u6548\u7387\u5927\u5e45\u63d0\u5347\uff1bAndroid 9.0\u4e0a\u63d0\u4f9b\u4e86\u9884\u5148\u653e\u7f6e\u70ed\u70b9\u4ee3\u7801\u7684\u65b9\u5f0f\uff0c\u5e94\u7528\u5728\u5b89\u88c5\u7684\u65f6\u5019\u5c31\u80fd\u77e5\u9053\u5e38\u7528\u4ee3\u7801\u4f1a\u88ab\u63d0\u524d\u7f16\u8bd1\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u524d Android \u5e73\u53f0\u7684\u6267\u884c\u6a21\u5f0f\u5728\u7a7a\u95f4\u5360\u7528+\u5b89\u88c5\u901f\u5ea6+\u8fd0\u884c\u901f\u5ea6\u4e0a\u5df2\u7ecf\u8fbe\u5230\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u5e73\u8861\u3002\u56de\u5230\u534e\u4e3a\u7684\u8fd9\u4e2a\u65b9\u821f\u7f16\u8bd1\u5668\u4e0a\u9762\uff0c\u73b0\u5728\u7684 Android \u662f\u8fb9\u89e3\u91ca\u8fb9\u6267\u884c\u7684\u5417\uff1f\u53ef\u4ee5\u8bf4\u662f\uff0c\u4e5f\u53ef\u4ee5\u8bf4\u4e0d\u662f\u3002\u4e0a\u9762\u6211\u5df2\u7ecf\u63d0\u5230\u4e86\uff0c\u73b0\u5728\u7684 Android \u662f \u89e3\u91ca\u6267\u884c + \u8fd8\u7b97\u53ef\u4ee5\u7684JIT + AOT \u7684\u6a21\u5f0f\u3002\u5e76\u4e14\uff0c\u4f60\u4e5f\u53ef\u4ee5\u624b\u52a8\u628a\u5e94\u7528\u7684\u4ee3\u7801\u5168\u90e8\u63d0\u524d\u7f16\u8bd1\u8fbe\u5230\u5b8c\u5168 AOT \u7684\u6548\u679c\uff08\u5f88\u591a\u7b54\u6848\u91cc\u9762\u63d0\u5230\u7684 AOT \u5c31\u662f\u8bf4\u7684\u8fd9\u79cd\uff09\uff1b\u4e0d\u8fc7\u8fd9\u5c5e\u4e8e\u5f00\u5012\u8f66\uff0cGoogle \u80af\u5b9a\u4e0d\u4f1a\u8fd9\u4e48\u505a\u3002\u8fd9\u6837\u505a\u6548\u679c\u6709\u591a\u5927\u5462\uff1f\u8fd9\u4e2a\u6211\u6709\u53d1\u8a00\u6743\u3002\u4e4b\u524d\u5728\u652f\u4ed8\u5b9d\u505a\u6027\u80fd\u4f18\u5316\u7684\u65f6\u5019\uff0c\u6211\u5e72\u8fc7\u8fd9\u4e48\u4e00\u56de\u4e8b\uff1a\u8ba9\u5e94\u7528\u5728\u540e\u53f0\u8fd0\u884c\u7684\u65f6\u5019\u8bf7\u6c42\u7cfb\u7edf\u76f4\u63a5\u91c7\u7528 everything \u6a21\u5f0f\u7f16\u8bd1\u652f\u4ed8\u5b9d\uff0c\u672c\u5730\u6d4b\u8bd5\u542f\u52a8\u901f\u5ea6\u6709\u7206\u70b8\u6027\u63d0\u5347\uff0830%~50%\uff09\uff1b\u4f46\u662f\u7070\u5ea6\u6d4b\u8bd5\u7684\u65f6\u5019\u6548\u679c\u4e0d\u660e\u663e\uff0c\u4e3a\u4ec0\u4e48\u5462\uff1f\u5176\u4e00\u662f\u540e\u53f0\u5168\u7f16\u8bd1\u8fd0\u884c\u6210\u529f\u7387\u4f4e\uff0c\u5176\u4e8c\u662f\u7cfb\u7edf\u7684 JIT + \u540e\u53f0 AOT \u4e0d\u662f\u5403\u7d20\u7684\uff1b\u8003\u8651\u5230\u8017\u7535/\u5360\u7a7a\u95f4\u7684\u95ee\u9898\u538b\u6839\u6ca1\u4e0a\u7ebf\u3002\u6240\u4ee5\u5982\u679c\u534e\u4e3a\u53ea\u662f\u7b80\u5355\u5730\u7528\u8fd9\u79cd\u65b9\u5f0f\u53bb\u907f\u514d\u6240\u8c13\u7684\u300c\u8fb9\u89e3\u91ca\u8fb9\u6267\u884c\u300d\u90a3\u5c31\u76f8\u5f53\u6ef4 low\uff0c\u4f46\u662f\u6309\u7167 GPU Turbo\u8fd9\u79cd\u9ed1\u79d1\u6280\u6765\u770b\uff0c\u6211\u89c9\u5f97\u4e0d\u592a\u53ef\u80fd\u662f\u8fd9\u4e2a\u3002\u9664\u4e86 Android \u7cfb\u7edf\u7684\u8fd9\u79cd AOT \u4e4b\u5916\uff0c\u96be\u9053\u6ca1\u6709\u522b\u7684\u529e\u6cd5\u4e86\u5417\uff1f\u6211\u4e0d\u8d1f\u8d23\u4efb\u5730\u731c\u6d4b\u4e00\u4e0b\uff0c\u65b9\u821f\u7f16\u8bd1\u5668\u662f\u4e0d\u662f\u5728Android \u5e94\u7528\u6253\u5305\u6210APK\u7684\u65f6\u5019\uff0c\u76f4\u63a5\u628a Java \u4ee3\u7801\u7f16\u8bd1\u4e3a\u4e86\u673a\u5668\u7801\uff1f\u6ce8\u610f\u8fd9\u4e2a\u8ddfAndroid\u7cfb\u7edf\u7684\u90a3\u4e2a AOT \u662f\u4e0d\u6837\u7684\uff0c\u7cfb\u7edf\u662f\u5728\u5e94\u7528\u5b89\u88c5\u6216\u8005\u7cfb\u7edf\u7a7a\u95f2\u7684\u65f6\u5019\u505a\u7f16\u8bd1\uff1b\u8fd9\u79cd\u65b9\u5f0f\u4f60\u4e0b\u8f7d\u5230\u7684\u5b89\u88c5\u5305\u5c31\u662f\u7f16\u8bd1\u597d\u7684\u4e86\uff0c\u4e0d\u9700\u8981\u7cfb\u7edf\u52a8\u624b\u3002\u5982\u679c\u662f\u7b2c\u4e00\u79cd\uff0c\u8fa3\u9e21\u534e\u4e3a\u3002\u5982\u679c\u662f\u7b2c\u4e8c\u79cd\uff0c\u540a\u70b8\u5929\uff01\uff01\uff01\u5f53\u7136\u8fd8\u6709\u522b\u7684\u53ef\u80fd\uff0c\u4e0d\u7ba1\u548b\u6837\uff0c\u9759\u5f85\u5f00\u6e90","title":"Android\u7f16\u8bd1\u7cfb\u7edf"},{"location":"Android/android_ndk/android_art/","text":"Android ART \u00b6 ART \u00b6 ART: Android Runtime \u662f AOT(Ahead of time) APK\u5728\u5b89\u88c5\u65f6\u88ab\u6267\u884c\u4e86AOT AOT\uff08Ahead Of Time\uff09\u662f\u76f8\u5bf9JIT\uff08Just In Time\uff09\u800c\u8a00\u7684 \u5728ART\u4e2d\uff0c\u6253\u5305\u5728APK\u91cc\u9762\u7684Dex\u5b57\u8282\u7801\u662f\u901a\u8fc7LLVM\u7ffb\u8bd1\u6210\u672c\u5730\u673a\u5668\u6307\u4ee4\u7684 LLVM(Low Level Virtual Meachine) \u00b6","title":"ART"},{"location":"Android/android_ndk/android_art/#android-art","text":"","title":"Android ART"},{"location":"Android/android_ndk/android_art/#art","text":"ART: Android Runtime \u662f AOT(Ahead of time) APK\u5728\u5b89\u88c5\u65f6\u88ab\u6267\u884c\u4e86AOT AOT\uff08Ahead Of Time\uff09\u662f\u76f8\u5bf9JIT\uff08Just In Time\uff09\u800c\u8a00\u7684 \u5728ART\u4e2d\uff0c\u6253\u5305\u5728APK\u91cc\u9762\u7684Dex\u5b57\u8282\u7801\u662f\u901a\u8fc7LLVM\u7ffb\u8bd1\u6210\u672c\u5730\u673a\u5668\u6307\u4ee4\u7684","title":"ART"},{"location":"Android/android_ndk/android_art/#llvmlow-level-virtual-meachine","text":"","title":"LLVM(Low Level Virtual Meachine)"},{"location":"Android/android_ndk/android_cmake/","text":"Android Studio CMake \u00b6 1.\u5c06\u7b2c\u4e09\u65b9.so\u6253\u5305\u8fdbAPK \u00b6 \u53ea\u6709\u5c06\u7b2c\u4e09\u65b9.so\u6587\u4ef6\u6253\u5305\u8fdbAPK\uff0c\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u4f7f\u7528 \u65b9\u6cd5\u4e00 \u521b\u5efasrc/main/jniLibs\u6587\u4ef6\u5939\uff0c\u5e76\u5c06\u5404\u4e2a\u67b6\u6784\u7684.so\u6587\u4ef6\u653e\u5728\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0bgradle\u6784\u5efa\u7cfb\u7edf\u4f1a\u53bbsrc/main/jniLib\u6587\u4ef6\u5939 \u4e0b\u5bfb\u627e.so\u6587\u4ef6\u3002 \u5f53\u7136\u4e5f\u53ef\u4ee5\u53ea\u653e\u4f60\u7528\u5230\u7684\u67b6\u6784\uff0c\u5c31\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u53ea\u4f1a\u7528\u5230arm64-v8a\u3002 \u4f46\u662fgradle\u6784\u5efa\u65f6\u9ed8\u8ba4\u4f1a\u53bb\u5bfb\u627e\u6240\u6709\u7684\u67b6\u6784\uff0c\u5982\u679c\u7f3a\u5c11\u5c31\u4f1a\u62a5\u9519\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u544a\u8bc9gradle\u6784\u5efa\u7cfb\u7edf\uff0c \u6211\u4eec\u53ea\u9700\u8981arm64-v8a\u67b6\u6784\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 android { ... defaultConfig { ... externalNativeBuild { cmake {...} } // Similar to other properties in the defaultConfig block, // you can configure the ndk block for each product flavor // in your build configuration. ndk { // Specifies the ABI configurations of your native // libraries Gradle should build and package with your APK. abiFilters 'arm64-v8a' //,'armeabi-v7a' } } buildTypes {...} externalNativeBuild {...} } \u65b9\u6cd5\u4e8c \u5c06.so\u6587\u4ef6\u653e\u5728\u5de5\u7a0b\u4e2d\u7684\u4efb\u610f\u6587\u4ef6\u5939\u4e2d\uff0c\u6bd4\u5982libs\uff0c\u7136\u540e\u544a\u8bc9gradle\u6784\u5efa\u7cfb\u7edf\u5bfb\u627e.so\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 android { ... sourceSets { main { jniLibs.srcDirs 'libs' } } } 2.CMake\u57fa\u7840\u77e5\u8bc6\u70b9 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 # For more information about using CMake with Android Studio, read the # documentation: https://d.android.com/studio/projects/add-native-code.html # Sets the minimum version of CMake required to build the native library. cmake_minimum_required ( VERSION 3.4.1 ) # \u8fd9\u4e24\u4e2a\u5fc5\u987b\u5199\u5728\u4e00\u5757 add_library ( opus SHARED IMPORTED ) set_target_properties ( opus PROPERTIES IMPORTED_LOCATION ${ CMAKE_SOURCE_DIR } /../jniLibs/ ${ ANDROID_ABI } /libopus.so ) # Debug\u4fe1\u606f(.externalNativeBuild/cmake/debug/{abi}/cmake_build_output.txt\u4e2d\u67e5\u770b) MESSAGE ( STATUS CMAKE_LIBRARY_ARCHITECTURE: ${ CMAKE_LIBRARY_ARCHITECTURE } ) MESSAGE ( STATUS CMAKE_PREFIX_PATH: ${ CMAKE_PREFIX_PATH } ) MESSAGE ( STATUS CMAKE_LIBRARY_PATH: ${ CMAKE_LIBRARY_PATH } ) MESSAGE ( STATUS CMAKE_FRAMEWORK_PATH: ${ CMAKE_FRAMEWORK_PATH } ) # Creates and names a library, sets it as either STATIC # or SHARED, and provides the relative paths to its source code. # You can define multiple libraries, and CMake builds them for you. # Gradle automatically packages shared libraries with your APK. add_library ( # Sets the name of the library. native-lib # Sets the library as a shared library. SHARED # Provides a relative path to your source file(s). native-lib.cpp ) # Searches for a specified prebuilt library and stores the path as a # variable. Because CMake includes system libraries in the search path by # default, you only need to specify the name of the public NDK library # you want to add. CMake verifies that the library exists before # completing its build. # \u627e\u5230liblog.so\u6587\u4ef6\uff0c\u5e76\u5c06\u627e\u5230\u7684\u6587\u4ef6\u8def\u5f84\u8d4b\u503c\u7ed9log-lib\u53d8\u91cf # \u5e76\u4e14\u4e0d\u9700\u8981\u63d0\u4f9bliblog.so\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u56e0\u4e3aCMake\u9ed8\u8ba4\u5df2\u7ecf\u5305\u542b\u4e86\u7cfb\u7edf\u5e93\u7684\u641c\u7d22\u8def\u5f84 #find_library( # Sets the name of the path variable. # log-lib # # # Specifies the name of the NDK library that # # you want CMake to locate. # log) # Specifies libraries CMake should link to your target library. You # can link multiple libraries, such as libraries you define in this # build script, prebuilt third-party libraries, or system libraries. # \u8fd9\u4e2a\u5c31\u76f8\u5f53\u4e8e\u7f16\u8bd1\u7684\u65f6\u5019\u94fe\u63a5\u7b2c\u4e09\u65b9\u5e93 # g++ native-lib.c -I. -L. -lopus -llog -o libnative-lib.so target_link_libraries ( # Specifies the target library. native-lib opus # Links the target library to the log library # included in the NDK. log ) 2.1 Using CMake variables in Gradle \u00b6 1 2 3 4 5 6 externalNativeBuild { cmake { cppFlags \"-frtti -fexceptions -std=c++14\" arguments '-DANDROID_STL=c++_shared' } } 2.2 aux_source_directory \u00b6 1 2 3 4 5 # \u67e5\u627e\u6240\u6709\u6e90\u7801 \u5e76\u62fc\u63a5\u5230\u8def\u5f84\u5217\u8868 aux_source_directory ( ${ CMAKE_HOME_DIRECTORY } /src/api SRC_LIST ) aux_source_directory ( ${ CMAKE_HOME_DIRECTORY } /src/core CORE_SRC_LIST ) list ( APPEND SRC_LIST ${ CORE_SRC_LIST } ) add_library ( native-lib SHARED ${ SRC_LIST } )","title":"Android CMake\u77e5\u8bc6\u70b9"},{"location":"Android/android_ndk/android_cmake/#android-studio-cmake","text":"","title":"Android Studio CMake"},{"location":"Android/android_ndk/android_cmake/#1soapk","text":"\u53ea\u6709\u5c06\u7b2c\u4e09\u65b9.so\u6587\u4ef6\u6253\u5305\u8fdbAPK\uff0c\u7a0b\u5e8f\u5728\u8fd0\u884c\u65f6\u624d\u80fd\u4f7f\u7528 \u65b9\u6cd5\u4e00 \u521b\u5efasrc/main/jniLibs\u6587\u4ef6\u5939\uff0c\u5e76\u5c06\u5404\u4e2a\u67b6\u6784\u7684.so\u6587\u4ef6\u653e\u5728\u8fd9\u4e2a\u6587\u4ef6\u5939\u4e0b\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0bgradle\u6784\u5efa\u7cfb\u7edf\u4f1a\u53bbsrc/main/jniLib\u6587\u4ef6\u5939 \u4e0b\u5bfb\u627e.so\u6587\u4ef6\u3002 \u5f53\u7136\u4e5f\u53ef\u4ee5\u53ea\u653e\u4f60\u7528\u5230\u7684\u67b6\u6784\uff0c\u5c31\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6211\u53ea\u4f1a\u7528\u5230arm64-v8a\u3002 \u4f46\u662fgradle\u6784\u5efa\u65f6\u9ed8\u8ba4\u4f1a\u53bb\u5bfb\u627e\u6240\u6709\u7684\u67b6\u6784\uff0c\u5982\u679c\u7f3a\u5c11\u5c31\u4f1a\u62a5\u9519\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u9700\u8981\u544a\u8bc9gradle\u6784\u5efa\u7cfb\u7edf\uff0c \u6211\u4eec\u53ea\u9700\u8981arm64-v8a\u67b6\u6784\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 android { ... defaultConfig { ... externalNativeBuild { cmake {...} } // Similar to other properties in the defaultConfig block, // you can configure the ndk block for each product flavor // in your build configuration. ndk { // Specifies the ABI configurations of your native // libraries Gradle should build and package with your APK. abiFilters 'arm64-v8a' //,'armeabi-v7a' } } buildTypes {...} externalNativeBuild {...} } \u65b9\u6cd5\u4e8c \u5c06.so\u6587\u4ef6\u653e\u5728\u5de5\u7a0b\u4e2d\u7684\u4efb\u610f\u6587\u4ef6\u5939\u4e2d\uff0c\u6bd4\u5982libs\uff0c\u7136\u540e\u544a\u8bc9gradle\u6784\u5efa\u7cfb\u7edf\u5bfb\u627e.so\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u65b9\u6cd5\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 android { ... sourceSets { main { jniLibs.srcDirs 'libs' } } }","title":"1.\u5c06\u7b2c\u4e09\u65b9.so\u6253\u5305\u8fdbAPK"},{"location":"Android/android_ndk/android_cmake/#2cmake","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 # For more information about using CMake with Android Studio, read the # documentation: https://d.android.com/studio/projects/add-native-code.html # Sets the minimum version of CMake required to build the native library. cmake_minimum_required ( VERSION 3.4.1 ) # \u8fd9\u4e24\u4e2a\u5fc5\u987b\u5199\u5728\u4e00\u5757 add_library ( opus SHARED IMPORTED ) set_target_properties ( opus PROPERTIES IMPORTED_LOCATION ${ CMAKE_SOURCE_DIR } /../jniLibs/ ${ ANDROID_ABI } /libopus.so ) # Debug\u4fe1\u606f(.externalNativeBuild/cmake/debug/{abi}/cmake_build_output.txt\u4e2d\u67e5\u770b) MESSAGE ( STATUS CMAKE_LIBRARY_ARCHITECTURE: ${ CMAKE_LIBRARY_ARCHITECTURE } ) MESSAGE ( STATUS CMAKE_PREFIX_PATH: ${ CMAKE_PREFIX_PATH } ) MESSAGE ( STATUS CMAKE_LIBRARY_PATH: ${ CMAKE_LIBRARY_PATH } ) MESSAGE ( STATUS CMAKE_FRAMEWORK_PATH: ${ CMAKE_FRAMEWORK_PATH } ) # Creates and names a library, sets it as either STATIC # or SHARED, and provides the relative paths to its source code. # You can define multiple libraries, and CMake builds them for you. # Gradle automatically packages shared libraries with your APK. add_library ( # Sets the name of the library. native-lib # Sets the library as a shared library. SHARED # Provides a relative path to your source file(s). native-lib.cpp ) # Searches for a specified prebuilt library and stores the path as a # variable. Because CMake includes system libraries in the search path by # default, you only need to specify the name of the public NDK library # you want to add. CMake verifies that the library exists before # completing its build. # \u627e\u5230liblog.so\u6587\u4ef6\uff0c\u5e76\u5c06\u627e\u5230\u7684\u6587\u4ef6\u8def\u5f84\u8d4b\u503c\u7ed9log-lib\u53d8\u91cf # \u5e76\u4e14\u4e0d\u9700\u8981\u63d0\u4f9bliblog.so\u6587\u4ef6\u7684\u8def\u5f84\uff0c\u56e0\u4e3aCMake\u9ed8\u8ba4\u5df2\u7ecf\u5305\u542b\u4e86\u7cfb\u7edf\u5e93\u7684\u641c\u7d22\u8def\u5f84 #find_library( # Sets the name of the path variable. # log-lib # # # Specifies the name of the NDK library that # # you want CMake to locate. # log) # Specifies libraries CMake should link to your target library. You # can link multiple libraries, such as libraries you define in this # build script, prebuilt third-party libraries, or system libraries. # \u8fd9\u4e2a\u5c31\u76f8\u5f53\u4e8e\u7f16\u8bd1\u7684\u65f6\u5019\u94fe\u63a5\u7b2c\u4e09\u65b9\u5e93 # g++ native-lib.c -I. -L. -lopus -llog -o libnative-lib.so target_link_libraries ( # Specifies the target library. native-lib opus # Links the target library to the log library # included in the NDK. log )","title":"2.CMake\u57fa\u7840\u77e5\u8bc6\u70b9"},{"location":"Android/android_ndk/android_cmake/#21-using-cmake-variables-in-gradle","text":"1 2 3 4 5 6 externalNativeBuild { cmake { cppFlags \"-frtti -fexceptions -std=c++14\" arguments '-DANDROID_STL=c++_shared' } }","title":"2.1 Using CMake variables in Gradle"},{"location":"Android/android_ndk/android_cmake/#22-aux_source_directory","text":"1 2 3 4 5 # \u67e5\u627e\u6240\u6709\u6e90\u7801 \u5e76\u62fc\u63a5\u5230\u8def\u5f84\u5217\u8868 aux_source_directory ( ${ CMAKE_HOME_DIRECTORY } /src/api SRC_LIST ) aux_source_directory ( ${ CMAKE_HOME_DIRECTORY } /src/core CORE_SRC_LIST ) list ( APPEND SRC_LIST ${ CORE_SRC_LIST } ) add_library ( native-lib SHARED ${ SRC_LIST } )","title":"2.2 aux_source_directory"},{"location":"Android/android_ndk/android_ndk/","text":"Android NDK\u5f00\u53d1 \u00b6 \u6ce8\u610f\uff1aJava\u901a\u8fc7JNI\u8c03\u7528C/C++\u7a0b\u5e8f\uff0c\u5176\u6548\u7387\u5e76\u4e0d\u4e00\u5b9a\u4f1a\u63d0\u9ad8\uff0c\u751a\u81f3\u4f1a\u6bd4\u7eafjava\u8fd8\u4f4e 1. \u4f7f\u7528\u4e0d\u5e26JNI\u63a5\u53e3\u7684.so\u6587\u4ef6 \u00b6 \u4e0d\u5e26JNI\u63a5\u53e3\u7684.so\u6587\u4ef6\uff0c\u4e00\u822c\u662f\u76f4\u63a5\u7531\u73b0\u6709C/C++\u4ee3\u7801\u7f16\u8bd1\u6210\u7684\u3002\u5728Android\u4f7f\u7528\u65f6\u9700\u81ea\u5df1\u7f16\u5199JNI\u5c42\u3002 eg: add.c 1 2 3 4 5 // add.c int add ( int a , int b ) { return a + b ; } 1.1 \u5728Android Studio\u4e2d\u5c06add.c\u7f16\u8bd1\u4e3a.so\u6587\u4ef6 \u00b6 Android Studio\u4e2d\u65b0\u5efaJNI\u5de5\u7a0b\uff0c\u7136\u540e\u5728CMakeList.txt\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a 1 2 3 4 5 6 7 8 add_library( # Sets the name of the library. add # Sets the library as a shared library. SHARED # Provides a relative path to your source file(s). add.c) \u5728\u751f\u6210\u7684apk\u6587\u4ef6\u4e2d\u53ef\u4ee5\u627e\u5230libadd.so\u6587\u4ef6 1.2 \u901a\u8fc7JNI\u63a5\u53e3\u8c03\u7528libadd.so\u6587\u4ef6\u4e2d\u7684\u51fd\u6570 \u00b6 \u5728native-lib.cpp\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a 1 2 3 4 5 6 7 8 9 10 #ifdef __cplusplus extern \"C\" #endif // __cplusplus int add ( int a , int b ); extern \"C\" JNIEXPORT jint JNICALL Java_com_fhc_ndktest_MainActivity_add ( JNIEnv * env , jobject thiz , jint a , jint b ) { return add ( a , b ); } \u5728MainActivity.java\u4e2d\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e86 2. \u4f7f\u7528\u5e26JNI\u63a5\u53e3\u7684.so\u6587\u4ef6 \u00b6 \u4f7f\u7528\u65f6\u8981\u6ce8\u610f\u5305\u540d\uff01\uff01\uff01 1. \u4f7f\u7528\u73b0\u6709\u7684C/C++\u5e93 \u00b6 \u53ef\u4ee5\u76f4\u63a5\u7f16\u8bd1\u6210.so\uff08\u4e0d\u5e26JNI\u63a5\u53e3\uff09\u6587\u4ef6\u7136\u540e\u5728Android Studio\u4e2d\u5f15\u7528\uff0c\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u7f16\u5199JNI\u63a5\u53e3\uff0cjava\u5c42\u624d\u80fd\u8c03\u7528 java\u8c03\u7528C/C++\u4ee3\u7801\u5fc5\u987b\u901a\u8fc7JNI\u63a5\u53e3 2. \u4f7f\u7528\u81ea\u5df1\u5199\u7684C/C++\u7a0b\u5e8f \u00b6","title":"NDK\u5f00\u53d1"},{"location":"Android/android_ndk/android_ndk/#android-ndk","text":"\u6ce8\u610f\uff1aJava\u901a\u8fc7JNI\u8c03\u7528C/C++\u7a0b\u5e8f\uff0c\u5176\u6548\u7387\u5e76\u4e0d\u4e00\u5b9a\u4f1a\u63d0\u9ad8\uff0c\u751a\u81f3\u4f1a\u6bd4\u7eafjava\u8fd8\u4f4e","title":"Android NDK\u5f00\u53d1"},{"location":"Android/android_ndk/android_ndk/#1-jniso","text":"\u4e0d\u5e26JNI\u63a5\u53e3\u7684.so\u6587\u4ef6\uff0c\u4e00\u822c\u662f\u76f4\u63a5\u7531\u73b0\u6709C/C++\u4ee3\u7801\u7f16\u8bd1\u6210\u7684\u3002\u5728Android\u4f7f\u7528\u65f6\u9700\u81ea\u5df1\u7f16\u5199JNI\u5c42\u3002 eg: add.c 1 2 3 4 5 // add.c int add ( int a , int b ) { return a + b ; }","title":"1. \u4f7f\u7528\u4e0d\u5e26JNI\u63a5\u53e3\u7684.so\u6587\u4ef6"},{"location":"Android/android_ndk/android_ndk/#11-android-studioaddcso","text":"Android Studio\u4e2d\u65b0\u5efaJNI\u5de5\u7a0b\uff0c\u7136\u540e\u5728CMakeList.txt\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a 1 2 3 4 5 6 7 8 add_library( # Sets the name of the library. add # Sets the library as a shared library. SHARED # Provides a relative path to your source file(s). add.c) \u5728\u751f\u6210\u7684apk\u6587\u4ef6\u4e2d\u53ef\u4ee5\u627e\u5230libadd.so\u6587\u4ef6","title":"1.1 \u5728Android Studio\u4e2d\u5c06add.c\u7f16\u8bd1\u4e3a.so\u6587\u4ef6"},{"location":"Android/android_ndk/android_ndk/#12-jnilibaddso","text":"\u5728native-lib.cpp\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9\uff1a 1 2 3 4 5 6 7 8 9 10 #ifdef __cplusplus extern \"C\" #endif // __cplusplus int add ( int a , int b ); extern \"C\" JNIEXPORT jint JNICALL Java_com_fhc_ndktest_MainActivity_add ( JNIEnv * env , jobject thiz , jint a , jint b ) { return add ( a , b ); } \u5728MainActivity.java\u4e2d\u5c31\u53ef\u4ee5\u4f7f\u7528\u4e86","title":"1.2 \u901a\u8fc7JNI\u63a5\u53e3\u8c03\u7528libadd.so\u6587\u4ef6\u4e2d\u7684\u51fd\u6570"},{"location":"Android/android_ndk/android_ndk/#2-jniso","text":"\u4f7f\u7528\u65f6\u8981\u6ce8\u610f\u5305\u540d\uff01\uff01\uff01","title":"2. \u4f7f\u7528\u5e26JNI\u63a5\u53e3\u7684.so\u6587\u4ef6"},{"location":"Android/android_ndk/android_ndk/#1-cc","text":"\u53ef\u4ee5\u76f4\u63a5\u7f16\u8bd1\u6210.so\uff08\u4e0d\u5e26JNI\u63a5\u53e3\uff09\u6587\u4ef6\u7136\u540e\u5728Android Studio\u4e2d\u5f15\u7528\uff0c\u8fd9\u79cd\u65b9\u6cd5\u9700\u8981\u7f16\u5199JNI\u63a5\u53e3\uff0cjava\u5c42\u624d\u80fd\u8c03\u7528 java\u8c03\u7528C/C++\u4ee3\u7801\u5fc5\u987b\u901a\u8fc7JNI\u63a5\u53e3","title":"1. \u4f7f\u7528\u73b0\u6709\u7684C/C++\u5e93"},{"location":"Android/android_ndk/android_ndk/#2-cc","text":"","title":"2. \u4f7f\u7528\u81ea\u5df1\u5199\u7684C/C++\u7a0b\u5e8f"},{"location":"Android/android_ndk/cross-compile_opencv_for_android/","text":"Cross-compile OpenCV for android use CMake \u00b6 1.Get Android Standalone Toolchains \u00b6 2.Get Android SDK \u00b6 3.Install Nanja and Ant \u00b6 4.Compile \u00b6 1 2 3 4 cmake \\ -DCMAKE_TOOLCHAIN_FILE = ../platforms/android/android.toolchain.cmake \\ -DANDROID_STL = gnustl_shared \\ -DANDROID_NATIVE_API_LEVEL = 23 ..","title":"Android\u4ea4\u53c9\u7f16\u8bd1OpenCV"},{"location":"Android/android_ndk/cross-compile_opencv_for_android/#cross-compile-opencv-for-android-use-cmake","text":"","title":"Cross-compile OpenCV for android use CMake"},{"location":"Android/android_ndk/cross-compile_opencv_for_android/#1get-android-standalone-toolchains","text":"","title":"1.Get Android Standalone Toolchains"},{"location":"Android/android_ndk/cross-compile_opencv_for_android/#2get-android-sdk","text":"","title":"2.Get Android SDK"},{"location":"Android/android_ndk/cross-compile_opencv_for_android/#3install-nanja-and-ant","text":"","title":"3.Install Nanja and Ant"},{"location":"Android/android_ndk/cross-compile_opencv_for_android/#4compile","text":"1 2 3 4 cmake \\ -DCMAKE_TOOLCHAIN_FILE = ../platforms/android/android.toolchain.cmake \\ -DANDROID_STL = gnustl_shared \\ -DANDROID_NATIVE_API_LEVEL = 23 ..","title":"4.Compile"},{"location":"Android/android_ndk/cross-compile_opus_for_android/","text":"Cross-Compile OPUS \u00b6 1.Create Standalone Toolchains for ARM-Android \u00b6 Standalone Toolchains 1 2 3 4 # NDK18\u4ee5\u53ca\u4e4b\u524d\u7684\u7248\u672c /build/tools/make_standalone_toolchain.py --arch arm --api 21 --install-dir /tmp/my-android-toolchain # NDK19\u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u5355\u673a\u5de5\u5177\u94fe\uff0cmake_standalone_toolchain.py\u811a\u672c\u5df2\u7ecf\u4e0d\u518d\u9700\u8981 2.Configure the Environment variable \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 # \u5bfc\u51fa\u9700\u8981\u4f7f\u7528\u7684\u7f16\u8bd1\u5de5\u5177\uff08NDK18\u4ee5\u53ca\u4e4b\u524d\u7684\u7248\u672c\uff09 export PATH = $PATH :your_ndk_bin_path export CC = your_ndk_gcc_name export CXX = your_ndk_g++_name # Add the standalone toolchain to the search path. export PATH = $PATH : ` pwd ` /my-toolchain/bin # Tell configure what tools to use. target_host = aarch64-linux-android export AR = $target_host -ar export AS = $target_host -clang export CC = $target_host -clang export CXX = $target_host -clang++ export LD = $target_host -ld export STRIP = $target_host -strip # Tell configure what flags Android requires. export CFLAGS = \"-fPIE -fPIC\" export LDFLAGS = \"-pie\" # NDK19 export TOOLCHAIN = $NDK /toolchains/llvm/prebuilt/ $HOST_TAG export AR = $TOOLCHAIN /bin/aarch64-linux-android-ar export AS = $TOOLCHAIN /bin/aarch64-linux-android-as export CC = $TOOLCHAIN /bin/aarch64-linux-android21-clang export CXX = $TOOLCHAIN /bin/aarch64-linux-android21-clang++ export LD = $TOOLCHAIN /bin/aarch64-linux-android-ld export RANLIB = $TOOLCHAIN /bin/aarch64-linux-android-ranlib export STRIP = $TOOLCHAIN /bin/aarch64-linux-android-strip 3.Compile \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 sudo apt-get install autoconf libtool-bin automake git clone https://git.xiph.org/opus.git ./autogen.sh > \u56e0\u4e3aOPUS\u662fAutoconf\u5de5\u7a0b\uff0c\u73b0\u5728Autoconf\u5df2\u7ecf\u5bf9Android\u914d\u7f6e\u63d0\u4f9b\u4e86\u652f\u6301\uff0c\u6240\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u5373\u53ef\u7f16\u8bd1\u51faAndroid\u7248\u672c\u7684OPUS ``` bash ./configure --host = aarch64-linux-androideabi --prefix = /home/fhc/opus/android_build make make install 4.Compile Demo \u00b6 1 2 3 4 5 # \u624b\u52a8\u94fe\u63a5\u5e93\u548c\u5934\u6587\u4ef6 gcc src/opus_demo.c -L./local_build/lib -lopus -I./local_build/include -I./local_build/include/opus -I./silk -I./celt -I./include -lm # \u4f7f\u7528pkg-config gcc tcp_opus.c -o tcp_opus ` pkg-config --libs --cflags opus ` 5.\u53c2\u8003Demo \u00b6 doc/trivial_example.c \u4f8b\u7a0b\u6bd4\u8f83\u7b80\u5355\uff0c\u9002\u5408\u5165\u95e8\u53c2\u8003","title":"\u4ea4\u53c9\u7f16\u8bd1\u793a\u4f8bOPUS"},{"location":"Android/android_ndk/cross-compile_opus_for_android/#cross-compile-opus","text":"","title":"Cross-Compile OPUS"},{"location":"Android/android_ndk/cross-compile_opus_for_android/#1create-standalone-toolchains-for-arm-android","text":"Standalone Toolchains 1 2 3 4 # NDK18\u4ee5\u53ca\u4e4b\u524d\u7684\u7248\u672c /build/tools/make_standalone_toolchain.py --arch arm --api 21 --install-dir /tmp/my-android-toolchain # NDK19\u5df2\u7ecf\u9ed8\u8ba4\u5b89\u88c5\u5355\u673a\u5de5\u5177\u94fe\uff0cmake_standalone_toolchain.py\u811a\u672c\u5df2\u7ecf\u4e0d\u518d\u9700\u8981","title":"1.Create Standalone Toolchains for ARM-Android"},{"location":"Android/android_ndk/cross-compile_opus_for_android/#2configure-the-environment-variable","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 # \u5bfc\u51fa\u9700\u8981\u4f7f\u7528\u7684\u7f16\u8bd1\u5de5\u5177\uff08NDK18\u4ee5\u53ca\u4e4b\u524d\u7684\u7248\u672c\uff09 export PATH = $PATH :your_ndk_bin_path export CC = your_ndk_gcc_name export CXX = your_ndk_g++_name # Add the standalone toolchain to the search path. export PATH = $PATH : ` pwd ` /my-toolchain/bin # Tell configure what tools to use. target_host = aarch64-linux-android export AR = $target_host -ar export AS = $target_host -clang export CC = $target_host -clang export CXX = $target_host -clang++ export LD = $target_host -ld export STRIP = $target_host -strip # Tell configure what flags Android requires. export CFLAGS = \"-fPIE -fPIC\" export LDFLAGS = \"-pie\" # NDK19 export TOOLCHAIN = $NDK /toolchains/llvm/prebuilt/ $HOST_TAG export AR = $TOOLCHAIN /bin/aarch64-linux-android-ar export AS = $TOOLCHAIN /bin/aarch64-linux-android-as export CC = $TOOLCHAIN /bin/aarch64-linux-android21-clang export CXX = $TOOLCHAIN /bin/aarch64-linux-android21-clang++ export LD = $TOOLCHAIN /bin/aarch64-linux-android-ld export RANLIB = $TOOLCHAIN /bin/aarch64-linux-android-ranlib export STRIP = $TOOLCHAIN /bin/aarch64-linux-android-strip","title":"2.Configure the Environment variable"},{"location":"Android/android_ndk/cross-compile_opus_for_android/#3compile","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 sudo apt-get install autoconf libtool-bin automake git clone https://git.xiph.org/opus.git ./autogen.sh > \u56e0\u4e3aOPUS\u662fAutoconf\u5de5\u7a0b\uff0c\u73b0\u5728Autoconf\u5df2\u7ecf\u5bf9Android\u914d\u7f6e\u63d0\u4f9b\u4e86\u652f\u6301\uff0c\u6240\u4ee5\u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u5373\u53ef\u7f16\u8bd1\u51faAndroid\u7248\u672c\u7684OPUS ``` bash ./configure --host = aarch64-linux-androideabi --prefix = /home/fhc/opus/android_build make make install","title":"3.Compile"},{"location":"Android/android_ndk/cross-compile_opus_for_android/#4compile-demo","text":"1 2 3 4 5 # \u624b\u52a8\u94fe\u63a5\u5e93\u548c\u5934\u6587\u4ef6 gcc src/opus_demo.c -L./local_build/lib -lopus -I./local_build/include -I./local_build/include/opus -I./silk -I./celt -I./include -lm # \u4f7f\u7528pkg-config gcc tcp_opus.c -o tcp_opus ` pkg-config --libs --cflags opus `","title":"4.Compile Demo"},{"location":"Android/android_ndk/cross-compile_opus_for_android/#5demo","text":"doc/trivial_example.c \u4f8b\u7a0b\u6bd4\u8f83\u7b80\u5355\uff0c\u9002\u5408\u5165\u95e8\u53c2\u8003","title":"5.\u53c2\u8003Demo"},{"location":"Android/android_ndk/ijkpalyer_for_rtsp_compile/","text":"Ubuntu\u7f16\u8bd1ijkplayer \u00b6 1.\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177 \u00b6 \u53c2\u8003\u94fe\u63a51 \u53c2\u8003\u94fe\u63a52 1 2 sudo apt install git sudo apt install yasm 2.\u5b89\u88c5Android NDK\u5de5\u5177\u94fe \u00b6 \u5efa\u8bae\u4f7f\u7528ijkplayer\u5b98\u65b9\u4f7f\u7528\u7684\u7248\u672c Android NDK, Revision 10e (May 2015) \u4e0b\u8f7d\u5b8c\u6210\u4e4b\u540e\u89e3\u538b\u5e76\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf 1 2 3 4 5 # add these lines to your ~/.bash_profile or ~/.profile export ANDROID_SDK = <your sdk path> export ANDROID_NDK = <your ndk path> export PATH = $ANDROID_SDK : $ANDROID_NDK : $PATH \u6dfb\u52a0\u4e4b\u540e\u6267\u884c source .profile \u7acb\u5373\u751f\u6548 \u6d4b\u8bd5Android NDK\u5de5\u5177\u94fe\u662f\u5426\u5b89\u88c5\u6210\u529f 1 ndk-build 3.\u4fee\u6539\u652f\u6301RTSP \u00b6 vim ijkplayer-android/config/module-lite.sh 1 2 3 export COMMON_FF_CFG_FLAGS = \"$COMMON_FF_CFG_FLAGS --enable-protocol=rtp\" // \u4fee\u6539 export COMMON_FF_CFG_FLAGS = \"$COMMON_FF_CFG_FLAGS --enable-protocol=tcp\" // \u6dfb\u52a0 export COMMON_FF_CFG_FLAGS = \"$COMMON_FF_CFG_FLAGS --enable-demuxer=rtsp\" // \u6dfb\u52a0 vim ijkplayer-android/ijkmedia/ijkplayer/ff_ffplay.c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 //\u4fee\u6539\u540e\u7684\u51fd\u6570 static int packet_queue_get_or_buffering ( FFPlayer * ffp , PacketQueue * q , AVPacket * pkt , int * serial , int * finished ) { while ( 1 ) { int new_packet = packet_queue_get ( q , pkt , 1 , serial ); if ( new_packet < 0 ) { new_packet = packet_queue_get ( q , pkt , 0 , serial ); if ( new_packet < 0 ) return - 1 ; } else if ( new_packet == 0 ) { if ( ! finished ) ffp_toggle_buffering ( ffp , 1 ); new_packet = packet_queue_get ( q , pkt , 1 , serial ); if ( new_packet < 0 ) return - 1 ; } if ( * finished == * serial ) { av_free_packet ( pkt ); continue ; } else break ; } return 1 ; } 4.\u7f16\u8bd1 \u00b6 \u7f16\u8bd1 1 2 3 4 5 6 7 cd ijkplayer-android/android/contrib ./compile-ffmpeg.sh clean ./compile-ffmpeg.sh all cd .. ./compile-ijk.sh all \u5c06ijkplayer\u9879\u76ee\u5bfc\u5165Android studio 1 2 3 # Android Studio: # Open an existing Android Studio project # Select android/ijkplayer/ and import 5.\u914d\u7f6eijkplayer\u76f8\u5e94\u53c2\u6570\uff0c\u89e3\u51b3\u5361\u987f\u3001\u5ef6\u8fdf \u00b6 \u53c2\u8003\u94fe\u63a5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 // \u652f\u6301\u786c\u89e3 1\uff1a\u5f00\u542f O:\u5173\u95ed ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"mediacodec-hevc\" , 1 ); // \u8bbe\u7f6e\u64ad\u653e\u524d\u7684\u63a2\u6d4b\u65f6\u95f4 1,\u8fbe\u5230\u9996\u5c4f\u79d2\u5f00\u6548\u679c ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"analyzeduration\" , 1 ); /** * \u64ad\u653e\u5ef6\u65f6\u7684\u89e3\u51b3\u65b9\u6848 */ // \u5982\u679c\u662frtsp\u534f\u8bae\uff0c\u53ef\u4ee5\u4f18\u5148\u7528tcp(\u9ed8\u8ba4\u662f\u7528udp) ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"rtsp_transport\" , \"tcp\" ); // \u8bbe\u7f6e\u64ad\u653e\u524d\u7684\u6700\u5927\u63a2\u6d4b\u65f6\u95f4 \uff08100\u672a\u6d4b\u8bd5\u662f\u5426\u662f\u6700\u4f73\u503c\uff09 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"analyzemaxduration\" , 100L ); // \u6bcf\u5904\u7406\u4e00\u4e2apacket\u4e4b\u540e\u5237\u65b0io\u4e0a\u4e0b\u6587 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"flush_packets\" , 1L ); // \u9700\u8981\u51c6\u5907\u597d\u540e\u81ea\u52a8\u64ad\u653e ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"start-on-prepared\" , 1 ); // \u4e0d\u989d\u5916\u4f18\u5316\uff08\u4f7f\u80fd\u975e\u89c4\u8303\u517c\u5bb9\u4f18\u5316\uff0c\u9ed8\u8ba4\u503c0 \uff09 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"fast\" , 1 ); // \u662f\u5426\u5f00\u542f\u9884\u7f13\u51b2\uff0c\u4e00\u822c\u76f4\u64ad\u9879\u76ee\u4f1a\u5f00\u542f\uff0c\u8fbe\u5230\u79d2\u5f00\u7684\u6548\u679c\uff0c\u4e0d\u8fc7\u5e26\u6765\u4e86\u64ad\u653e\u4e22\u5e27\u5361\u987f\u7684\u4f53\u9a8c ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"packet-buffering\" , 0 ); // \u81ea\u52a8\u65cb\u5c4f ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"mediacodec-auto-rotate\" , 0 ); // \u5904\u7406\u5206\u8fa8\u7387\u53d8\u5316 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"mediacodec-handle-resolution-change\" , 0 ); // \u6700\u5927\u7f13\u51b2\u5927\u5c0f,\u5355\u4f4dkb ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"max-buffer-size\" , 0 ); // \u9ed8\u8ba4\u6700\u5c0f\u5e27\u65702 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"min-frames\" , 2 ); // \u6700\u5927\u7f13\u5b58\u65f6\u957f ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"max_cached_duration\" , 3 ); //300 // \u662f\u5426\u9650\u5236\u8f93\u5165\u7f13\u5b58\u6570 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"infbuf\" , 1 ); // \u7f29\u77ed\u64ad\u653e\u7684rtmp\u89c6\u9891\u5ef6\u8fdf\u57281s\u5185 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"fflags\" , \"nobuffer\" ); // \u64ad\u653e\u524d\u7684\u63a2\u6d4bSize\uff0c\u9ed8\u8ba4\u662f1M, \u6539\u5c0f\u4e00\u70b9\u4f1a\u51fa\u753b\u9762\u66f4\u5feb ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"probesize\" , 200 ); //1024L) // \u64ad\u653e\u91cd\u8fde\u6b21\u6570 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"reconnect\" , 5 ); // TODO: ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"http-detect-range-support\" , 0 ); // \u8bbe\u7f6e\u662f\u5426\u5f00\u542f\u73af\u8def\u8fc7\u6ee4: 0\u5f00\u542f\uff0c\u753b\u9762\u8d28\u91cf\u9ad8\uff0c\u89e3\u7801\u5f00\u9500\u5927\uff0c48\u5173\u95ed\uff0c\u753b\u9762\u8d28\u91cf\u5dee\u70b9\uff0c\u89e3\u7801\u5f00\u9500\u5c0f ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_CODEC , \"skip_loop_filter\" , 48L ); // \u8df3\u8fc7\u5e27 \uff1f\uff1f ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_CODEC , \"skip_frame\" , 0 ); // \u89c6\u9891\u5e27\u5904\u7406\u4e0d\u8fc7\u6765\u7684\u65f6\u5019\u4e22\u5f03\u4e00\u4e9b\u5e27\u8fbe\u5230\u540c\u6b65\u7684\u6548\u679c ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"framedrop\" , 5 ); /* \u6682\u672a\u4f7f\u7528 // \u8d85\u65f6\u65f6\u95f4\uff0ctimeout\u53c2\u6570\u53ea\u5bf9http\u8bbe\u7f6e\u6709\u6548\uff0c\u82e5\u679c\u4f60\u7528rtmp\u8bbe\u7f6etimeout\uff0cijkplayer\u5185\u90e8\u4f1a\u5ffd\u7565timeout\u53c2\u6570\u3002rtmp\u7684timeout\u53c2\u6570\u542b\u4e49\u548chttp\u7684\u4e0d\u4e00\u6837\u3002 ijkMediaPlayer.setOption(IjkMediaPlayer.OPT_CATEGORY_FORMAT, \"timeout\", 10000000); // \u56e0\u4e3a\u9879\u76ee\u4e2d\u591a\u6b21\u8c03\u7528\u64ad\u653e\u5668\uff0c\u6709\u7f51\u7edc\u89c6\u9891\uff0cresp\uff0c\u672c\u5730\u89c6\u9891\uff0c\u8fd8\u6709wifi\u4e0ahttp\u89c6\u9891\uff0c\u6240\u4ee5\u5f97\u6e05\u7a7aDNS\u624d\u80fd\u64ad\u653eWIFI\u4e0a\u7684\u89c6\u9891 ijkMediaPlayer.setOption(IjkMediaPlayer.OPT_CATEGORY_FORMAT, \"dns_cache_clear\", 1); */","title":"\u4ea4\u53c9\u7f16\u8bd1ijkplayer"},{"location":"Android/android_ndk/ijkpalyer_for_rtsp_compile/#ubuntuijkplayer","text":"","title":"Ubuntu\u7f16\u8bd1ijkplayer"},{"location":"Android/android_ndk/ijkpalyer_for_rtsp_compile/#1","text":"\u53c2\u8003\u94fe\u63a51 \u53c2\u8003\u94fe\u63a52 1 2 sudo apt install git sudo apt install yasm","title":"1.\u5b89\u88c5\u4f9d\u8d56\u5de5\u5177"},{"location":"Android/android_ndk/ijkpalyer_for_rtsp_compile/#2android-ndk","text":"\u5efa\u8bae\u4f7f\u7528ijkplayer\u5b98\u65b9\u4f7f\u7528\u7684\u7248\u672c Android NDK, Revision 10e (May 2015) \u4e0b\u8f7d\u5b8c\u6210\u4e4b\u540e\u89e3\u538b\u5e76\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf 1 2 3 4 5 # add these lines to your ~/.bash_profile or ~/.profile export ANDROID_SDK = <your sdk path> export ANDROID_NDK = <your ndk path> export PATH = $ANDROID_SDK : $ANDROID_NDK : $PATH \u6dfb\u52a0\u4e4b\u540e\u6267\u884c source .profile \u7acb\u5373\u751f\u6548 \u6d4b\u8bd5Android NDK\u5de5\u5177\u94fe\u662f\u5426\u5b89\u88c5\u6210\u529f 1 ndk-build","title":"2.\u5b89\u88c5Android NDK\u5de5\u5177\u94fe"},{"location":"Android/android_ndk/ijkpalyer_for_rtsp_compile/#3rtsp","text":"vim ijkplayer-android/config/module-lite.sh 1 2 3 export COMMON_FF_CFG_FLAGS = \"$COMMON_FF_CFG_FLAGS --enable-protocol=rtp\" // \u4fee\u6539 export COMMON_FF_CFG_FLAGS = \"$COMMON_FF_CFG_FLAGS --enable-protocol=tcp\" // \u6dfb\u52a0 export COMMON_FF_CFG_FLAGS = \"$COMMON_FF_CFG_FLAGS --enable-demuxer=rtsp\" // \u6dfb\u52a0 vim ijkplayer-android/ijkmedia/ijkplayer/ff_ffplay.c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 //\u4fee\u6539\u540e\u7684\u51fd\u6570 static int packet_queue_get_or_buffering ( FFPlayer * ffp , PacketQueue * q , AVPacket * pkt , int * serial , int * finished ) { while ( 1 ) { int new_packet = packet_queue_get ( q , pkt , 1 , serial ); if ( new_packet < 0 ) { new_packet = packet_queue_get ( q , pkt , 0 , serial ); if ( new_packet < 0 ) return - 1 ; } else if ( new_packet == 0 ) { if ( ! finished ) ffp_toggle_buffering ( ffp , 1 ); new_packet = packet_queue_get ( q , pkt , 1 , serial ); if ( new_packet < 0 ) return - 1 ; } if ( * finished == * serial ) { av_free_packet ( pkt ); continue ; } else break ; } return 1 ; }","title":"3.\u4fee\u6539\u652f\u6301RTSP"},{"location":"Android/android_ndk/ijkpalyer_for_rtsp_compile/#4","text":"\u7f16\u8bd1 1 2 3 4 5 6 7 cd ijkplayer-android/android/contrib ./compile-ffmpeg.sh clean ./compile-ffmpeg.sh all cd .. ./compile-ijk.sh all \u5c06ijkplayer\u9879\u76ee\u5bfc\u5165Android studio 1 2 3 # Android Studio: # Open an existing Android Studio project # Select android/ijkplayer/ and import","title":"4.\u7f16\u8bd1"},{"location":"Android/android_ndk/ijkpalyer_for_rtsp_compile/#5ijkplayer","text":"\u53c2\u8003\u94fe\u63a5 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 // \u652f\u6301\u786c\u89e3 1\uff1a\u5f00\u542f O:\u5173\u95ed ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"mediacodec-hevc\" , 1 ); // \u8bbe\u7f6e\u64ad\u653e\u524d\u7684\u63a2\u6d4b\u65f6\u95f4 1,\u8fbe\u5230\u9996\u5c4f\u79d2\u5f00\u6548\u679c ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"analyzeduration\" , 1 ); /** * \u64ad\u653e\u5ef6\u65f6\u7684\u89e3\u51b3\u65b9\u6848 */ // \u5982\u679c\u662frtsp\u534f\u8bae\uff0c\u53ef\u4ee5\u4f18\u5148\u7528tcp(\u9ed8\u8ba4\u662f\u7528udp) ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"rtsp_transport\" , \"tcp\" ); // \u8bbe\u7f6e\u64ad\u653e\u524d\u7684\u6700\u5927\u63a2\u6d4b\u65f6\u95f4 \uff08100\u672a\u6d4b\u8bd5\u662f\u5426\u662f\u6700\u4f73\u503c\uff09 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"analyzemaxduration\" , 100L ); // \u6bcf\u5904\u7406\u4e00\u4e2apacket\u4e4b\u540e\u5237\u65b0io\u4e0a\u4e0b\u6587 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"flush_packets\" , 1L ); // \u9700\u8981\u51c6\u5907\u597d\u540e\u81ea\u52a8\u64ad\u653e ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"start-on-prepared\" , 1 ); // \u4e0d\u989d\u5916\u4f18\u5316\uff08\u4f7f\u80fd\u975e\u89c4\u8303\u517c\u5bb9\u4f18\u5316\uff0c\u9ed8\u8ba4\u503c0 \uff09 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"fast\" , 1 ); // \u662f\u5426\u5f00\u542f\u9884\u7f13\u51b2\uff0c\u4e00\u822c\u76f4\u64ad\u9879\u76ee\u4f1a\u5f00\u542f\uff0c\u8fbe\u5230\u79d2\u5f00\u7684\u6548\u679c\uff0c\u4e0d\u8fc7\u5e26\u6765\u4e86\u64ad\u653e\u4e22\u5e27\u5361\u987f\u7684\u4f53\u9a8c ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"packet-buffering\" , 0 ); // \u81ea\u52a8\u65cb\u5c4f ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"mediacodec-auto-rotate\" , 0 ); // \u5904\u7406\u5206\u8fa8\u7387\u53d8\u5316 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"mediacodec-handle-resolution-change\" , 0 ); // \u6700\u5927\u7f13\u51b2\u5927\u5c0f,\u5355\u4f4dkb ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"max-buffer-size\" , 0 ); // \u9ed8\u8ba4\u6700\u5c0f\u5e27\u65702 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"min-frames\" , 2 ); // \u6700\u5927\u7f13\u5b58\u65f6\u957f ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"max_cached_duration\" , 3 ); //300 // \u662f\u5426\u9650\u5236\u8f93\u5165\u7f13\u5b58\u6570 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"infbuf\" , 1 ); // \u7f29\u77ed\u64ad\u653e\u7684rtmp\u89c6\u9891\u5ef6\u8fdf\u57281s\u5185 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"fflags\" , \"nobuffer\" ); // \u64ad\u653e\u524d\u7684\u63a2\u6d4bSize\uff0c\u9ed8\u8ba4\u662f1M, \u6539\u5c0f\u4e00\u70b9\u4f1a\u51fa\u753b\u9762\u66f4\u5feb ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"probesize\" , 200 ); //1024L) // \u64ad\u653e\u91cd\u8fde\u6b21\u6570 ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"reconnect\" , 5 ); // TODO: ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_FORMAT , \"http-detect-range-support\" , 0 ); // \u8bbe\u7f6e\u662f\u5426\u5f00\u542f\u73af\u8def\u8fc7\u6ee4: 0\u5f00\u542f\uff0c\u753b\u9762\u8d28\u91cf\u9ad8\uff0c\u89e3\u7801\u5f00\u9500\u5927\uff0c48\u5173\u95ed\uff0c\u753b\u9762\u8d28\u91cf\u5dee\u70b9\uff0c\u89e3\u7801\u5f00\u9500\u5c0f ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_CODEC , \"skip_loop_filter\" , 48L ); // \u8df3\u8fc7\u5e27 \uff1f\uff1f ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_CODEC , \"skip_frame\" , 0 ); // \u89c6\u9891\u5e27\u5904\u7406\u4e0d\u8fc7\u6765\u7684\u65f6\u5019\u4e22\u5f03\u4e00\u4e9b\u5e27\u8fbe\u5230\u540c\u6b65\u7684\u6548\u679c ijkMediaPlayer . setOption ( IjkMediaPlayer . OPT_CATEGORY_PLAYER , \"framedrop\" , 5 ); /* \u6682\u672a\u4f7f\u7528 // \u8d85\u65f6\u65f6\u95f4\uff0ctimeout\u53c2\u6570\u53ea\u5bf9http\u8bbe\u7f6e\u6709\u6548\uff0c\u82e5\u679c\u4f60\u7528rtmp\u8bbe\u7f6etimeout\uff0cijkplayer\u5185\u90e8\u4f1a\u5ffd\u7565timeout\u53c2\u6570\u3002rtmp\u7684timeout\u53c2\u6570\u542b\u4e49\u548chttp\u7684\u4e0d\u4e00\u6837\u3002 ijkMediaPlayer.setOption(IjkMediaPlayer.OPT_CATEGORY_FORMAT, \"timeout\", 10000000); // \u56e0\u4e3a\u9879\u76ee\u4e2d\u591a\u6b21\u8c03\u7528\u64ad\u653e\u5668\uff0c\u6709\u7f51\u7edc\u89c6\u9891\uff0cresp\uff0c\u672c\u5730\u89c6\u9891\uff0c\u8fd8\u6709wifi\u4e0ahttp\u89c6\u9891\uff0c\u6240\u4ee5\u5f97\u6e05\u7a7aDNS\u624d\u80fd\u64ad\u653eWIFI\u4e0a\u7684\u89c6\u9891 ijkMediaPlayer.setOption(IjkMediaPlayer.OPT_CATEGORY_FORMAT, \"dns_cache_clear\", 1); */","title":"5.\u914d\u7f6eijkplayer\u76f8\u5e94\u53c2\u6570\uff0c\u89e3\u51b3\u5361\u987f\u3001\u5ef6\u8fdf"},{"location":"Android/android_screen_adapter/android_screen_adapter/","text":"Android\u5c4f\u5e55\u9002\u914d(\u5f85\u5b8c\u5584) \u00b6 \u4e00\u3001\u76f8\u5173\u672f\u8bed\u89e3\u91ca \u00b6 1.1. \u5c4f\u5e55\u7269\u7406\u5c3a\u5bf8(inch) \u00b6 1.2. \u5c4f\u5e55\u5206\u8fa8\u7387(px) \u00b6 1.3. \u5c4f\u5e55\u50cf\u7d20\u5bc6\u5ea6\uff08DPI\uff09 \u00b6 1.4. dp(dip) \u00b6 As dp is a physical unit it has an absolute value which can be measured in traditional units, e.g. for Android devices 1 dp equals 1/160 of inch or 0.15875 mm. \u5c4f\u5e55\u7269\u7406\u5c3a\u5bf8\u4e00\u6837\uff0c\u5206\u8fa8\u7387\u4e0d\u4e00\u6837\u65f6\uff0c\u597d\u7528 \u5c4f\u5e55\u7269\u7406\u5c3a\u5bf8\u4e0d\u540c\u65f6\uff0cdp\u5c31\u4e0d\u597d\u7528\u4e86 1.5. \u624b\u673a\u622a\u56fe\u56fe\u7247\u7684\u5c3a\u5bf8\u4e3a\u4ec0\u4e48\u548c\u624b\u673a\u7684\u7269\u7406\u5c3a\u5bf8\u4e0d\u540c\uff1f \u00b6 \u663e\u793a\u5668\u663e\u793a\u56fe\u7247\u662f\u6309\u7167\u56fe\u7247\u7684\u50cf\u7d20\u5c3a\u5bf8\u663e\u793a\u7684 1.6. \u00b6 Density qualifier Description ldpi Resources for low-density (ldpi) screens (~120dpi). mdpi Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline density.) hdpi Resources for high-density (hdpi) screens (~240dpi). xhdpi Resources for extra-high-density (xhdpi) screens (~320dpi). xxhdpi Resources for extra-extra-high-density (xxhdpi) screens (~480dpi). xxxhdpi Resources for extra-extra-extra-high-density (xxxhdpi) uses (~640dpi). nodpi Resources for all densities. These are density-independent resources. The system does not scale resources tagged with this qualifier, regardless of the current screen's density. tvdpi Resources for screens somewhere between mdpi and hdpi; approximately 213dpi. This is not considered a \"primary\" density group. It is mostly intended for televisions and most apps shouldn't need it\u2014providing mdpi and hdpi resources is sufficient for most apps and the system will scale them as appropriate. If you find it necessary to provide tvdpi resources, you should size them at a factor of 1.33*mdpi. For example, a 100px x 100px image for mdpi screens should be 133px x 133px for tvdpi. Here's how other smallest width values correspond to typical screen sizes: Size Description 320dp a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc). 480dp a large phone screen ~5\" (480x800 mdpi). 600dp a 7\u201d tablet (600x1024 mdpi). 720dp a 10\u201d tablet (720x1280 mdpi, 800x1280 mdpi, etc). 1.7. \u00b6 \u9002\u914d\u4e0d\u540c\u50cf\u7d20\u5bc6\u5ea6\u4f46\u7269\u7406\u5c3a\u5bf8\u76f8\u540c\u7684\u5c4f\u5e55\u7528dp \u9002\u914d\u4e0d\u540c\u7269\u7406\u5c3a\u5bf8\u7684\u5c4f\u5e55\u7528\u201c\u5907\u7528\u5e03\u5c40\u6587\u4ef6\u201d\uff0c\u201c\u7ea6\u675f\u5e03\u5c40\u201d\uff0c\u201c.9\u56fe\u201d 1.8. App ICON \u00b6 \u4f7f\u7528 Image Asset \u5728Android8.0\u53ca\u4ee5\u4e0a\u4f7f\u7528minmap-anydpi-v26\u4e2d\u7684\u56fe\u6807\uff0c\u8fd9\u91cc\u9762\u662f\u77e2\u91cf\u56fe\uff0c\u80fd\u591f\u81ea\u9002\u5e94\u5927\u591a\u6570\u5c4f\u5e55\uff1bAndroid 8.0\u4ee5\u4e0b\u7684\u7cfb\u7edf\uff0c\u4f9d\u65e7\u4f7f\u7528minmap-xdpi\u6587\u4ef6\u5939\u4e2d\u7684\u8d44\u6e90 \u5728Android7.0\u53ca\u4ee5\u4e0a\u4f7f\u7528drawable-anydpi-v24\u4e2d\u7684\u8d44\u6e90\uff1bAndroid7.0\u4ee5\u4e0b\u7684\u7cfb\u7edf\u4f7f\u7528drawable-xdpi\u6587\u4ef6\u5939\u4e2d\u7684\u8d44\u6e90","title":"Android \u5c4f\u5e55\u9002\u914d"},{"location":"Android/android_screen_adapter/android_screen_adapter/#android","text":"","title":"Android\u5c4f\u5e55\u9002\u914d(\u5f85\u5b8c\u5584)"},{"location":"Android/android_screen_adapter/android_screen_adapter/#_1","text":"","title":"\u4e00\u3001\u76f8\u5173\u672f\u8bed\u89e3\u91ca"},{"location":"Android/android_screen_adapter/android_screen_adapter/#11-inch","text":"","title":"1.1. \u5c4f\u5e55\u7269\u7406\u5c3a\u5bf8(inch)"},{"location":"Android/android_screen_adapter/android_screen_adapter/#12-px","text":"","title":"1.2. \u5c4f\u5e55\u5206\u8fa8\u7387(px)"},{"location":"Android/android_screen_adapter/android_screen_adapter/#13-dpi","text":"","title":"1.3. \u5c4f\u5e55\u50cf\u7d20\u5bc6\u5ea6\uff08DPI\uff09"},{"location":"Android/android_screen_adapter/android_screen_adapter/#14-dpdip","text":"As dp is a physical unit it has an absolute value which can be measured in traditional units, e.g. for Android devices 1 dp equals 1/160 of inch or 0.15875 mm. \u5c4f\u5e55\u7269\u7406\u5c3a\u5bf8\u4e00\u6837\uff0c\u5206\u8fa8\u7387\u4e0d\u4e00\u6837\u65f6\uff0c\u597d\u7528 \u5c4f\u5e55\u7269\u7406\u5c3a\u5bf8\u4e0d\u540c\u65f6\uff0cdp\u5c31\u4e0d\u597d\u7528\u4e86","title":"1.4. dp(dip)"},{"location":"Android/android_screen_adapter/android_screen_adapter/#15","text":"\u663e\u793a\u5668\u663e\u793a\u56fe\u7247\u662f\u6309\u7167\u56fe\u7247\u7684\u50cf\u7d20\u5c3a\u5bf8\u663e\u793a\u7684","title":"1.5. \u624b\u673a\u622a\u56fe\u56fe\u7247\u7684\u5c3a\u5bf8\u4e3a\u4ec0\u4e48\u548c\u624b\u673a\u7684\u7269\u7406\u5c3a\u5bf8\u4e0d\u540c\uff1f"},{"location":"Android/android_screen_adapter/android_screen_adapter/#16","text":"Density qualifier Description ldpi Resources for low-density (ldpi) screens (~120dpi). mdpi Resources for medium-density (mdpi) screens (~160dpi). (This is the baseline density.) hdpi Resources for high-density (hdpi) screens (~240dpi). xhdpi Resources for extra-high-density (xhdpi) screens (~320dpi). xxhdpi Resources for extra-extra-high-density (xxhdpi) screens (~480dpi). xxxhdpi Resources for extra-extra-extra-high-density (xxxhdpi) uses (~640dpi). nodpi Resources for all densities. These are density-independent resources. The system does not scale resources tagged with this qualifier, regardless of the current screen's density. tvdpi Resources for screens somewhere between mdpi and hdpi; approximately 213dpi. This is not considered a \"primary\" density group. It is mostly intended for televisions and most apps shouldn't need it\u2014providing mdpi and hdpi resources is sufficient for most apps and the system will scale them as appropriate. If you find it necessary to provide tvdpi resources, you should size them at a factor of 1.33*mdpi. For example, a 100px x 100px image for mdpi screens should be 133px x 133px for tvdpi. Here's how other smallest width values correspond to typical screen sizes: Size Description 320dp a typical phone screen (240x320 ldpi, 320x480 mdpi, 480x800 hdpi, etc). 480dp a large phone screen ~5\" (480x800 mdpi). 600dp a 7\u201d tablet (600x1024 mdpi). 720dp a 10\u201d tablet (720x1280 mdpi, 800x1280 mdpi, etc).","title":"1.6."},{"location":"Android/android_screen_adapter/android_screen_adapter/#17","text":"\u9002\u914d\u4e0d\u540c\u50cf\u7d20\u5bc6\u5ea6\u4f46\u7269\u7406\u5c3a\u5bf8\u76f8\u540c\u7684\u5c4f\u5e55\u7528dp \u9002\u914d\u4e0d\u540c\u7269\u7406\u5c3a\u5bf8\u7684\u5c4f\u5e55\u7528\u201c\u5907\u7528\u5e03\u5c40\u6587\u4ef6\u201d\uff0c\u201c\u7ea6\u675f\u5e03\u5c40\u201d\uff0c\u201c.9\u56fe\u201d","title":"1.7."},{"location":"Android/android_screen_adapter/android_screen_adapter/#18-app-icon","text":"\u4f7f\u7528 Image Asset \u5728Android8.0\u53ca\u4ee5\u4e0a\u4f7f\u7528minmap-anydpi-v26\u4e2d\u7684\u56fe\u6807\uff0c\u8fd9\u91cc\u9762\u662f\u77e2\u91cf\u56fe\uff0c\u80fd\u591f\u81ea\u9002\u5e94\u5927\u591a\u6570\u5c4f\u5e55\uff1bAndroid 8.0\u4ee5\u4e0b\u7684\u7cfb\u7edf\uff0c\u4f9d\u65e7\u4f7f\u7528minmap-xdpi\u6587\u4ef6\u5939\u4e2d\u7684\u8d44\u6e90 \u5728Android7.0\u53ca\u4ee5\u4e0a\u4f7f\u7528drawable-anydpi-v24\u4e2d\u7684\u8d44\u6e90\uff1bAndroid7.0\u4ee5\u4e0b\u7684\u7cfb\u7edf\u4f7f\u7528drawable-xdpi\u6587\u4ef6\u5939\u4e2d\u7684\u8d44\u6e90","title":"1.8. App ICON"},{"location":"Android/android_source_code/android_broadcast_boot/","text":"Android App\u5f00\u673a\u81ea\u542f\u4e4b\u76d1\u542c\u5f00\u673a\u5e7f\u64ad \u00b6 1.1. \u521b\u5efa\u5e7f\u64ad\u63a5\u6536\u5668 1 2 3 4 5 6 7 8 9 10 11 public class BootBroadcastReceive extends BroadcastReceiver { public static final String action_boot = \"android.intent.action.BOOT_COMPLETED\" ; @Override public void onReceive ( Context context , Intent intent ) { if ( intent . getAction (). equals ( action_boot )){ Intent bootIntent = new Intent ( context , MainActivity . class ); bootIntent . addFlags ( Intent . FLAG_ACTIVITY_NEW_TASK ); context . startActivity ( bootIntent ); } } } 1.2. \u5728AndroidManifest.xml\u6587\u4ef6\u4e2d\u6ce8\u518c\u5e7f\u64ad\u63a5\u6536\u5668 1 2 3 4 5 6 7 8 9 10 < receiver android:name = \".BootBroadcastReceive\" android:enabled = \"true\" android:exported = \"true\" android:permission = \"android.permission.RECEIVE_BOOT_COMPLETED\" > < intent-filter > < action android:name = \"android.intent.action.BOOT_COMPLETED\" /> < category android:name = \"android.intent.category.HOME\" /> </ intent-filter > </ receiver >","title":"\u5f00\u673a\u5e7f\u64ad"},{"location":"Android/android_source_code/android_broadcast_boot/#android-app","text":"1.1. \u521b\u5efa\u5e7f\u64ad\u63a5\u6536\u5668 1 2 3 4 5 6 7 8 9 10 11 public class BootBroadcastReceive extends BroadcastReceiver { public static final String action_boot = \"android.intent.action.BOOT_COMPLETED\" ; @Override public void onReceive ( Context context , Intent intent ) { if ( intent . getAction (). equals ( action_boot )){ Intent bootIntent = new Intent ( context , MainActivity . class ); bootIntent . addFlags ( Intent . FLAG_ACTIVITY_NEW_TASK ); context . startActivity ( bootIntent ); } } } 1.2. \u5728AndroidManifest.xml\u6587\u4ef6\u4e2d\u6ce8\u518c\u5e7f\u64ad\u63a5\u6536\u5668 1 2 3 4 5 6 7 8 9 10 < receiver android:name = \".BootBroadcastReceive\" android:enabled = \"true\" android:exported = \"true\" android:permission = \"android.permission.RECEIVE_BOOT_COMPLETED\" > < intent-filter > < action android:name = \"android.intent.action.BOOT_COMPLETED\" /> < category android:name = \"android.intent.category.HOME\" /> </ intent-filter > </ receiver >","title":"Android App\u5f00\u673a\u81ea\u542f\u4e4b\u76d1\u542c\u5f00\u673a\u5e7f\u64ad"},{"location":"Android/android_source_code/android_enable_usb_debug/","text":"\u4f7fAndroid\u7cfb\u7edf\u9ed8\u8ba4\u5f00\u542fUSB\u8c03\u8bd5\u529f\u80fd \u00b6 1.1. \u9ed8\u8ba4\u663e\u793a \u201c\u5f00\u53d1\u8005\u9009\u9879\u201d \u5728packages/apps/Settings/src/com/android/settings/SettingsActivity.java\u6587\u4ef6\u7684updateTilesList(...)\u51fd\u6570\u4e2d\u505a\u5982\u4e0b\u4fee\u6539\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 private void updateTilesList ( List < DashboardCategory > target ) { /* added by fhc 2017-11-24 */ SharedPreferences . Editor editor = mDevelopmentPreferences . edit (); editor . putBoolean ( DevelopmentSettings . PREF_SHOW , true ); editor . commit (); /* added by fhc 2017-11-24 end */ final boolean showDev = mDevelopmentPreferences . getBoolean ( DevelopmentSettings . PREF_SHOW , android . os . Build . TYPE . equals ( \"eng\" )); final UserManager um = ( UserManager ) getSystemService ( Context . USER_SERVICE ); ... \uff08 \u6b64\u5904\u7701\u7565N\u884c\u4ee3\u7801 \uff09 } 1.2. \u9ed8\u8ba4\u5141\u8bb8 \u201c\u5b89\u88c5\u672a\u77e5\u6765\u6e90\u5e94\u7528\u201d \u5c06frameworks/base/packages/SettingsProvider/res/values/defaults.xml\u6587\u4ef6\u4e2ddef_install_non_market_apps\u7684\u503c\u7f6e\u4e3atrue\uff0c\u5373\u53ef\u5141\u8bb8 \u201c\u5b89\u88c5\u672a\u77e5\u6765\u6e90\u5e94\u7528\u201d\u3002 1 < bool name = \"def_install_non_market_apps\" > true </ bool > 1.3. \u9ed8\u8ba4\u5141\u8bb8USB\u8c03\u8bd5 \u5bf9frameworks/base/services/usb/java/com/android/server/usb/UsbDeviceManager.java\u7684\u51fd\u6570systemReady()\u505a\u5982\u4e0b\u4fee\u6539\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 public void systemReady () { if ( DEBUG ) Slog . d ( TAG , \"systemReady\" ); mNotificationManager = ( NotificationManager ) mContext . getSystemService ( Context . NOTIFICATION_SERVICE ); // We do not show the USB notification if the primary volume supports mass storage. // The legacy mass storage UI will be used instead. boolean massStorageSupported = false ; final StorageManager storageManager = StorageManager . from ( mContext ); final StorageVolume primary = storageManager . getPrimaryVolume (); massStorageSupported = primary != null && primary . allowMassStorage (); mUseUsbNotification = ! massStorageSupported && mContext . getResources (). getBoolean ( com . android . internal . R . bool . config_usbChargingMessage ); // make sure the ADB_ENABLED setting value matches the current state try { /* modified by fhc 2017-11-28 */ /*Settings.Global.putInt(mContentResolver, Settings.Global.ADB_ENABLED, mAdbEnabled ? 1 : 0);*/ Settings . Global . putInt ( mContentResolver , Settings . Global . ADB_ENABLED , 1 ); /* modified by fhc 2017-11-28 */ } catch ( SecurityException e ) { // If UserManager.DISALLOW_DEBUGGING_FEATURES is on, that this setting can't be changed. Slog . d ( TAG , \"ADB_ENABLED is restricted.\" ); } mHandler . sendEmptyMessage ( MSG_SYSTEM_READY ); } 1.4. \u53bb\u6389USB\u63d2\u5165\u65f6\u7684\u6388\u6743\u63d0\u793a\u5bf9\u8bdd\u6846 \u5bf9frameworks/base/packages/SystemUI/src/com/android/systemui/usb/UsbDebuggingActivity.java\u7684onReceive()\u51fd\u6570\u4e2d\u505a\u5982\u4e0b\u4fee\u6539\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 @Override public void onReceive ( Context content , Intent intent ) { String action = intent . getAction (); if (! UsbManager . ACTION_USB_STATE . equals ( action )) { return ; } /* modified by fhc 2017-11-24 */ /*boolean connected = intent.getBooleanExtra(UsbManager.USB_CONNECTED, false); if (!connected) { mActivity.finish(); }*/ /* modified by fhc 2017-11-24 end */ /* added by fhc 2017-11-24 */ boolean connected = false ; //\u7ed9connect\u8d4b\u503c\uff0c\u5173\u6389UI if (! connected ) { mActivity . finish (); } try { IBinder b = ServiceManager . getService ( USB_SERVICE ); IUsbManager service = IUsbManager . Stub . asInterface ( b ); service . allowUsbDebugging ( true , mKey ); } catch ( Exception e ) { Log . e ( TAG , \"Unable to notify Usb service\" , e ); } /* added by fhc 2017-11-24 end */ }","title":"\u9ed8\u8ba4\u5f00\u542fUSB\u8c03\u8bd5\u529f\u80fd"},{"location":"Android/android_source_code/android_enable_usb_debug/#androidusb","text":"1.1. \u9ed8\u8ba4\u663e\u793a \u201c\u5f00\u53d1\u8005\u9009\u9879\u201d \u5728packages/apps/Settings/src/com/android/settings/SettingsActivity.java\u6587\u4ef6\u7684updateTilesList(...)\u51fd\u6570\u4e2d\u505a\u5982\u4e0b\u4fee\u6539\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 private void updateTilesList ( List < DashboardCategory > target ) { /* added by fhc 2017-11-24 */ SharedPreferences . Editor editor = mDevelopmentPreferences . edit (); editor . putBoolean ( DevelopmentSettings . PREF_SHOW , true ); editor . commit (); /* added by fhc 2017-11-24 end */ final boolean showDev = mDevelopmentPreferences . getBoolean ( DevelopmentSettings . PREF_SHOW , android . os . Build . TYPE . equals ( \"eng\" )); final UserManager um = ( UserManager ) getSystemService ( Context . USER_SERVICE ); ... \uff08 \u6b64\u5904\u7701\u7565N\u884c\u4ee3\u7801 \uff09 } 1.2. \u9ed8\u8ba4\u5141\u8bb8 \u201c\u5b89\u88c5\u672a\u77e5\u6765\u6e90\u5e94\u7528\u201d \u5c06frameworks/base/packages/SettingsProvider/res/values/defaults.xml\u6587\u4ef6\u4e2ddef_install_non_market_apps\u7684\u503c\u7f6e\u4e3atrue\uff0c\u5373\u53ef\u5141\u8bb8 \u201c\u5b89\u88c5\u672a\u77e5\u6765\u6e90\u5e94\u7528\u201d\u3002 1 < bool name = \"def_install_non_market_apps\" > true </ bool > 1.3. \u9ed8\u8ba4\u5141\u8bb8USB\u8c03\u8bd5 \u5bf9frameworks/base/services/usb/java/com/android/server/usb/UsbDeviceManager.java\u7684\u51fd\u6570systemReady()\u505a\u5982\u4e0b\u4fee\u6539\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 public void systemReady () { if ( DEBUG ) Slog . d ( TAG , \"systemReady\" ); mNotificationManager = ( NotificationManager ) mContext . getSystemService ( Context . NOTIFICATION_SERVICE ); // We do not show the USB notification if the primary volume supports mass storage. // The legacy mass storage UI will be used instead. boolean massStorageSupported = false ; final StorageManager storageManager = StorageManager . from ( mContext ); final StorageVolume primary = storageManager . getPrimaryVolume (); massStorageSupported = primary != null && primary . allowMassStorage (); mUseUsbNotification = ! massStorageSupported && mContext . getResources (). getBoolean ( com . android . internal . R . bool . config_usbChargingMessage ); // make sure the ADB_ENABLED setting value matches the current state try { /* modified by fhc 2017-11-28 */ /*Settings.Global.putInt(mContentResolver, Settings.Global.ADB_ENABLED, mAdbEnabled ? 1 : 0);*/ Settings . Global . putInt ( mContentResolver , Settings . Global . ADB_ENABLED , 1 ); /* modified by fhc 2017-11-28 */ } catch ( SecurityException e ) { // If UserManager.DISALLOW_DEBUGGING_FEATURES is on, that this setting can't be changed. Slog . d ( TAG , \"ADB_ENABLED is restricted.\" ); } mHandler . sendEmptyMessage ( MSG_SYSTEM_READY ); } 1.4. \u53bb\u6389USB\u63d2\u5165\u65f6\u7684\u6388\u6743\u63d0\u793a\u5bf9\u8bdd\u6846 \u5bf9frameworks/base/packages/SystemUI/src/com/android/systemui/usb/UsbDebuggingActivity.java\u7684onReceive()\u51fd\u6570\u4e2d\u505a\u5982\u4e0b\u4fee\u6539\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 @Override public void onReceive ( Context content , Intent intent ) { String action = intent . getAction (); if (! UsbManager . ACTION_USB_STATE . equals ( action )) { return ; } /* modified by fhc 2017-11-24 */ /*boolean connected = intent.getBooleanExtra(UsbManager.USB_CONNECTED, false); if (!connected) { mActivity.finish(); }*/ /* modified by fhc 2017-11-24 end */ /* added by fhc 2017-11-24 */ boolean connected = false ; //\u7ed9connect\u8d4b\u503c\uff0c\u5173\u6389UI if (! connected ) { mActivity . finish (); } try { IBinder b = ServiceManager . getService ( USB_SERVICE ); IUsbManager service = IUsbManager . Stub . asInterface ( b ); service . allowUsbDebugging ( true , mKey ); } catch ( Exception e ) { Log . e ( TAG , \"Unable to notify Usb service\" , e ); } /* added by fhc 2017-11-24 end */ }","title":"\u4f7fAndroid\u7cfb\u7edf\u9ed8\u8ba4\u5f00\u542fUSB\u8c03\u8bd5\u529f\u80fd"},{"location":"Android/android_source_code/android_hide_virtual_navigation_key/","text":"\u5f7b\u5e95\u9690\u85cf\u865a\u62df\u5bfc\u822a\u952e \u00b6 1.1. \u53bb\u6389\u865a\u62df\u5bfc\u822a\u952e \u627e\u5230frameworks/base/services/core/java/com/android/server/policy/PhoneWindowManager.java\u4e2d\u51fd\u6570setInitialDisplaySize(...)\u4e2d\u7684\u4ee3\u7801\u7247\u6bb5 1 2 3 4 5 6 String navBarOverride = SystemProperties . get ( \"qemu.hw.mainkeys\" ); if ( \"1\" . equals ( navBarOverride )) { mHasNavigationBar = false ; } else if ( \"0\" . equals ( navBarOverride )) { mHasNavigationBar = true ; } \u4fee\u6539\u4e3a 1 2 3 4 5 6 7 8 String navBarOverride = SystemProperties . get ( \"qemu.hw.mainkeys\" ); /* modified by fhc 2017-11-24 */ //if (\"1\".equals(navBarOverride)) { mHasNavigationBar = false ; //} else if (\"0\".equals(navBarOverride)) { // mHasNavigationBar = true; //} /* modified by fhc 2017-11-24 end */ 1.2. \u53bb\u6389\u7cfb\u7edf\u9876\u90e8\u7684\u72b6\u6001\u680f\u548c\u901a\u77e5\u680f \u5c4f\u853d\u624b\u52bf\u76d1\u542c frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBarView.java \u4fee\u6539\u4ee3\u7801\u7247\u6bb5\uff0c\u5982\u4e0b\u6240\u793a\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 @Override public boolean onTouchEvent ( MotionEvent event ) { /* modified by fhc 2017-11-24 */ /*boolean barConsumedEvent = mBar.interceptTouchEvent(event); if (DEBUG_GESTURES) { if (event.getActionMasked() != MotionEvent.ACTION_MOVE) { EventLog.writeEvent(EventLogTags.SYSUI_PANELBAR_TOUCH, event.getActionMasked(), (int) event.getX(), (int) event.getY(), barConsumedEvent ? 1 : 0); } } return barConsumedEvent || super.onTouchEvent(event);*/ return false ; /* modified by fhc 2017-11-24 end */ } ... \uff08 \u6b64\u5904\u7701\u7565N\u884c\u4ee3\u7801 \uff09 @Override public boolean onInterceptTouchEvent ( MotionEvent event ) { /* modified by fhc 2017-11-24 */ //return mBar.interceptTouchEvent(event) || super.onInterceptTouchEvent(event); return false ; /* modified by fhc 2017-11-24 end */ } \u4e0d\u663e\u793a\u72b6\u6001\u680f frameworks/base/core/res/res/values/dimens.xml \u5c06\u72b6\u6001\u680f\u9ad8\u5ea6\u4fee\u6539\u4e3a0dp\uff0c\u5982\u4e0b\u6240\u793a\uff1a 1 2 <!-- Height of the status bar --> < dimen name = \"status_bar_height\" > 0dp </ dimen > \u6b64\u65f6\u7cfb\u7edf\u4e0a\u65b9\u7684\u72b6\u6001\u4e0d\u663e\u793a\uff0c\u4f46\u662f\u9700\u8981\u5c06\u5176\u5e03\u5c40\u4e5f\u7f6e\u4e3agone\uff0c\u4e0d\u5360\u5730\u65b9 \u5728frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBar.java\u6587\u4ef6\u4e2d\u4fee\u6539\u4e00\u4e0b\u5185\u5bb9\uff0c\u5c06\u5e03\u5c40\u7f6e\u4e3aGONE","title":"\u5f7b\u5e95\u9690\u85cf\u865a\u62df\u5bfc\u822a\u952e"},{"location":"Android/android_source_code/android_hide_virtual_navigation_key/#_1","text":"1.1. \u53bb\u6389\u865a\u62df\u5bfc\u822a\u952e \u627e\u5230frameworks/base/services/core/java/com/android/server/policy/PhoneWindowManager.java\u4e2d\u51fd\u6570setInitialDisplaySize(...)\u4e2d\u7684\u4ee3\u7801\u7247\u6bb5 1 2 3 4 5 6 String navBarOverride = SystemProperties . get ( \"qemu.hw.mainkeys\" ); if ( \"1\" . equals ( navBarOverride )) { mHasNavigationBar = false ; } else if ( \"0\" . equals ( navBarOverride )) { mHasNavigationBar = true ; } \u4fee\u6539\u4e3a 1 2 3 4 5 6 7 8 String navBarOverride = SystemProperties . get ( \"qemu.hw.mainkeys\" ); /* modified by fhc 2017-11-24 */ //if (\"1\".equals(navBarOverride)) { mHasNavigationBar = false ; //} else if (\"0\".equals(navBarOverride)) { // mHasNavigationBar = true; //} /* modified by fhc 2017-11-24 end */ 1.2. \u53bb\u6389\u7cfb\u7edf\u9876\u90e8\u7684\u72b6\u6001\u680f\u548c\u901a\u77e5\u680f \u5c4f\u853d\u624b\u52bf\u76d1\u542c frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBarView.java \u4fee\u6539\u4ee3\u7801\u7247\u6bb5\uff0c\u5982\u4e0b\u6240\u793a\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 @Override public boolean onTouchEvent ( MotionEvent event ) { /* modified by fhc 2017-11-24 */ /*boolean barConsumedEvent = mBar.interceptTouchEvent(event); if (DEBUG_GESTURES) { if (event.getActionMasked() != MotionEvent.ACTION_MOVE) { EventLog.writeEvent(EventLogTags.SYSUI_PANELBAR_TOUCH, event.getActionMasked(), (int) event.getX(), (int) event.getY(), barConsumedEvent ? 1 : 0); } } return barConsumedEvent || super.onTouchEvent(event);*/ return false ; /* modified by fhc 2017-11-24 end */ } ... \uff08 \u6b64\u5904\u7701\u7565N\u884c\u4ee3\u7801 \uff09 @Override public boolean onInterceptTouchEvent ( MotionEvent event ) { /* modified by fhc 2017-11-24 */ //return mBar.interceptTouchEvent(event) || super.onInterceptTouchEvent(event); return false ; /* modified by fhc 2017-11-24 end */ } \u4e0d\u663e\u793a\u72b6\u6001\u680f frameworks/base/core/res/res/values/dimens.xml \u5c06\u72b6\u6001\u680f\u9ad8\u5ea6\u4fee\u6539\u4e3a0dp\uff0c\u5982\u4e0b\u6240\u793a\uff1a 1 2 <!-- Height of the status bar --> < dimen name = \"status_bar_height\" > 0dp </ dimen > \u6b64\u65f6\u7cfb\u7edf\u4e0a\u65b9\u7684\u72b6\u6001\u4e0d\u663e\u793a\uff0c\u4f46\u662f\u9700\u8981\u5c06\u5176\u5e03\u5c40\u4e5f\u7f6e\u4e3agone\uff0c\u4e0d\u5360\u5730\u65b9 \u5728frameworks/base/packages/SystemUI/src/com/android/systemui/statusbar/phone/PhoneStatusBar.java\u6587\u4ef6\u4e2d\u4fee\u6539\u4e00\u4e0b\u5185\u5bb9\uff0c\u5c06\u5e03\u5c40\u7f6e\u4e3aGONE","title":"\u5f7b\u5e95\u9690\u85cf\u865a\u62df\u5bfc\u822a\u952e"},{"location":"Android/android_source_code/android_launcher/","text":"Android App\u5f00\u673a\u81ea\u542f\u4e4bLauncher \u00b6 1.1. \u5728AndroidManifest.xml\u6587\u4ef6\u4e2d\u52a0\u5165\u4ee5\u4e0b\u8bed\u53e5\uff0c\u4f7fApp\u6210\u4e3aLauncher 1 2 < category android:name = \"android.intent.category.HOME\" /> < category android:name = \"android.intent.category.DEFAULT\" /> 1.2. \u5c06\u7cfb\u7edf\u9ed8\u8ba4Launcher\u5220\u9664 1.3. \u5c06App\uff08.apk\u6587\u4ef6\uff09\u653e\u8fdb/system/app\u76ee\u5f55 1.4. \u5c06App\u6240\u4f7f\u7528\u7684.so\u6587\u4ef6\u5168\u90e8\u653e\u8fdb/system/lib\u76ee\u5f55 Note \u201c/system/app\u201d \u76ee\u5f55\u4e0b\u7684\u5e94\u7528\u90fd\u662f\u7cfb\u7edf\u5df2\u7ecf\u9884\u88c5\u5b8c\u6210\u7684\u4e0d\u4f1a\u518d\u6b21\u5b89\u88c5\uff0c\u6240\u4ee5\u4e0d\u80fd\u628aso\u6253\u5305\u5230apk\u91cc\u9762","title":"Launcher"},{"location":"Android/android_source_code/android_launcher/#android-applauncher","text":"1.1. \u5728AndroidManifest.xml\u6587\u4ef6\u4e2d\u52a0\u5165\u4ee5\u4e0b\u8bed\u53e5\uff0c\u4f7fApp\u6210\u4e3aLauncher 1 2 < category android:name = \"android.intent.category.HOME\" /> < category android:name = \"android.intent.category.DEFAULT\" /> 1.2. \u5c06\u7cfb\u7edf\u9ed8\u8ba4Launcher\u5220\u9664 1.3. \u5c06App\uff08.apk\u6587\u4ef6\uff09\u653e\u8fdb/system/app\u76ee\u5f55 1.4. \u5c06App\u6240\u4f7f\u7528\u7684.so\u6587\u4ef6\u5168\u90e8\u653e\u8fdb/system/lib\u76ee\u5f55 Note \u201c/system/app\u201d \u76ee\u5f55\u4e0b\u7684\u5e94\u7528\u90fd\u662f\u7cfb\u7edf\u5df2\u7ecf\u9884\u88c5\u5b8c\u6210\u7684\u4e0d\u4f1a\u518d\u6b21\u5b89\u88c5\uff0c\u6240\u4ee5\u4e0d\u80fd\u628aso\u6253\u5305\u5230apk\u91cc\u9762","title":"Android App\u5f00\u673a\u81ea\u542f\u4e4bLauncher"},{"location":"Android/android_source_code/android_remove_usb_permission_dialog/","text":"Tip \u6ce8\u610f\uff1a\u8fd8\u662f\u9700\u8981\u7533\u8bf7USB\u8bbe\u5907\u8bbf\u95ee\u6743\u9650\u7684\uff0c\u53ea\u662f\u4e0d\u4f1a\u5f39\u51fa\u5bf9\u8bdd\u6846\u4e86 1.1. \u6253\u5f00\u6b64\u6587\u4ef6 1 /android/frameworks/base/packages/SystemUI/src/com/android/systemui/usb/UsbPermissionActivity.java 1.2. \u4fee\u6539\u4ee3\u7801 \u627e\u5230\u8fd9\u884c\u4ee3\u7801\uff0c\u5c06\u5176\u6ce8\u91ca\u6389 1 //setupAlert(); 1.3. \u6dfb\u52a0\u4ee5\u4e0b\u4ee3\u7801\uff08\u6839\u636e\u9700\u6c42\u4efb\u9009\u4e00\u4e2a\u65b9\u6848\u5373\u53ef\uff09 1 2 3 4 5 6 7 8 9 10 11 /* \u65b9\u6848\u4e00\uff1a\u4ec5\u4f7f\u81ea\u5df1\u7684App\u4e0d\u5f39\u51fa\u5bf9\u8bdd\u6846 */ if ( ! mPackageName . equals ( \"com.fhc.usbcamera\" )){ //\u53cc\u5f15\u53f7\u5185\u4e3a\u4f60\u8981\u7ed9\u6743\u9650\u7684\u5305\u540d setupAlert (); } else { mPermissionGranted = true ; finish (); } /* \u65b9\u6848\u4e8c\uff1a\u4f7f\u6240\u6709\u7684App\u4e0d\u5f39\u51fa\u5bf9\u8bdd\u6846 */ mPermissionGranted = true ; finish (); \u53c2\u8003\u8d44\u6599\uff1a http://blog.csdn.net/hubbybob1/article/details/50263925","title":"\u53bb\u6389USB\u6743\u9650\u7533\u8bf7\u5bf9\u8bdd\u6846"},{"location":"Android/android_source_code/android_screen_brightness/","text":"\u4fee\u6539\u5c4f\u5e55\u9ed8\u8ba4\u4eae\u5ea6 \u00b6 \u4fee\u6539frameworks/base/packages/SettingsProvider/res/values/defaults.xml\u6587\u4ef6\u4e2d\u7684def_screen_brightness\u503c\uff0c\u5373\u53ef\u8c03\u6574\u5c4f\u5e55\u9ed8\u8ba4\u4eae\u5ea6\u3002 1 2 <!-- Default screen brightness, from 0 to 255. 102 is 40%. --> < integer name = \"def_screen_brightness\" > 102 </ integer >","title":"\u4fee\u6539\u5c4f\u5e55\u9ed8\u8ba4\u4eae\u5ea6"},{"location":"Android/android_source_code/android_screen_brightness/#_1","text":"\u4fee\u6539frameworks/base/packages/SettingsProvider/res/values/defaults.xml\u6587\u4ef6\u4e2d\u7684def_screen_brightness\u503c\uff0c\u5373\u53ef\u8c03\u6574\u5c4f\u5e55\u9ed8\u8ba4\u4eae\u5ea6\u3002 1 2 <!-- Default screen brightness, from 0 to 255. 102 is 40%. --> < integer name = \"def_screen_brightness\" > 102 </ integer >","title":"\u4fee\u6539\u5c4f\u5e55\u9ed8\u8ba4\u4eae\u5ea6"},{"location":"Android/java/java_ui_swing/","text":"Java UI \u00b6 1. \u521b\u5efa\u4e00\u4e2aJava\u7c7b \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 package fhc ; import javax.swing.JFrame ; import javax.swing.SwingUtilities ; public class Main { public static void main ( String [] args ) { // TODO Auto-generated method stub SwingUtilities . invokeLater ( new Runnable () { @Override public void run () { // TODO Auto-generated method stub JFrame jFrame = new MainFrame ( \"Hello\" ); jFrame . setSize ( 640 , 480 ); jFrame . setDefaultCloseOperation ( JFrame . EXIT_ON_CLOSE ); jFrame . setVisible ( true ); } }); } } 2.\u521b\u5efa\u4e00\u4e2aUI\u7c7b\u7ee7\u627f\u81eaJFrame \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 package fhc ; import javax.swing.JFrame ; import javax.swing.JButton ; import java.awt.BorderLayout ; import java.awt.event.MouseAdapter ; import java.awt.event.MouseEvent ; public class MainFrame extends JFrame { /** * */ private static final long serialVersionUID = - 4989400973301541581L ; public MainFrame ( String title ){ super ( title ); JButton btnNewButton = new JButton ( \"Start\" ); btnNewButton . setBounds ( 79 , 107 , 63 , 65 ); btnNewButton . addMouseListener ( new MouseAdapter () { @Override public void mouseClicked ( MouseEvent e ) { System . out . println ( \"Start\" ); } }); getContentPane (). setLayout ( null ); getContentPane (). add ( btnNewButton ); JButton btnStop = new JButton ( \"Stop\" ); btnStop . setBounds ( 188 , 107 , 57 , 65 ); btnStop . addMouseListener ( new MouseAdapter () { @Override public void mouseClicked ( MouseEvent e ) { System . out . println ( \"Stop\" ); } }); getContentPane (). add ( btnStop ); } } 3. \u7ed3\u679c\u5982\u4e0b \u00b6","title":"Swing"},{"location":"Android/java/java_ui_swing/#java-ui","text":"","title":"Java UI"},{"location":"Android/java/java_ui_swing/#1-java","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 package fhc ; import javax.swing.JFrame ; import javax.swing.SwingUtilities ; public class Main { public static void main ( String [] args ) { // TODO Auto-generated method stub SwingUtilities . invokeLater ( new Runnable () { @Override public void run () { // TODO Auto-generated method stub JFrame jFrame = new MainFrame ( \"Hello\" ); jFrame . setSize ( 640 , 480 ); jFrame . setDefaultCloseOperation ( JFrame . EXIT_ON_CLOSE ); jFrame . setVisible ( true ); } }); } }","title":"1. \u521b\u5efa\u4e00\u4e2aJava\u7c7b"},{"location":"Android/java/java_ui_swing/#2uijframe","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 package fhc ; import javax.swing.JFrame ; import javax.swing.JButton ; import java.awt.BorderLayout ; import java.awt.event.MouseAdapter ; import java.awt.event.MouseEvent ; public class MainFrame extends JFrame { /** * */ private static final long serialVersionUID = - 4989400973301541581L ; public MainFrame ( String title ){ super ( title ); JButton btnNewButton = new JButton ( \"Start\" ); btnNewButton . setBounds ( 79 , 107 , 63 , 65 ); btnNewButton . addMouseListener ( new MouseAdapter () { @Override public void mouseClicked ( MouseEvent e ) { System . out . println ( \"Start\" ); } }); getContentPane (). setLayout ( null ); getContentPane (). add ( btnNewButton ); JButton btnStop = new JButton ( \"Stop\" ); btnStop . setBounds ( 188 , 107 , 57 , 65 ); btnStop . addMouseListener ( new MouseAdapter () { @Override public void mouseClicked ( MouseEvent e ) { System . out . println ( \"Stop\" ); } }); getContentPane (). add ( btnStop ); } }","title":"2.\u521b\u5efa\u4e00\u4e2aUI\u7c7b\u7ee7\u627f\u81eaJFrame"},{"location":"Android/java/java_ui_swing/#3","text":"","title":"3. \u7ed3\u679c\u5982\u4e0b"},{"location":"Android/java/ubuntu_config_java/","text":"\u5728Ubuntu\u7cfb\u7edf\u4e2d\u914d\u7f6eJava\u5f00\u53d1\u73af\u5883 \u00b6 1.\u5b89\u88c5Java \u00b6 OpenJDK 1 2 # \u70b9\u51fbTab\u952e\u7cfb\u7edf\u4f1a\u5217\u51fa\u6240\u6709\u53ef\u7528\u7248\u672c\u7684OpenJDK sudo apt install openjdk [ -Tab key- ] 2.\u8bbe\u7f6eJava\u73af\u5883\u53d8\u91cf \u00b6 1 2 3 4 vim /etc/profile JAVA_HOME = JRE_HOME = 3.\u8bbe\u7f6e\u7cfb\u7edf\u9ed8\u8ba4Java\u7248\u672c \u00b6 1 update-alternatives --config java","title":"Ubuntu\u4e2d\u914d\u7f6eJava"},{"location":"Android/java/ubuntu_config_java/#ubuntujava","text":"","title":"\u5728Ubuntu\u7cfb\u7edf\u4e2d\u914d\u7f6eJava\u5f00\u53d1\u73af\u5883"},{"location":"Android/java/ubuntu_config_java/#1java","text":"OpenJDK 1 2 # \u70b9\u51fbTab\u952e\u7cfb\u7edf\u4f1a\u5217\u51fa\u6240\u6709\u53ef\u7528\u7248\u672c\u7684OpenJDK sudo apt install openjdk [ -Tab key- ]","title":"1.\u5b89\u88c5Java"},{"location":"Android/java/ubuntu_config_java/#2java","text":"1 2 3 4 vim /etc/profile JAVA_HOME = JRE_HOME =","title":"2.\u8bbe\u7f6eJava\u73af\u5883\u53d8\u91cf"},{"location":"Android/java/ubuntu_config_java/#3java","text":"1 update-alternatives --config java","title":"3.\u8bbe\u7f6e\u7cfb\u7edf\u9ed8\u8ba4Java\u7248\u672c"},{"location":"Computer Vision/OpenCV4Android_001/","text":"OpenCV for Android \u00b6 1.\u4e0b\u8f7d\u5e76\u89e3\u538bSDK \u00b6 OpenCVForAndroid SDK\u4e0b\u8f7d\u94fe\u63a5 2. \u65b0\u5efa\u4e00\u4e2aAndroid Studio\u9879\u76ee(opencv_test) \u00b6 Menu -> \"File\" -> \"New Project\" -> \"Empty Activity\" 3.\u5c06OpenCV SDK\u5bfc\u5165opencv_test\u9879\u76ee \u00b6 Menu -> \"File\" -> \"New\" -> \"Import Module\" Source directory: select this \"sdk\" directory Module name: \":opencv\" 4.\u5728APP\u6a21\u5757\u7684build.gradle\u6587\u4ef6\u4e2d\u6dfb\u52a0Opencv\u4f9d\u8d56 \u00b6 1 2 3 4 5 dependencies { implementation fileTree(dir: 'libs', include: ['*.jar']) ... implementation project(':opencv') } 5.Android Camera Preview\u793a\u4f8b\u6d4b\u8bd5 \u00b6 \u5c06OpenCV-android-sdk\\samples\\tutorial-1-camerapreview\u9879\u76ee\u79fb\u690d\u5230APP\u4e2d\uff08\u590d\u5236MainActivity.java\u6587\u4ef6\u3001layout\u6587\u4ef6\uff0c\u5728AndroidManifest.xml\u6dfb\u52a0\u8bbf\u95ee\u6444\u50cf\u5934\u7684\u6743\u9650\uff09","title":"OpenCV4Android"},{"location":"Computer Vision/OpenCV4Android_001/#opencv-for-android","text":"","title":"OpenCV for Android"},{"location":"Computer Vision/OpenCV4Android_001/#1sdk","text":"OpenCVForAndroid SDK\u4e0b\u8f7d\u94fe\u63a5","title":"1.\u4e0b\u8f7d\u5e76\u89e3\u538bSDK"},{"location":"Computer Vision/OpenCV4Android_001/#2-android-studioopencv_test","text":"Menu -> \"File\" -> \"New Project\" -> \"Empty Activity\"","title":"2. \u65b0\u5efa\u4e00\u4e2aAndroid Studio\u9879\u76ee(opencv_test)"},{"location":"Computer Vision/OpenCV4Android_001/#3opencv-sdkopencv_test","text":"Menu -> \"File\" -> \"New\" -> \"Import Module\" Source directory: select this \"sdk\" directory Module name: \":opencv\"","title":"3.\u5c06OpenCV SDK\u5bfc\u5165opencv_test\u9879\u76ee"},{"location":"Computer Vision/OpenCV4Android_001/#4appbuildgradleopencv","text":"1 2 3 4 5 dependencies { implementation fileTree(dir: 'libs', include: ['*.jar']) ... implementation project(':opencv') }","title":"4.\u5728APP\u6a21\u5757\u7684build.gradle\u6587\u4ef6\u4e2d\u6dfb\u52a0Opencv\u4f9d\u8d56"},{"location":"Computer Vision/OpenCV4Android_001/#5android-camera-preview","text":"\u5c06OpenCV-android-sdk\\samples\\tutorial-1-camerapreview\u9879\u76ee\u79fb\u690d\u5230APP\u4e2d\uff08\u590d\u5236MainActivity.java\u6587\u4ef6\u3001layout\u6587\u4ef6\uff0c\u5728AndroidManifest.xml\u6dfb\u52a0\u8bbf\u95ee\u6444\u50cf\u5934\u7684\u6743\u9650\uff09","title":"5.Android Camera Preview\u793a\u4f8b\u6d4b\u8bd5"},{"location":"Computer Vision/caffe/","text":"Caffe Install \u00b6 1.\u914d\u7f6e\u6587\u4ef6 \u00b6 \u5c06caffe\u6e90\u7801\u6839\u76ee\u5f55\u4e0b\u7684Makefile.config.example\u6587\u4ef6\u590d\u5236\u4e00\u4efd\uff0c\u5e76\u547d\u540d\u4e3a Makefile.config \u7136\u540e\u6309\u7167\u5982\u4e0b\u6240\u793a\uff0c\u4fee\u6539Makefile.config\u3002 1 2 3 4 5 6 7 # \u5c06BLAS\u7684\u503c\u4fee\u6539\u4e3aopen\uff0c\u56e0\u4e3a\u6211\u4eec\u5c06\u4f7f\u7528openBLAS BLAS : = open # \u5c06/home/your_name/local_install\u76ee\u5f55\u8ffd\u52a0\u5230 # Whatever else you find you need goes here. INCLUDE_DIRS : = $( PYTHON_INCLUDE ) /usr/local/include /home/fhc/caffe/local_install/include LIBRARY_DIRS : = $( PYTHON_LIB ) /usr/local/lib /usr/lib /home/fhc/caffe/local_install/lib 1 2 3 4 5 sudo apt-get install libprotobuf-dev protobuf-compiler sudo apt-get install libboost-all-dev sudo apt-get install libgoogle-glog-dev Install OpenBLAS(Base Linear Algebra Subprograms) modify the BLAS := open in the Makefile.config 1 2 3 git clone https://github.com/xianyi/OpenBLAS.git make make install modify the BLAS_INCLUDE & BLAS_LIB 1 2 BLAS_INCLUDE : = /opt/OpenBLAS/include BLAS_LIB : = /opt/OpenBLAS/lib Install hdf5 \u00b6 1 sudo apt-get install libhdf5-dev \u7136\u540e\u5c06hdf5\u7684\u8def\u5f84\u6dfb\u52a0\u5230Makefile.config,Example: 1 INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/ Error \u00b6 1 undefined reference to ` cv::imread ( cv::String const & , int ) ' \u4fee\u6539Makefile.config,\u5c06OPENCV_VERSION := 3","title":"caffe"},{"location":"Computer Vision/caffe/#caffe-install","text":"","title":"Caffe Install"},{"location":"Computer Vision/caffe/#1","text":"\u5c06caffe\u6e90\u7801\u6839\u76ee\u5f55\u4e0b\u7684Makefile.config.example\u6587\u4ef6\u590d\u5236\u4e00\u4efd\uff0c\u5e76\u547d\u540d\u4e3a Makefile.config \u7136\u540e\u6309\u7167\u5982\u4e0b\u6240\u793a\uff0c\u4fee\u6539Makefile.config\u3002 1 2 3 4 5 6 7 # \u5c06BLAS\u7684\u503c\u4fee\u6539\u4e3aopen\uff0c\u56e0\u4e3a\u6211\u4eec\u5c06\u4f7f\u7528openBLAS BLAS : = open # \u5c06/home/your_name/local_install\u76ee\u5f55\u8ffd\u52a0\u5230 # Whatever else you find you need goes here. INCLUDE_DIRS : = $( PYTHON_INCLUDE ) /usr/local/include /home/fhc/caffe/local_install/include LIBRARY_DIRS : = $( PYTHON_LIB ) /usr/local/lib /usr/lib /home/fhc/caffe/local_install/lib 1 2 3 4 5 sudo apt-get install libprotobuf-dev protobuf-compiler sudo apt-get install libboost-all-dev sudo apt-get install libgoogle-glog-dev Install OpenBLAS(Base Linear Algebra Subprograms) modify the BLAS := open in the Makefile.config 1 2 3 git clone https://github.com/xianyi/OpenBLAS.git make make install modify the BLAS_INCLUDE & BLAS_LIB 1 2 BLAS_INCLUDE : = /opt/OpenBLAS/include BLAS_LIB : = /opt/OpenBLAS/lib","title":"1.\u914d\u7f6e\u6587\u4ef6"},{"location":"Computer Vision/caffe/#install-hdf5","text":"1 sudo apt-get install libhdf5-dev \u7136\u540e\u5c06hdf5\u7684\u8def\u5f84\u6dfb\u52a0\u5230Makefile.config,Example: 1 INCLUDE_DIRS := $(PYTHON_INCLUDE) /usr/local/include /usr/include/hdf5/serial/","title":"Install hdf5"},{"location":"Computer Vision/caffe/#error","text":"1 undefined reference to ` cv::imread ( cv::String const & , int ) ' \u4fee\u6539Makefile.config,\u5c06OPENCV_VERSION := 3","title":"Error"},{"location":"Computer Vision/cv_library/","text":"open source computer vision librarys \u00b6 1.OpenCV \u00b6 OpenCV\uff08\u5f00\u6e90\u8ba1\u7b97\u673a\u89c6\u89c9\u5e93\uff09\u662f\u5728BSD\u8bb8\u53ef\u4e0b\u53d1\u5e03\u7684\uff0c\u56e0\u6b64\u5b83\u53ef\u4ee5\u514d\u8d39\u7528\u4e8e\u5b66\u672f\u548c\u5546\u4e1a\u7528\u9014\u3002 \u5b83\u5177\u6709C ++\uff0cPython\u548cJava\u63a5\u53e3\uff0c\u652f\u6301Windows\uff0cLinux\uff0cMac OS\uff0ciOS\u548cAndroid\u3002 OpenCV\u4e13\u4e3a\u63d0\u9ad8\u8ba1\u7b97\u6548\u7387\u800c\u8bbe\u8ba1\uff0c\u4e13\u6ce8\u4e8e\u5b9e\u65f6\u5e94\u7528\u3002\u8be5\u5e93\u4ee5\u4f18\u5316\u7684C / C ++\u7f16\u5199\uff0c\u53ef\u4ee5\u5229\u7528\u591a\u6838\u5904\u7406\u3002 \u901a\u8fc7OpenCL\u542f\u7528\uff0c\u5b83\u53ef\u4ee5\u5229\u7528\u5e95\u5c42\u5f02\u6784\u8ba1\u7b97\u5e73\u53f0\u7684\u786c\u4ef6\u52a0\u901f\u3002 OpenCV 2.Dlib \u00b6 3.SimpleCV \u00b6 http://simplecv.org/ 4.CCV \u00b6 http://libccv.org/ 5.SOD \u00b6 https://sod.pixlab.io/ 6.VXL \u00b6 https://vxl.github.io/ 7. \u00b6 http://cimg.eu/ 8. \u00b6 http://pointclouds.org/ 9. \u00b6 http://boofcv.org 10. \u00b6 https://www.openhub.net/p/ltilib 11 \u00b6 https://www.mathworks.com/products/computer-vision.html OpenMv 10. \u00b6 http://www.vlfeat.org/","title":"cv_library"},{"location":"Computer Vision/cv_library/#open-source-computer-vision-librarys","text":"","title":"open source computer vision librarys"},{"location":"Computer Vision/cv_library/#1opencv","text":"OpenCV\uff08\u5f00\u6e90\u8ba1\u7b97\u673a\u89c6\u89c9\u5e93\uff09\u662f\u5728BSD\u8bb8\u53ef\u4e0b\u53d1\u5e03\u7684\uff0c\u56e0\u6b64\u5b83\u53ef\u4ee5\u514d\u8d39\u7528\u4e8e\u5b66\u672f\u548c\u5546\u4e1a\u7528\u9014\u3002 \u5b83\u5177\u6709C ++\uff0cPython\u548cJava\u63a5\u53e3\uff0c\u652f\u6301Windows\uff0cLinux\uff0cMac OS\uff0ciOS\u548cAndroid\u3002 OpenCV\u4e13\u4e3a\u63d0\u9ad8\u8ba1\u7b97\u6548\u7387\u800c\u8bbe\u8ba1\uff0c\u4e13\u6ce8\u4e8e\u5b9e\u65f6\u5e94\u7528\u3002\u8be5\u5e93\u4ee5\u4f18\u5316\u7684C / C ++\u7f16\u5199\uff0c\u53ef\u4ee5\u5229\u7528\u591a\u6838\u5904\u7406\u3002 \u901a\u8fc7OpenCL\u542f\u7528\uff0c\u5b83\u53ef\u4ee5\u5229\u7528\u5e95\u5c42\u5f02\u6784\u8ba1\u7b97\u5e73\u53f0\u7684\u786c\u4ef6\u52a0\u901f\u3002 OpenCV","title":"1.OpenCV"},{"location":"Computer Vision/cv_library/#2dlib","text":"","title":"2.Dlib"},{"location":"Computer Vision/cv_library/#3simplecv","text":"http://simplecv.org/","title":"3.SimpleCV"},{"location":"Computer Vision/cv_library/#4ccv","text":"http://libccv.org/","title":"4.CCV"},{"location":"Computer Vision/cv_library/#5sod","text":"https://sod.pixlab.io/","title":"5.SOD"},{"location":"Computer Vision/cv_library/#6vxl","text":"https://vxl.github.io/","title":"6.VXL"},{"location":"Computer Vision/cv_library/#7","text":"http://cimg.eu/","title":"7."},{"location":"Computer Vision/cv_library/#8","text":"http://pointclouds.org/","title":"8."},{"location":"Computer Vision/cv_library/#9","text":"http://boofcv.org","title":"9."},{"location":"Computer Vision/cv_library/#10","text":"https://www.openhub.net/p/ltilib","title":"10."},{"location":"Computer Vision/cv_library/#11","text":"https://www.mathworks.com/products/computer-vision.html OpenMv","title":"11"},{"location":"Computer Vision/cv_library/#10_1","text":"http://www.vlfeat.org/","title":"10."},{"location":"Design Patterns/Design Patterns/","text":"","title":"Design Patterns"},{"location":"Embedded System/ESP8266/","text":"ESP8266\u5f00\u53d1\u73af\u5883\u642d\u5efa \u00b6 \u5230espressif\u5b98\u7f51\u4e0b\u8f7d2a-esp8266-sdk_getting_started_guide_en.pdf \u6839\u636e\u6587\u6863\u4e2d\u7684\u6307\u5f15\uff0c\u4e0b\u8f7despressif\u505a\u597d\u7684\u865a\u62df\u673a\uff08\u4e0b\u8f7d\u5305\u4e2d\u7684VirtualBox\u5728\u6211\u7535\u8111\u4e0a\uff09\u8fd9\u662f\u4e00\u4e2a32\u4f4d\u7684\u64cd\u4f5c\u7cfb\u7edf \u4e00\u5b9a\u8981\u4ecegithub\u5b98\u7f51\u4e0b\u8f7despressif\u6e90\u7801 1 2 mkdir /mnt/myshare mount -t vboxsf shared /mnt/Share 1 2 3 4 sudo apt-get install libncurses5-dev libncursesw5-dev gperf bison flex // Warn \u4e0d\u8981\u5b89\u88c5python-serial\uff0c\u8981\u5b89\u88c5pysreial ttyUSB0\u7684\u6743\u9650 \u5728.bashrc\u4e2dexport\u73af\u5883\u53d8\u91cf \u7cfb\u7edf\u7f16\u8bd1 \u00b6 RTOS\u7248\u672c\u7f16\u8bd1\uff0cmake menuconfig -> make all / make flash NONOS\u7248\u672c\u7f16\u8bd1\uff0c\u5de5\u7a0b\u8981\u5728\u7cfb\u7edf\u6e90\u7801\u6839\u76ee\u5f55\u4e0b,\u6bd4\u5982\u6e90\u7801\u76ee\u5f55\u662f\uff1a~/ESP_NONOS_SDK\uff0c\u5de5\u7a0b\u76ee\u5f55\u5fc5\u987b\u662f\uff1a~/ESP_NONOS_SDK/xxx_project","title":"ESP8266"},{"location":"Embedded System/ESP8266/#esp8266","text":"\u5230espressif\u5b98\u7f51\u4e0b\u8f7d2a-esp8266-sdk_getting_started_guide_en.pdf \u6839\u636e\u6587\u6863\u4e2d\u7684\u6307\u5f15\uff0c\u4e0b\u8f7despressif\u505a\u597d\u7684\u865a\u62df\u673a\uff08\u4e0b\u8f7d\u5305\u4e2d\u7684VirtualBox\u5728\u6211\u7535\u8111\u4e0a\uff09\u8fd9\u662f\u4e00\u4e2a32\u4f4d\u7684\u64cd\u4f5c\u7cfb\u7edf \u4e00\u5b9a\u8981\u4ecegithub\u5b98\u7f51\u4e0b\u8f7despressif\u6e90\u7801 1 2 mkdir /mnt/myshare mount -t vboxsf shared /mnt/Share 1 2 3 4 sudo apt-get install libncurses5-dev libncursesw5-dev gperf bison flex // Warn \u4e0d\u8981\u5b89\u88c5python-serial\uff0c\u8981\u5b89\u88c5pysreial ttyUSB0\u7684\u6743\u9650 \u5728.bashrc\u4e2dexport\u73af\u5883\u53d8\u91cf","title":"ESP8266\u5f00\u53d1\u73af\u5883\u642d\u5efa"},{"location":"Embedded System/ESP8266/#_1","text":"RTOS\u7248\u672c\u7f16\u8bd1\uff0cmake menuconfig -> make all / make flash NONOS\u7248\u672c\u7f16\u8bd1\uff0c\u5de5\u7a0b\u8981\u5728\u7cfb\u7edf\u6e90\u7801\u6839\u76ee\u5f55\u4e0b,\u6bd4\u5982\u6e90\u7801\u76ee\u5f55\u662f\uff1a~/ESP_NONOS_SDK\uff0c\u5de5\u7a0b\u76ee\u5f55\u5fc5\u987b\u662f\uff1a~/ESP_NONOS_SDK/xxx_project","title":"\u7cfb\u7edf\u7f16\u8bd1"},{"location":"Embedded System/arm_compiler/","text":"ARM\u7f16\u8bd1\u5668 \u00b6 \u4e0d\u540c\u7684\u5de5\u5177\u94fe\u4f7f\u7528\u7684C\u5e93\u53ef\u80fd\u4e0d\u540c\u3002 \u4e00\u3001 \u57fa\u4e8eARM\u5185\u6838\u7684\u79cd\u7c7b\u8fdb\u884c\u5206\u7c7b \u00b6 1.1 \u9002\u7528\u4e8eCortex-M/R\u5185\u6838\u7684\u7f16\u8bd1\u5668 \u00b6 \u3010\u6536\u8d39\u3011ARM Compiler(\u968fARM\u7684IDE\u53d1\u5e03)\uff1a Arm Development Studio \u548c Keil MDK \u3010\u6536\u8d39\u3011ARM Compiler(\u5355\u72ec\u53d1\u5e03)\uff1a Arm Compiler \u3010\u6536\u8d39\u3011IAR\u7f16\u8bd1\u5668\u4ec5\u968fIAR\u7684IDE\u53d1\u5e03\uff1a IAR ARM Compiler\u548cIAR\u5c5e\u4e8e\u6536\u8d39\u8f6f\u4ef6\uff0c\u7ed3\u5408ARM\u548cIAR\u7684IDE\u5c31\u80fd\u5f88\u65b9\u4fbf\u7684\u5b8c\u6210MCU\u7684\u8f6f\u4ef6\u5f00\u53d1\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u5e73\u65f6\u4f7f\u7528\u6700\u591a\u7684\u65b9\u5f0f\u3002 The GNU Toolchain for the Cortex-R/M GNU Toolchain for the Cortex-R/M\u662f\u57fa\u4e8eGCC\u5f00\u53d1\u7684\uff0c\u514d\u8d39\u8f6f\u4ef6\uff0c\u9002\u7528\u4e8eCortex-R/M\u4f5c\u4e3a\u5185\u6838\u7684MCU\u3002 \u4e00\u822c\u5b83\u4eec\u662f\u8fd9\u4e2a\u6837\u5b50\u7684: 1 2 3 4 5 6 arm-none-eabi-gcc arm-none-eabi-g++ arm-none-eabi-ar arm-none-eabi-as ... 1.2 \u9002\u7528\u4e8eCortex-A\u5185\u6838\u7684\u7f16\u8bd1\u5668 \u00b6 \u3010\u6536\u8d39\u3011ARM Compiler(\u968fARM\u7684IDE\u53d1\u5e03)\uff1a Arm Development Studio \u3010\u6536\u8d39\u3011ARM Compiler(\u5355\u72ec\u53d1\u5e03)\uff1a Arm Compiler ARM Compiler\u4e3a\u6536\u8d39\u8f6f\u4ef6\uff0c\u9002\u7528\u4e8eARM\u5168\u7cfb\u5217\u5185\u6838\u3002 The GNU Toolchain for the Cortex-A Family GNU Toolchain for the Cortex-A\u662f\u57fa\u4e8eGCC\u5f00\u53d1\u7684\uff0c\u514d\u8d39\u8f6f\u4ef6\uff0c\u9002\u7528\u4e8eCortex-A\u4f5c\u4e3a\u5185\u6838\u7684\u5904\u7406\u5668\u3002\u4e00\u672c\u5206\u4e3a\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f\u7684\u548c\u7f16\u8bd1Linux\u5e94\u7528\u7a0b\u5e8f\u7684\uff08\u8be6\u60c5\u53c2\u8003\u4e0a\u9762\u7684\u94fe\u63a5\uff09\u3002 1 2 3 4 # \u53ef\u4ee5\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f\u548cLinux\u5e94\u7528\u7a0b\u5e8f aarch64-linux-gnu-gcc # \u4ec5\u53ef\u4ee5\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f Android NDK Android NDK\u662f\u514d\u8d39\u8f6f\u4ef6\uff0c\u9002\u7528\u4e8e\u7f16\u8bd1Android Native(C/C++)\u5e94\u7528\u7a0b\u5e8f\u3002 \u4e8c\u3001 \u57fa\u4e8e\u7f16\u8bd1\u5668\u7684\u79cd\u7c7b\u8fdb\u884c\u5206\u7c7b \u00b6 2.1 ARM Compiler \u00b6 Arm Compiler\u7684\u53d1\u5e03\u9014\u5f84\u6709\u4e24\u79cd\uff1a \u968fARM\u7684IDE\u53d1\u5e03\uff1a Arm Development Studio \u548c Keil MDK \u5355\u72ec\u53d1\u5e03\uff1a Arm Compiler 2.2 IAR \u00b6 IAR \u7684\u7f16\u8bd1\u5668\u53ea\u968f\u5176IDE\u53d1\u5e03 2.3 GCC For ARM \u00b6 GCC For ARM\u7684\u53d1\u5e03\u9014\u5f84\u4e3b\u8981\u6709\u56db\u79cd\uff1a Linaro GNU Toolchain For ARM \u4f7f\u7528 crosstool-ng \u81ea\u5df1\u7f16\u8bd1 Android NDK GCC\u5168\u79f0\u4e3aGNU\u7f16\u8bd1\u5668\u5957\u4ef6(GNU Compiler Collection)\u3002\u5b83\u5305\u62ec\u4e86C\u3001C++\u3001Objective-C\u3001Fortran\u3001Java\u3001Ada\u3001Go\u8bed\u8a00\u548cD\u8bed\u8a00\u7684\u524d\u7aef\uff0c\u4e5f\u5305\u62ec\u4e86\u8fd9\u4e9b\u8bed\u8a00\u7684\u5e93\uff08\u5982libstdc++\u3001libgcj\u7b49\u7b49\uff09\u3002 GCC for ARM \u5219\u662f\u57fa\u4e8e\u5f00\u6e90\u7684GCC\u5f00\u53d1\u800c\u6765\uff0c\u7528\u6765\u7f16\u8bd1\u751f\u6210ARM\u5185\u6838\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7f16\u8bd1\u5957\u4ef6\uff0c\u79f0\u4e4b\u4e3aARM\u4ea4\u53c9\u7f16\u8bd1\u5957\u4ef6/\u5de5\u5177\u94fe\u3002 \u7531\u4e8eGCC for ARM\u7684\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u79cd\u7c7b\u4e5f\u6bd4\u8f83\u591a\uff0c\u4e00\u822c\u901a\u8fc7\u5176\u547d\u540d\u8fdb\u884c\u533a\u5206\u3002 GCC for ARM\u7684\u547d\u540d\u89c4\u5219 \u6ce8\u610f\uff1a\u5176\u547d\u540d\u89c4\u5219\u5e76\u4e0d\u662f\u5341\u5206\u4e25\u683c\u89c4\u8303\uff0c\u5927\u6982\u505a\u4e2a\u53c2\u8003\u5427 1 arch [-vendor] [-os] [-(gnu)eabi] [-gcc] \u53c2\u6570 \u542b\u4e49 arch \u4f53\u7cfb\u67b6\u6784\uff0c\u5982 arm , aarch64 , mips vendo \u5de5\u5177\u94fe\u63d0\u4f9b\u5546\uff0c\u6ca1\u6709 vendor \u65f6\uff0c\u7528 none \u4ee3\u66ff\uff1b os \u76ee\u6807\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6ca1\u6709 os \u652f\u6301\u65f6\uff0c\u4e5f\u7528 none \u4ee3\u66ff eabi \u5d4c\u5165\u5f0f\u5e94\u7528\u4e8c\u8fdb\u5236\u63a5\u53e3\uff08Embedded Application Binary Interface\uff09 \u5982\u679c\u540c\u65f6\u6ca1\u6709 vendor \u548c os \u652f\u6301\uff0c\u5219\u53ea\u7528\u4e00\u4e2a none \u4ee3\u66ff\u3002 \u4e3e\u4f8b\uff1a arm-none-eabi-gcc \u9002\u7528\u4e8eCortex-M/R\u5185\u6838\uff0c\u6bd4\u5982STM32\uff0c\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f \u53c2\u6570 \u542b\u4e49 arm \u5185\u6838\u4e3aarm 32\u4f4d\u67b6\u6784\uff0c\u5982Cortex-M/R\u5185\u6838 none \u5de5\u5177\u94fe\u63d0\u4f9b\u5546\uff0c\u65e0\u76ee\u6807\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5982\uff1aSTM32\u7a0b\u5e8f\u7684\u7f16\u8bd1 eabi \u5d4c\u5165\u5f0f\u5e94\u7528\u4e8c\u8fdb\u5236\u63a5\u53e3 gcc \u76ee\u6807\u8bed\u8a00\u4e3aC\u8bed\u8a00 aarch64-linux-gnu-gcc \u9002\u7528\u4e8eCortex-A\u5185\u6838\uff0c\u5982Cortex-A53\uff0c\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f(boot\u3001kernel\u7b49)\u3001Linux\u5e94\u7528\u7a0b\u5e8f\u5747\u53ef \u53c2\u6570 \u542b\u4e49 aarch64 \u5185\u6838\u4e3aarm 64\u4f4d\u67b6\u6784\uff0c\u5982Cortex-A\u5185\u6838 linux \u76ee\u6807\u64cd\u4f5c\u7cfb\u7edf\u4e3aLinux gnu \u5de5\u5177\u94fe\u63d0\u4f9b\u5546\u4e3aGNU gcc \u76ee\u6807\u8bed\u8a00\u4e3aC\u8bed\u8a00 2.4 Clang For ARM \u00b6 Arm Compiler 6 Android NDK","title":"ARM\u4ea4\u53c9\u7f16\u8bd1\u5de5\u5177"},{"location":"Embedded System/arm_compiler/#arm","text":"\u4e0d\u540c\u7684\u5de5\u5177\u94fe\u4f7f\u7528\u7684C\u5e93\u53ef\u80fd\u4e0d\u540c\u3002","title":"ARM\u7f16\u8bd1\u5668"},{"location":"Embedded System/arm_compiler/#arm_1","text":"","title":"\u4e00\u3001 \u57fa\u4e8eARM\u5185\u6838\u7684\u79cd\u7c7b\u8fdb\u884c\u5206\u7c7b"},{"location":"Embedded System/arm_compiler/#11-cortex-mr","text":"\u3010\u6536\u8d39\u3011ARM Compiler(\u968fARM\u7684IDE\u53d1\u5e03)\uff1a Arm Development Studio \u548c Keil MDK \u3010\u6536\u8d39\u3011ARM Compiler(\u5355\u72ec\u53d1\u5e03)\uff1a Arm Compiler \u3010\u6536\u8d39\u3011IAR\u7f16\u8bd1\u5668\u4ec5\u968fIAR\u7684IDE\u53d1\u5e03\uff1a IAR ARM Compiler\u548cIAR\u5c5e\u4e8e\u6536\u8d39\u8f6f\u4ef6\uff0c\u7ed3\u5408ARM\u548cIAR\u7684IDE\u5c31\u80fd\u5f88\u65b9\u4fbf\u7684\u5b8c\u6210MCU\u7684\u8f6f\u4ef6\u5f00\u53d1\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u5e73\u65f6\u4f7f\u7528\u6700\u591a\u7684\u65b9\u5f0f\u3002 The GNU Toolchain for the Cortex-R/M GNU Toolchain for the Cortex-R/M\u662f\u57fa\u4e8eGCC\u5f00\u53d1\u7684\uff0c\u514d\u8d39\u8f6f\u4ef6\uff0c\u9002\u7528\u4e8eCortex-R/M\u4f5c\u4e3a\u5185\u6838\u7684MCU\u3002 \u4e00\u822c\u5b83\u4eec\u662f\u8fd9\u4e2a\u6837\u5b50\u7684: 1 2 3 4 5 6 arm-none-eabi-gcc arm-none-eabi-g++ arm-none-eabi-ar arm-none-eabi-as ...","title":"1.1 \u9002\u7528\u4e8eCortex-M/R\u5185\u6838\u7684\u7f16\u8bd1\u5668"},{"location":"Embedded System/arm_compiler/#12-cortex-a","text":"\u3010\u6536\u8d39\u3011ARM Compiler(\u968fARM\u7684IDE\u53d1\u5e03)\uff1a Arm Development Studio \u3010\u6536\u8d39\u3011ARM Compiler(\u5355\u72ec\u53d1\u5e03)\uff1a Arm Compiler ARM Compiler\u4e3a\u6536\u8d39\u8f6f\u4ef6\uff0c\u9002\u7528\u4e8eARM\u5168\u7cfb\u5217\u5185\u6838\u3002 The GNU Toolchain for the Cortex-A Family GNU Toolchain for the Cortex-A\u662f\u57fa\u4e8eGCC\u5f00\u53d1\u7684\uff0c\u514d\u8d39\u8f6f\u4ef6\uff0c\u9002\u7528\u4e8eCortex-A\u4f5c\u4e3a\u5185\u6838\u7684\u5904\u7406\u5668\u3002\u4e00\u672c\u5206\u4e3a\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f\u7684\u548c\u7f16\u8bd1Linux\u5e94\u7528\u7a0b\u5e8f\u7684\uff08\u8be6\u60c5\u53c2\u8003\u4e0a\u9762\u7684\u94fe\u63a5\uff09\u3002 1 2 3 4 # \u53ef\u4ee5\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f\u548cLinux\u5e94\u7528\u7a0b\u5e8f aarch64-linux-gnu-gcc # \u4ec5\u53ef\u4ee5\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f Android NDK Android NDK\u662f\u514d\u8d39\u8f6f\u4ef6\uff0c\u9002\u7528\u4e8e\u7f16\u8bd1Android Native(C/C++)\u5e94\u7528\u7a0b\u5e8f\u3002","title":"1.2 \u9002\u7528\u4e8eCortex-A\u5185\u6838\u7684\u7f16\u8bd1\u5668"},{"location":"Embedded System/arm_compiler/#_1","text":"","title":"\u4e8c\u3001 \u57fa\u4e8e\u7f16\u8bd1\u5668\u7684\u79cd\u7c7b\u8fdb\u884c\u5206\u7c7b"},{"location":"Embedded System/arm_compiler/#21-arm-compiler","text":"Arm Compiler\u7684\u53d1\u5e03\u9014\u5f84\u6709\u4e24\u79cd\uff1a \u968fARM\u7684IDE\u53d1\u5e03\uff1a Arm Development Studio \u548c Keil MDK \u5355\u72ec\u53d1\u5e03\uff1a Arm Compiler","title":"2.1 ARM Compiler"},{"location":"Embedded System/arm_compiler/#22-iar","text":"IAR \u7684\u7f16\u8bd1\u5668\u53ea\u968f\u5176IDE\u53d1\u5e03","title":"2.2 IAR"},{"location":"Embedded System/arm_compiler/#23-gcc-for-arm","text":"GCC For ARM\u7684\u53d1\u5e03\u9014\u5f84\u4e3b\u8981\u6709\u56db\u79cd\uff1a Linaro GNU Toolchain For ARM \u4f7f\u7528 crosstool-ng \u81ea\u5df1\u7f16\u8bd1 Android NDK GCC\u5168\u79f0\u4e3aGNU\u7f16\u8bd1\u5668\u5957\u4ef6(GNU Compiler Collection)\u3002\u5b83\u5305\u62ec\u4e86C\u3001C++\u3001Objective-C\u3001Fortran\u3001Java\u3001Ada\u3001Go\u8bed\u8a00\u548cD\u8bed\u8a00\u7684\u524d\u7aef\uff0c\u4e5f\u5305\u62ec\u4e86\u8fd9\u4e9b\u8bed\u8a00\u7684\u5e93\uff08\u5982libstdc++\u3001libgcj\u7b49\u7b49\uff09\u3002 GCC for ARM \u5219\u662f\u57fa\u4e8e\u5f00\u6e90\u7684GCC\u5f00\u53d1\u800c\u6765\uff0c\u7528\u6765\u7f16\u8bd1\u751f\u6210ARM\u5185\u6838\u53ef\u6267\u884c\u6587\u4ef6\u7684\u7f16\u8bd1\u5957\u4ef6\uff0c\u79f0\u4e4b\u4e3aARM\u4ea4\u53c9\u7f16\u8bd1\u5957\u4ef6/\u5de5\u5177\u94fe\u3002 \u7531\u4e8eGCC for ARM\u7684\u4f7f\u7528\u975e\u5e38\u5e7f\u6cdb\uff0c\u79cd\u7c7b\u4e5f\u6bd4\u8f83\u591a\uff0c\u4e00\u822c\u901a\u8fc7\u5176\u547d\u540d\u8fdb\u884c\u533a\u5206\u3002 GCC for ARM\u7684\u547d\u540d\u89c4\u5219 \u6ce8\u610f\uff1a\u5176\u547d\u540d\u89c4\u5219\u5e76\u4e0d\u662f\u5341\u5206\u4e25\u683c\u89c4\u8303\uff0c\u5927\u6982\u505a\u4e2a\u53c2\u8003\u5427 1 arch [-vendor] [-os] [-(gnu)eabi] [-gcc] \u53c2\u6570 \u542b\u4e49 arch \u4f53\u7cfb\u67b6\u6784\uff0c\u5982 arm , aarch64 , mips vendo \u5de5\u5177\u94fe\u63d0\u4f9b\u5546\uff0c\u6ca1\u6709 vendor \u65f6\uff0c\u7528 none \u4ee3\u66ff\uff1b os \u76ee\u6807\u64cd\u4f5c\u7cfb\u7edf\uff0c\u6ca1\u6709 os \u652f\u6301\u65f6\uff0c\u4e5f\u7528 none \u4ee3\u66ff eabi \u5d4c\u5165\u5f0f\u5e94\u7528\u4e8c\u8fdb\u5236\u63a5\u53e3\uff08Embedded Application Binary Interface\uff09 \u5982\u679c\u540c\u65f6\u6ca1\u6709 vendor \u548c os \u652f\u6301\uff0c\u5219\u53ea\u7528\u4e00\u4e2a none \u4ee3\u66ff\u3002 \u4e3e\u4f8b\uff1a arm-none-eabi-gcc \u9002\u7528\u4e8eCortex-M/R\u5185\u6838\uff0c\u6bd4\u5982STM32\uff0c\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f \u53c2\u6570 \u542b\u4e49 arm \u5185\u6838\u4e3aarm 32\u4f4d\u67b6\u6784\uff0c\u5982Cortex-M/R\u5185\u6838 none \u5de5\u5177\u94fe\u63d0\u4f9b\u5546\uff0c\u65e0\u76ee\u6807\u64cd\u4f5c\u7cfb\u7edf\uff0c\u5982\uff1aSTM32\u7a0b\u5e8f\u7684\u7f16\u8bd1 eabi \u5d4c\u5165\u5f0f\u5e94\u7528\u4e8c\u8fdb\u5236\u63a5\u53e3 gcc \u76ee\u6807\u8bed\u8a00\u4e3aC\u8bed\u8a00 aarch64-linux-gnu-gcc \u9002\u7528\u4e8eCortex-A\u5185\u6838\uff0c\u5982Cortex-A53\uff0c\u7f16\u8bd1\u88f8\u673a\u7a0b\u5e8f(boot\u3001kernel\u7b49)\u3001Linux\u5e94\u7528\u7a0b\u5e8f\u5747\u53ef \u53c2\u6570 \u542b\u4e49 aarch64 \u5185\u6838\u4e3aarm 64\u4f4d\u67b6\u6784\uff0c\u5982Cortex-A\u5185\u6838 linux \u76ee\u6807\u64cd\u4f5c\u7cfb\u7edf\u4e3aLinux gnu \u5de5\u5177\u94fe\u63d0\u4f9b\u5546\u4e3aGNU gcc \u76ee\u6807\u8bed\u8a00\u4e3aC\u8bed\u8a00","title":"2.3 GCC For ARM"},{"location":"Embedded System/arm_compiler/#24-clang-for-arm","text":"Arm Compiler 6 Android NDK","title":"2.4 Clang For ARM"},{"location":"Embedded System/ascii_table/","text":"ASCII Table \u00b6","title":"ASCII Table"},{"location":"Embedded System/ascii_table/#ascii-table","text":"","title":"ASCII Table"},{"location":"Embedded System/build_linux_source_tree/","text":"Build Linux Source Tree \u00b6 1\u3001\u5217\u51fa\u53ef\u7528\u7684\u6e90\u7801\u5305 \u00b6 1 sudo apt-cache search linux-source 2\u3001\u5b89\u88c5Linux\u5185\u6838\u6e90\u7801 \u00b6 1 sudo apt-get install xx-xx-xx","title":"\u6784\u5efa\u5185\u6838\u6e90\u7801\u6811"},{"location":"Embedded System/build_linux_source_tree/#build-linux-source-tree","text":"","title":"Build Linux Source Tree"},{"location":"Embedded System/build_linux_source_tree/#1","text":"1 sudo apt-cache search linux-source","title":"1\u3001\u5217\u51fa\u53ef\u7528\u7684\u6e90\u7801\u5305"},{"location":"Embedded System/build_linux_source_tree/#2linux","text":"1 sudo apt-get install xx-xx-xx","title":"2\u3001\u5b89\u88c5Linux\u5185\u6838\u6e90\u7801"},{"location":"Embedded System/c_memory_layout/","text":"C\u8bed\u8a00\u5185\u5b58\u5206\u5e03\uff08Memory Layout\uff09 \u00b6 1. \u9759\u6001\u533a\u57df \u00b6 1.1. Text \u00b6 \u5305\u62ec\u4ee3\u7801\u6bb5\uff08code\uff09\u548c\u53ea\u8bfb\u6570\u636e\u6bb5\uff08RO\uff09 1.2. \u5df2\u521d\u59cb\u5316\u6570\u636e\u6bb5\uff08RW data\uff09 \u00b6 1.3. \u672a\u521d\u59cb\u5316\u6570\u636e\u6bb5\uff08BSS\uff09 \u00b6 2. \u52a8\u6001\u533a\u57df \u00b6 2.1. \u6808 \u00b6 \u6808\u5185\u5b58\u53ea\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u51fa\u73b0\uff0c\u5728\u51fd\u6570\u5185\u90e8\u4f7f\u7528\u7684\u53d8\u91cf\u3001\u51fd\u6570\u7684\u53c2\u6570\u4ee5\u53ca\u8fd4\u56de\u503c\u5c06\u4f7f\u7528\u6808\u7a7a\u95f4\uff0c\u6808\u7a7a\u95f4\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u5206\u914d\u548c\u91ca\u653e\u3002\u5176\u64cd\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u6808\u3002 2.2. \u5806 \u00b6 \u5806\u5185\u5b58\u53ea\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u51fa\u73b0\uff0c\u4e00\u822c\u7531\u7a0b\u5e8f\u5458\u5206\u914d\u548c\u91ca\u653e\u3002\u5728\u5177\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u7a0b\u5e8f\u6ca1\u6709\u91ca\u653e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u80fd\u5728\u7a0b\u5e8f\uff08\u4f8b\u5982\u4e00\u4e2a\u8fdb\u7a0b\uff09\u7ed3\u675f\u540e\u56de\u6536\u5185\u5b58\u3002\u6ce8\u610f\u5b83\u4e0e\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u5806\u662f\u4e24\u56de\u4e8b\uff0c\u5206\u914d\u65b9\u5f0f\u5012\u662f\u7c7b\u4f3c\u4e8e\u94fe\u8868\u3002 3. \u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u72b6\u6001 \u00b6 \u4e00\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\u5206\u4e3a\u955c\u50cf\u548c\u8fd0\u884c\u65f6\u4e24\u79cd\u72b6\u6001 \u955c\u50cf\u6587\u4ef6\u4e2d\u5305\u542b\u4ee3\u7801\u6bb5\u3001\u53ea\u8bfb\u6570\u636e\u6bb5\u3001\u8bfb\u5199\u6570\u636e\u6bb5 \u5728\u7a0b\u5e8f\u8fd0\u884c\u4e4b\u524d\u52a0\u8f7d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5c06\u52a8\u6001\u751f\u6210\u672a\u521d\u59cb\u5316\u6570\u636e\u6bb5\uff08BSS\uff09\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u5c06\u52a8\u6001\u751f\u6210\u5806\uff08Heap\uff09\u548c\u6808\uff08Stack\uff09\u533a\u57df","title":"C\u5185\u5b58\u6a21\u578b"},{"location":"Embedded System/c_memory_layout/#cmemory-layout","text":"","title":"C\u8bed\u8a00\u5185\u5b58\u5206\u5e03\uff08Memory Layout\uff09"},{"location":"Embedded System/c_memory_layout/#1","text":"","title":"1. \u9759\u6001\u533a\u57df"},{"location":"Embedded System/c_memory_layout/#11-text","text":"\u5305\u62ec\u4ee3\u7801\u6bb5\uff08code\uff09\u548c\u53ea\u8bfb\u6570\u636e\u6bb5\uff08RO\uff09","title":"1.1. Text"},{"location":"Embedded System/c_memory_layout/#12-rw-data","text":"","title":"1.2. \u5df2\u521d\u59cb\u5316\u6570\u636e\u6bb5\uff08RW data\uff09"},{"location":"Embedded System/c_memory_layout/#13-bss","text":"","title":"1.3. \u672a\u521d\u59cb\u5316\u6570\u636e\u6bb5\uff08BSS\uff09"},{"location":"Embedded System/c_memory_layout/#2","text":"","title":"2. \u52a8\u6001\u533a\u57df"},{"location":"Embedded System/c_memory_layout/#21","text":"\u6808\u5185\u5b58\u53ea\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u51fa\u73b0\uff0c\u5728\u51fd\u6570\u5185\u90e8\u4f7f\u7528\u7684\u53d8\u91cf\u3001\u51fd\u6570\u7684\u53c2\u6570\u4ee5\u53ca\u8fd4\u56de\u503c\u5c06\u4f7f\u7528\u6808\u7a7a\u95f4\uff0c\u6808\u7a7a\u95f4\u7531\u7f16\u8bd1\u5668\u81ea\u52a8\u5206\u914d\u548c\u91ca\u653e\u3002\u5176\u64cd\u4f5c\u65b9\u5f0f\u7c7b\u4f3c\u4e8e\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u6808\u3002","title":"2.1. \u6808"},{"location":"Embedded System/c_memory_layout/#22","text":"\u5806\u5185\u5b58\u53ea\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u51fa\u73b0\uff0c\u4e00\u822c\u7531\u7a0b\u5e8f\u5458\u5206\u914d\u548c\u91ca\u653e\u3002\u5728\u5177\u6709\u64cd\u4f5c\u7cfb\u7edf\u7684\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u7a0b\u5e8f\u6ca1\u6709\u91ca\u653e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u53ef\u80fd\u5728\u7a0b\u5e8f\uff08\u4f8b\u5982\u4e00\u4e2a\u8fdb\u7a0b\uff09\u7ed3\u675f\u540e\u56de\u6536\u5185\u5b58\u3002\u6ce8\u610f\u5b83\u4e0e\u6570\u636e\u7ed3\u6784\u4e2d\u7684\u5806\u662f\u4e24\u56de\u4e8b\uff0c\u5206\u914d\u65b9\u5f0f\u5012\u662f\u7c7b\u4f3c\u4e8e\u94fe\u8868\u3002","title":"2.2. \u5806"},{"location":"Embedded System/c_memory_layout/#3","text":"\u4e00\u4e2a\u53ef\u6267\u884c\u7a0b\u5e8f\u5206\u4e3a\u955c\u50cf\u548c\u8fd0\u884c\u65f6\u4e24\u79cd\u72b6\u6001 \u955c\u50cf\u6587\u4ef6\u4e2d\u5305\u542b\u4ee3\u7801\u6bb5\u3001\u53ea\u8bfb\u6570\u636e\u6bb5\u3001\u8bfb\u5199\u6570\u636e\u6bb5 \u5728\u7a0b\u5e8f\u8fd0\u884c\u4e4b\u524d\u52a0\u8f7d\u7684\u8fc7\u7a0b\u4e2d\uff0c\u5c06\u52a8\u6001\u751f\u6210\u672a\u521d\u59cb\u5316\u6570\u636e\u6bb5\uff08BSS\uff09\uff0c\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6\u5c06\u52a8\u6001\u751f\u6210\u5806\uff08Heap\uff09\u548c\u6808\uff08Stack\uff09\u533a\u57df","title":"3. \u53ef\u6267\u884c\u7a0b\u5e8f\u7684\u72b6\u6001"},{"location":"Embedded System/c_micro_jing/","text":"C\u8bed\u8a00\u5b8f\u5b9a\u4e49#\u4e0e \u00b6 \"#\" \u5b57\u7b26\u4e32\u5316 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include <stdio.h> typedef struct os_thread_def { char * name ; ///< Thread name int pthread ; ///< start address of thread function int tpriority ; ///< initial thread priority int instances ; ///< maximum number of instances of that thread function int stacksize ; ///< stack size requirements in bytes; 0 is default stack size } osThreadDef_t ; #define osThreadDef(name, thread, priority, instances, stacksz) \\ const osThreadDef_t os_thread_def_##name = \\ // #name \u5c06\u53d8\u4e3aname\u5b57\u7b26\u4e32 { # name , ( thread ), ( priority ), ( instances ), ( stacksz )} int main () { osThreadDef ( defaultTask , 0 , 0 , 0 , 128 ); printf ( \"%s \\n \" , os_thread_def_defaultTask . name ); return 0 ; } \"##\" \u6807\u8bc6\u7b26\u62fc\u63a5 1 2 3 #define TEST(x) i##x TEST ( 2 ) \u76f8\u5f53\u4e8e i2","title":"C\u5b8f\u5b9a\u4e49#\u4e0e##"},{"location":"Embedded System/c_micro_jing/#c","text":"\"#\" \u5b57\u7b26\u4e32\u5316 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 #include <stdio.h> typedef struct os_thread_def { char * name ; ///< Thread name int pthread ; ///< start address of thread function int tpriority ; ///< initial thread priority int instances ; ///< maximum number of instances of that thread function int stacksize ; ///< stack size requirements in bytes; 0 is default stack size } osThreadDef_t ; #define osThreadDef(name, thread, priority, instances, stacksz) \\ const osThreadDef_t os_thread_def_##name = \\ // #name \u5c06\u53d8\u4e3aname\u5b57\u7b26\u4e32 { # name , ( thread ), ( priority ), ( instances ), ( stacksz )} int main () { osThreadDef ( defaultTask , 0 , 0 , 0 , 128 ); printf ( \"%s \\n \" , os_thread_def_defaultTask . name ); return 0 ; } \"##\" \u6807\u8bc6\u7b26\u62fc\u63a5 1 2 3 #define TEST(x) i##x TEST ( 2 ) \u76f8\u5f53\u4e8e i2","title":"C\u8bed\u8a00\u5b8f\u5b9a\u4e49#\u4e0e"},{"location":"Embedded System/c_pointer/","text":"C\u8bed\u8a00\u6307\u9488\u7cfb\u5217 \u00b6 1.\u6307\u9488\u7684\u6307\u9488(\u4e8c\u7ea7\u6307\u9488) \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 typedef struct { int * p ; } point_t ; typedef struct { point_t * point ; } test_t ; int main () { test_t test ; // \u8fd9\u4e48\u505a\u662f\u9519\u8bef\u7684\uff0c\u7a0b\u5e8f\u4f1a\u5d29\u6e83\uff0c // \u56e0\u4e3atest.point\u6307\u9488\u6307\u5411\u7684\u503c\u662f\u968f\u673a\u7684\uff0c // \u6240\u4ee5test.point->p = 0x61ff2c\u662f\u5bf9\u4e00\u4e2a\u968f\u673a\u5730\u5740\u8fdb\u884c\u8d4b\u503c\uff0c // \u8fd9\u662f\u4e0d\u6b63\u786e\u7684 test . point -> p = 0x61ff2c ; return 0 ; }","title":"C\u6307\u9488"},{"location":"Embedded System/c_pointer/#c","text":"","title":"C\u8bed\u8a00\u6307\u9488\u7cfb\u5217"},{"location":"Embedded System/c_pointer/#1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 typedef struct { int * p ; } point_t ; typedef struct { point_t * point ; } test_t ; int main () { test_t test ; // \u8fd9\u4e48\u505a\u662f\u9519\u8bef\u7684\uff0c\u7a0b\u5e8f\u4f1a\u5d29\u6e83\uff0c // \u56e0\u4e3atest.point\u6307\u9488\u6307\u5411\u7684\u503c\u662f\u968f\u673a\u7684\uff0c // \u6240\u4ee5test.point->p = 0x61ff2c\u662f\u5bf9\u4e00\u4e2a\u968f\u673a\u5730\u5740\u8fdb\u884c\u8d4b\u503c\uff0c // \u8fd9\u662f\u4e0d\u6b63\u786e\u7684 test . point -> p = 0x61ff2c ; return 0 ; }","title":"1.\u6307\u9488\u7684\u6307\u9488(\u4e8c\u7ea7\u6307\u9488)"},{"location":"Embedded System/c_pragma/","text":"#pragma pack \u00b6 1.#pragma pack\u4f7f\u7528\u8bf4\u660e \u00b6 1 2 3 #pragma pack(1) #pragma pack() \u8fd9\u662f\u7ed9\u7f16\u8bd1\u5668\u7528\u7684\u53c2\u6570\u8bbe\u7f6e\uff0c\u6709\u5173\u7ed3\u6784\u4f53\u5b57\u8282\u5bf9\u9f50\u65b9\u5f0f\u8bbe\u7f6e\uff0c #pragma pack\u662f\u6307\u5b9a\u6570\u636e\u5728\u5185\u5b58\u4e2d\u7684\u5bf9\u9f50\u65b9\u5f0f\u3002 1 2 #pragma pack (n) // C\u7f16\u8bd1\u5668\u5c06\u6309\u7167n\u4e2a\u5b57\u8282\u5bf9\u9f50\u3002 #pragma pack () // \u53d6\u6d88\u81ea\u5b9a\u4e49\u5b57\u8282\u5bf9\u9f50\u65b9\u5f0f\u3002 1 2 #pragma pack (push,1) // \u662f\u6307\u628a\u539f\u6765\u5bf9\u9f50\u65b9\u5f0f\u8bbe\u7f6e\u538b\u6808\uff0c\u5e76\u8bbe\u65b0\u7684\u5bf9\u9f50\u65b9\u5f0f\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u5b57\u8282\u5bf9\u9f50 #pragma pack(pop) // \u6062\u590d\u5bf9\u9f50\u72b6\u6001 \u56e0\u6b64\u53ef\u89c1\uff0c\u52a0\u5165push\u548cpop\u53ef\u4ee5\u4f7f\u5bf9\u9f50\u6062\u590d\u5230\u539f\u6765\u72b6\u6001\uff0c\u800c\u4e0d\u662f\u7f16\u8bd1\u5668\u9ed8\u8ba4\u3002 2.\u793a\u4f8b \u00b6 2.1\u4e0d\u4f7f\u7528#pragma pack \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #include <stdio.h> struct sample { char a ; double b ; }; int main () { struct sample sple ; sple . a = 'O' ; sple . b = 12.445 ; // \u7ed3\u679c\u662f16\uff0c\u56e0\u4e3a\u7ed3\u6784\u4f53\u5728\u5b58\u50a8\u65f6\uff0c\u662f\u4ee5\u7ed3\u6784\u4f53\u6210\u5458\u4e2d\u5360\u5185\u5b58\u6700\u591a\u7684\u6570\u636e\u7c7b\u578b\u6240\u5360\u7684\u5b57\u8282\u6570\u4e3a\u6807\u51c6\uff0c // \u6240\u6709\u7684\u6210\u5458\u5728\u5206\u914d\u5185\u5b58\u65f6\u90fd\u8981\u4e0e\u8fd9\u4e2a\u957f\u5ea6\u5bf9\u9f50\uff0c\u6240\u4ee5\u672c\u4f8b\u4e2dchar\u53608\u4e2a\u5b57\u8282\uff0cdouble\u53608\u5b57\u8282 printf ( \"%d \\n \" , sizeof ( sple )); return 0 ; 2.2\u4f7f\u7528#pragma pack \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #include <stdio.h> #pragma pack(1) // \u4f7f\u7ed3\u6784\u4f53\u63091\u5b57\u8282\u65b9\u5f0f\u5bf9\u9f50 struct sample { char a ; double b ; }; #pragma pack() int main () { struct sample sple ; sple . a = 'O' ; sple . b = 12.445 ; // \u7ed3\u679c\u662f9\uff0c\u56e0\u4e3a\u4f7f\u7528#pragma pack(1)\u540e\uff0c // \u7ed3\u6784\u4f53sample\u4e3a1\u5b57\u8282\u5bf9\u9f50\uff0cchar\u53601\u5b57\u8282\uff0cdouble\u53608\u5b57\u8282 printf ( \"%d \\n \" , sizeof ( sple )); return 0 ;","title":"pragma pack()"},{"location":"Embedded System/c_pragma/#pragma-pack","text":"","title":"#pragma pack"},{"location":"Embedded System/c_pragma/#1pragma-pack","text":"1 2 3 #pragma pack(1) #pragma pack() \u8fd9\u662f\u7ed9\u7f16\u8bd1\u5668\u7528\u7684\u53c2\u6570\u8bbe\u7f6e\uff0c\u6709\u5173\u7ed3\u6784\u4f53\u5b57\u8282\u5bf9\u9f50\u65b9\u5f0f\u8bbe\u7f6e\uff0c #pragma pack\u662f\u6307\u5b9a\u6570\u636e\u5728\u5185\u5b58\u4e2d\u7684\u5bf9\u9f50\u65b9\u5f0f\u3002 1 2 #pragma pack (n) // C\u7f16\u8bd1\u5668\u5c06\u6309\u7167n\u4e2a\u5b57\u8282\u5bf9\u9f50\u3002 #pragma pack () // \u53d6\u6d88\u81ea\u5b9a\u4e49\u5b57\u8282\u5bf9\u9f50\u65b9\u5f0f\u3002 1 2 #pragma pack (push,1) // \u662f\u6307\u628a\u539f\u6765\u5bf9\u9f50\u65b9\u5f0f\u8bbe\u7f6e\u538b\u6808\uff0c\u5e76\u8bbe\u65b0\u7684\u5bf9\u9f50\u65b9\u5f0f\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u5b57\u8282\u5bf9\u9f50 #pragma pack(pop) // \u6062\u590d\u5bf9\u9f50\u72b6\u6001 \u56e0\u6b64\u53ef\u89c1\uff0c\u52a0\u5165push\u548cpop\u53ef\u4ee5\u4f7f\u5bf9\u9f50\u6062\u590d\u5230\u539f\u6765\u72b6\u6001\uff0c\u800c\u4e0d\u662f\u7f16\u8bd1\u5668\u9ed8\u8ba4\u3002","title":"1.#pragma pack\u4f7f\u7528\u8bf4\u660e"},{"location":"Embedded System/c_pragma/#2","text":"","title":"2.\u793a\u4f8b"},{"location":"Embedded System/c_pragma/#21pragma-pack","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 #include <stdio.h> struct sample { char a ; double b ; }; int main () { struct sample sple ; sple . a = 'O' ; sple . b = 12.445 ; // \u7ed3\u679c\u662f16\uff0c\u56e0\u4e3a\u7ed3\u6784\u4f53\u5728\u5b58\u50a8\u65f6\uff0c\u662f\u4ee5\u7ed3\u6784\u4f53\u6210\u5458\u4e2d\u5360\u5185\u5b58\u6700\u591a\u7684\u6570\u636e\u7c7b\u578b\u6240\u5360\u7684\u5b57\u8282\u6570\u4e3a\u6807\u51c6\uff0c // \u6240\u6709\u7684\u6210\u5458\u5728\u5206\u914d\u5185\u5b58\u65f6\u90fd\u8981\u4e0e\u8fd9\u4e2a\u957f\u5ea6\u5bf9\u9f50\uff0c\u6240\u4ee5\u672c\u4f8b\u4e2dchar\u53608\u4e2a\u5b57\u8282\uff0cdouble\u53608\u5b57\u8282 printf ( \"%d \\n \" , sizeof ( sple )); return 0 ;","title":"2.1\u4e0d\u4f7f\u7528#pragma pack"},{"location":"Embedded System/c_pragma/#22pragma-pack","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 #include <stdio.h> #pragma pack(1) // \u4f7f\u7ed3\u6784\u4f53\u63091\u5b57\u8282\u65b9\u5f0f\u5bf9\u9f50 struct sample { char a ; double b ; }; #pragma pack() int main () { struct sample sple ; sple . a = 'O' ; sple . b = 12.445 ; // \u7ed3\u679c\u662f9\uff0c\u56e0\u4e3a\u4f7f\u7528#pragma pack(1)\u540e\uff0c // \u7ed3\u6784\u4f53sample\u4e3a1\u5b57\u8282\u5bf9\u9f50\uff0cchar\u53601\u5b57\u8282\uff0cdouble\u53608\u5b57\u8282 printf ( \"%d \\n \" , sizeof ( sple )); return 0 ;","title":"2.2\u4f7f\u7528#pragma pack"},{"location":"Embedded System/complement/","text":"\u8865\u7801 \u00b6 2019-07-13T16:03 \u201c\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\uff0c\u6570\u503c\u4e00\u5f8b\u7528\u8865\u7801\u6765\u8868\u793a\u3002\u201d \u6559\u79d1\u4e66\u4e0a\u867d\u7136\u8fd9\u4e48\u8bf4\uff0c\u4f46\u662f\u5374\u6ca1\u6709\u544a\u8bc9\u6211\u4eec\u4e3a\u4ec0\u4e48\uff0c \u4eca\u5929\u5c0f\u7f16\u5c31\u5e26\u5927\u5bb6\u4e00\u63a2\u7a76\u7adf\uff01 \u8ba1\u7b97\u673a\u6570\u503c\u8fd0\u7b97\u7684\u57fa\u7840\u786c\u4ef6\u5c31\u662f\u52a0\u6cd5\u5668\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u4ece\u52a0\u6cd5\u5668\u8bb2\u8d77\u3002 1. \u52a0\u6cd5\u5668 \u00b6 \u52a0\u6cd5\u5668\u662f\u8ba1\u7b97\u673a\u6570\u503c\u8ba1\u7b97\u7684\u6700\u57fa\u7840\u786c\u4ef6\u5355\u5143\uff0c\u52a0\u51cf\u4e58\u9664\u90fd\u662f\u4ee5\u52a0\u6cd5\u5668\u4e3a\u57fa\u7840\u5b9e\u73b0\u7684\u3002 \u52a0\u6cd5\u5668\u7684\u6784\u6210\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5176\u4e2dS\u662f\u548c\u6570\uff0cC\u662f\u8fdb\u4f4d\u3002 \u534a\u52a0\u5668 \u534a\u52a0\u5668\u7535\u8def\u662f\u6307\u5bf9\u4e24\u4e2a\u8f93\u5165\u6570\u636e\u4f4d\u76f8\u52a0\uff0c\u8f93\u51fa\u4e00\u4e2a\u7ed3\u679c\u4f4d\u548c\u8fdb\u4f4d\uff0c\u6ca1\u6709\u8fdb\u4f4d\u8f93\u5165\u7684\u52a0\u6cd5\u5668\u7535\u8def\u3002 \u662f\u5b9e\u73b0\u4e24\u4e2a\u4e00\u4f4d\u4e8c\u8fdb\u5236\u6570\u7684\u52a0\u6cd5\u8fd0\u7b97\u7535\u8def\u3002 \u5168\u52a0\u5668 \u5168\u52a0\u5668\u662f\u80fd\u591f\u8ba1\u7b97\u4f4e\u4f4d\u8fdb\u4f4d\u7684\u4e8c\u8fdb\u5236\u52a0\u6cd5\u7535\u8def\u3002\u4e0e\u534a\u52a0\u5668\u76f8\u6bd4\uff0c\u5168\u52a0\u5668\u4e0d\u53ea\u8003\u8651\u672c\u4f4d\u8ba1\u7b97\u7ed3\u679c\u662f\u5426\u6709\u8fdb\u4f4d\uff0c\u4e5f\u8003\u8651\u4e0a\u4e00\u4f4d\u5bf9\u672c\u4f4d\u7684\u8fdb\u4f4d\uff0c\u53ef\u4ee5\u628a\u591a\u4e2a\u4e00\u4f4d\u5168\u52a0\u5668\u7ea7\u8054\u540e\u505a\u6210\u591a\u4f4d\u5168\u52a0\u5668\u3002 \u4e58\u6cd5\u8fd0\u7b97\u4f9d\u8d56\u4e8e\u52a0\u6cd5\u8fd0\u7b97\uff0c\u9664\u6cd5\u8fd0\u7b97\u4f9d\u8d56\u4e8e\u51cf\u6cd5\u8fd0\u7b97\uff08\u4e58\u9664\u6cd5\u7684\u8ba1\u7b97\u539f\u7406\u8bf7\u81ea\u884c\u767e\u5ea6\uff09\u3002 \u52a0\u6cd5\u5668\u89e3\u51b3\u4e86\u52a0\u6cd5\u8fd0\u7b97\uff0c\u90a3\u4e48\u51cf\u6cd5\u8fd0\u7b97\u8be5\u600e\u4e48\u529e\u5462\uff1f \u8bbe\u8ba1\u4e00\u4e2a\u51cf\u6cd5\u5668\uff1fNO\uff01\u8bbe\u8ba1\u4e00\u4e2a\u51cf\u6cd5\u5668\u5e76\u4e0d\u5212\u7b97\uff08\u539f\u56e0\u8bf7\u81ea\u884c\u767e\u5ea6\uff09\uff0c\u6b63\u786e\u7684\u7b54\u6848\u662f\u91c7\u7528\u201c \u8865\u7801 \u201d\u3002 2. \u8865\u7801 \u00b6 \u51cf\u53bb\u4e00\u4e2a\u6570\u76f8\u5f53\u4e8e\u52a0\u4e0a\u8fd9\u4e2a\u6570\u7684\u8d1f\u6570\uff0c\u8fd9\u6837\u51cf\u6cd5\u5c31\u8f6c\u6362\u6210\u4e86\u52a0\u6cd5\u3002 \u6bd4\u5982\uff1a 1 0x33 - 0x11 ====> 0x33 + (-0x11) // \u90a3\u4e48\u5728\u8ba1\u7b97\u673a\u4e2d\u600e\u4e48\u8868\u793a-0x11\u5462\uff1f \u6240\u4ee5\u89e3\u51b3\u51cf\u6cd5\u95ee\u9898\uff0c\u5176\u5b9e\u5c31\u662f\u89e3\u51b3 \u8d1f\u6570\u7684\u8868\u793a\u95ee\u9898 \uff0c\u800c\u4f17\u6240\u5468\u77e5\uff0c\u7edd\u5bf9\u503c\u76f8\u7b49\u7684\u4e24\u4e2a\u6b63\u8d1f\u6570\u4e4b\u548c\u4e3a0\u3002 \u5047\u8bbe\u6211\u4eec\u6709\u6b63\u6570 0000 0000 0000 1111 \uff0c\u6211\u4eec\u5982\u4f55\u8868\u793a\u5176\u76f8\u53cd\u6570\u5462\uff1f \u4e00\u822c\u6211\u4eec\u7684\u601d\u8def\u662f\uff0c\u627e\u4e00\u4e2a\u6570\uff0c\u8ddf\u5b83\u76f8\u52a0\u7684\u7ed3\u679c\u7b49\u4e8e0\uff0c\u4f46\u662f\u6211\u4eec\u53d1\u73b0\uff0c \u8981\u627e\u51fa\u4e00\u4e2a\u4e0e\u5b83\u76f8\u52a0\u540e\u7ed3\u679c\u7b49\u4e8e0\u7684\u6570\u8fd8\u662f\u8981\u7565\u52a0\u601d\u8003\u4e00\u4e0b\u7684\uff0c\u56e0\u4e3a\u8981\u8ba1\u7b97\u8fdb\u4f4d\u3002 \u6240\u4ee5\uff0c\u4e3a\u4f55\u4e0d\u627e\u51fa\u4e00\u4e2a\u4e0e\u5b83\u76f8\u52a0\u540e\u7ed3\u679c\u662f 1111 1111 1111 1111 \u7684\u6570 1 \uff0c \u7136\u540e\u8be5\u6570+1\uff08+1\u6ea2\u51fa\uff0c\u6240\u4ee5\u76f8\u52a0\u7684\u548c\u5c31\u662f0\uff09\u5373\u662f\u6211\u4eec\u6240\u8981\u7684\u7b54\u6848 2 \u3002 \u4e8e\u662f\uff0c\u5f88\u5bb9\u6613\u5f97\u51fa: 1 2 3 4 5 0000 0000 0000 1111 + 1111 1111 1111 0000 // \u5148\u627e\u51fa\u76f8\u52a0\u4e3a1111 1111 1111 1111\u7684\u6570\uff0c\u65e2\u662f\u53cd\u7801 + 1 // \u7136\u540e\u518d\u52a01\uff0c\u65e2\u662f\u8865\u7801 = 1111 1111 1111 1111 + 1 = (1)0000 0000 0000 0000 \u4e00\u76ee\u4e86\u7136\uff0c\u8865\u7801 1111 1111 1111 0001 \u5c31\u662f\u6211\u4eec\u60f3\u8981\u7684\u7b54\u6848\u3002 3. \u603b\u7ed3 \u00b6 \u8865\u7801\u662f\u7528\u6765\u89e3\u51b3\u8d1f\u6570\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u8868\u793a\u95ee\u9898\u7684 \u89e3\u51b3\u8d1f\u6570\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u8868\u793a\u95ee\u9898\uff0c\u662f\u4e3a\u4e86\u89e3\u51b3\u51cf\u6cd5\u8fd0\u7b97\u95ee\u9898 \u52a0\u6cd5\u5668\u89e3\u51b3\u4e86\u52a0\u6cd5\u548c\u4e58\u6cd5\u8fd0\u7b97\u95ee\u9898\uff0c\u8865\u7801\u89e3\u51b3\u4e86\u51cf\u6cd5\u548c\u9664\u6cd5\u8fd0\u7b97\u95ee\u9898 \u6c42\u4e00\u4e2a\u6570\u7684\u53cd\u7801\uff1a\u627e\u5230\u4e0e\u8fd9\u4e2a\u6570\u76f8\u52a0\u7ed3\u679c\u4e3a 1111 1111 1111 1111 \u7684\u6570(\u65e2\u6309\u4f4d\u53d6\u53cd) \u6c42\u4e00\u4e2a\u6570\u7684\u8865\u7801\uff1a\u627e\u5230\u5176\u53cd\u7801\u7136\u540e\u52a01 \u66f4\u591a\u8d44\u8baf\uff0c\u8bf7\u626b\u7801\u5173\u6ce8\uff01 \u00b6 \u8fd9\u4e2a\u5e94\u8be5\u5c31\u662f\u53cd\u7801\u7684\u6765\u5386 \u21a9 \u8fd9\u4e2a\u5e94\u8be5\u5c31\u662f\u8865\u7801\u7684\u6765\u5386 \u21a9","title":"\u8865\u7801"},{"location":"Embedded System/complement/#_1","text":"2019-07-13T16:03 \u201c\u5728\u8ba1\u7b97\u673a\u7cfb\u7edf\u4e2d\uff0c\u6570\u503c\u4e00\u5f8b\u7528\u8865\u7801\u6765\u8868\u793a\u3002\u201d \u6559\u79d1\u4e66\u4e0a\u867d\u7136\u8fd9\u4e48\u8bf4\uff0c\u4f46\u662f\u5374\u6ca1\u6709\u544a\u8bc9\u6211\u4eec\u4e3a\u4ec0\u4e48\uff0c \u4eca\u5929\u5c0f\u7f16\u5c31\u5e26\u5927\u5bb6\u4e00\u63a2\u7a76\u7adf\uff01 \u8ba1\u7b97\u673a\u6570\u503c\u8fd0\u7b97\u7684\u57fa\u7840\u786c\u4ef6\u5c31\u662f\u52a0\u6cd5\u5668\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u4ece\u52a0\u6cd5\u5668\u8bb2\u8d77\u3002","title":"\u8865\u7801"},{"location":"Embedded System/complement/#1","text":"\u52a0\u6cd5\u5668\u662f\u8ba1\u7b97\u673a\u6570\u503c\u8ba1\u7b97\u7684\u6700\u57fa\u7840\u786c\u4ef6\u5355\u5143\uff0c\u52a0\u51cf\u4e58\u9664\u90fd\u662f\u4ee5\u52a0\u6cd5\u5668\u4e3a\u57fa\u7840\u5b9e\u73b0\u7684\u3002 \u52a0\u6cd5\u5668\u7684\u6784\u6210\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5176\u4e2dS\u662f\u548c\u6570\uff0cC\u662f\u8fdb\u4f4d\u3002 \u534a\u52a0\u5668 \u534a\u52a0\u5668\u7535\u8def\u662f\u6307\u5bf9\u4e24\u4e2a\u8f93\u5165\u6570\u636e\u4f4d\u76f8\u52a0\uff0c\u8f93\u51fa\u4e00\u4e2a\u7ed3\u679c\u4f4d\u548c\u8fdb\u4f4d\uff0c\u6ca1\u6709\u8fdb\u4f4d\u8f93\u5165\u7684\u52a0\u6cd5\u5668\u7535\u8def\u3002 \u662f\u5b9e\u73b0\u4e24\u4e2a\u4e00\u4f4d\u4e8c\u8fdb\u5236\u6570\u7684\u52a0\u6cd5\u8fd0\u7b97\u7535\u8def\u3002 \u5168\u52a0\u5668 \u5168\u52a0\u5668\u662f\u80fd\u591f\u8ba1\u7b97\u4f4e\u4f4d\u8fdb\u4f4d\u7684\u4e8c\u8fdb\u5236\u52a0\u6cd5\u7535\u8def\u3002\u4e0e\u534a\u52a0\u5668\u76f8\u6bd4\uff0c\u5168\u52a0\u5668\u4e0d\u53ea\u8003\u8651\u672c\u4f4d\u8ba1\u7b97\u7ed3\u679c\u662f\u5426\u6709\u8fdb\u4f4d\uff0c\u4e5f\u8003\u8651\u4e0a\u4e00\u4f4d\u5bf9\u672c\u4f4d\u7684\u8fdb\u4f4d\uff0c\u53ef\u4ee5\u628a\u591a\u4e2a\u4e00\u4f4d\u5168\u52a0\u5668\u7ea7\u8054\u540e\u505a\u6210\u591a\u4f4d\u5168\u52a0\u5668\u3002 \u4e58\u6cd5\u8fd0\u7b97\u4f9d\u8d56\u4e8e\u52a0\u6cd5\u8fd0\u7b97\uff0c\u9664\u6cd5\u8fd0\u7b97\u4f9d\u8d56\u4e8e\u51cf\u6cd5\u8fd0\u7b97\uff08\u4e58\u9664\u6cd5\u7684\u8ba1\u7b97\u539f\u7406\u8bf7\u81ea\u884c\u767e\u5ea6\uff09\u3002 \u52a0\u6cd5\u5668\u89e3\u51b3\u4e86\u52a0\u6cd5\u8fd0\u7b97\uff0c\u90a3\u4e48\u51cf\u6cd5\u8fd0\u7b97\u8be5\u600e\u4e48\u529e\u5462\uff1f \u8bbe\u8ba1\u4e00\u4e2a\u51cf\u6cd5\u5668\uff1fNO\uff01\u8bbe\u8ba1\u4e00\u4e2a\u51cf\u6cd5\u5668\u5e76\u4e0d\u5212\u7b97\uff08\u539f\u56e0\u8bf7\u81ea\u884c\u767e\u5ea6\uff09\uff0c\u6b63\u786e\u7684\u7b54\u6848\u662f\u91c7\u7528\u201c \u8865\u7801 \u201d\u3002","title":"1. \u52a0\u6cd5\u5668"},{"location":"Embedded System/complement/#2","text":"\u51cf\u53bb\u4e00\u4e2a\u6570\u76f8\u5f53\u4e8e\u52a0\u4e0a\u8fd9\u4e2a\u6570\u7684\u8d1f\u6570\uff0c\u8fd9\u6837\u51cf\u6cd5\u5c31\u8f6c\u6362\u6210\u4e86\u52a0\u6cd5\u3002 \u6bd4\u5982\uff1a 1 0x33 - 0x11 ====> 0x33 + (-0x11) // \u90a3\u4e48\u5728\u8ba1\u7b97\u673a\u4e2d\u600e\u4e48\u8868\u793a-0x11\u5462\uff1f \u6240\u4ee5\u89e3\u51b3\u51cf\u6cd5\u95ee\u9898\uff0c\u5176\u5b9e\u5c31\u662f\u89e3\u51b3 \u8d1f\u6570\u7684\u8868\u793a\u95ee\u9898 \uff0c\u800c\u4f17\u6240\u5468\u77e5\uff0c\u7edd\u5bf9\u503c\u76f8\u7b49\u7684\u4e24\u4e2a\u6b63\u8d1f\u6570\u4e4b\u548c\u4e3a0\u3002 \u5047\u8bbe\u6211\u4eec\u6709\u6b63\u6570 0000 0000 0000 1111 \uff0c\u6211\u4eec\u5982\u4f55\u8868\u793a\u5176\u76f8\u53cd\u6570\u5462\uff1f \u4e00\u822c\u6211\u4eec\u7684\u601d\u8def\u662f\uff0c\u627e\u4e00\u4e2a\u6570\uff0c\u8ddf\u5b83\u76f8\u52a0\u7684\u7ed3\u679c\u7b49\u4e8e0\uff0c\u4f46\u662f\u6211\u4eec\u53d1\u73b0\uff0c \u8981\u627e\u51fa\u4e00\u4e2a\u4e0e\u5b83\u76f8\u52a0\u540e\u7ed3\u679c\u7b49\u4e8e0\u7684\u6570\u8fd8\u662f\u8981\u7565\u52a0\u601d\u8003\u4e00\u4e0b\u7684\uff0c\u56e0\u4e3a\u8981\u8ba1\u7b97\u8fdb\u4f4d\u3002 \u6240\u4ee5\uff0c\u4e3a\u4f55\u4e0d\u627e\u51fa\u4e00\u4e2a\u4e0e\u5b83\u76f8\u52a0\u540e\u7ed3\u679c\u662f 1111 1111 1111 1111 \u7684\u6570 1 \uff0c \u7136\u540e\u8be5\u6570+1\uff08+1\u6ea2\u51fa\uff0c\u6240\u4ee5\u76f8\u52a0\u7684\u548c\u5c31\u662f0\uff09\u5373\u662f\u6211\u4eec\u6240\u8981\u7684\u7b54\u6848 2 \u3002 \u4e8e\u662f\uff0c\u5f88\u5bb9\u6613\u5f97\u51fa: 1 2 3 4 5 0000 0000 0000 1111 + 1111 1111 1111 0000 // \u5148\u627e\u51fa\u76f8\u52a0\u4e3a1111 1111 1111 1111\u7684\u6570\uff0c\u65e2\u662f\u53cd\u7801 + 1 // \u7136\u540e\u518d\u52a01\uff0c\u65e2\u662f\u8865\u7801 = 1111 1111 1111 1111 + 1 = (1)0000 0000 0000 0000 \u4e00\u76ee\u4e86\u7136\uff0c\u8865\u7801 1111 1111 1111 0001 \u5c31\u662f\u6211\u4eec\u60f3\u8981\u7684\u7b54\u6848\u3002","title":"2. \u8865\u7801"},{"location":"Embedded System/complement/#3","text":"\u8865\u7801\u662f\u7528\u6765\u89e3\u51b3\u8d1f\u6570\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u8868\u793a\u95ee\u9898\u7684 \u89e3\u51b3\u8d1f\u6570\u5728\u8ba1\u7b97\u673a\u4e2d\u7684\u8868\u793a\u95ee\u9898\uff0c\u662f\u4e3a\u4e86\u89e3\u51b3\u51cf\u6cd5\u8fd0\u7b97\u95ee\u9898 \u52a0\u6cd5\u5668\u89e3\u51b3\u4e86\u52a0\u6cd5\u548c\u4e58\u6cd5\u8fd0\u7b97\u95ee\u9898\uff0c\u8865\u7801\u89e3\u51b3\u4e86\u51cf\u6cd5\u548c\u9664\u6cd5\u8fd0\u7b97\u95ee\u9898 \u6c42\u4e00\u4e2a\u6570\u7684\u53cd\u7801\uff1a\u627e\u5230\u4e0e\u8fd9\u4e2a\u6570\u76f8\u52a0\u7ed3\u679c\u4e3a 1111 1111 1111 1111 \u7684\u6570(\u65e2\u6309\u4f4d\u53d6\u53cd) \u6c42\u4e00\u4e2a\u6570\u7684\u8865\u7801\uff1a\u627e\u5230\u5176\u53cd\u7801\u7136\u540e\u52a01","title":"3. \u603b\u7ed3"},{"location":"Embedded System/complement/#_2","text":"\u8fd9\u4e2a\u5e94\u8be5\u5c31\u662f\u53cd\u7801\u7684\u6765\u5386 \u21a9 \u8fd9\u4e2a\u5e94\u8be5\u5c31\u662f\u8865\u7801\u7684\u6765\u5386 \u21a9","title":"\u66f4\u591a\u8d44\u8baf\uff0c\u8bf7\u626b\u7801\u5173\u6ce8\uff01"},{"location":"Embedded System/crc16/","text":"CRC16\u8ba1\u7b97-C\u8bed\u8a00\u5b9e\u73b0 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 static const unsigned short crc16_table [ 256 ] = { 0x0000 , 0x1021 , 0x2042 , 0x3063 , 0x4084 , 0x50A5 , 0x60C6 , 0x70E7 , 0x8108 , 0x9129 , 0xA14A , 0xB16B , 0xC18C , 0xD1AD , 0xE1CE , 0xF1EF , 0x1231 , 0x0210 , 0x3273 , 0x2252 , 0x52B5 , 0x4294 , 0x72F7 , 0x62D6 , 0x9339 , 0x8318 , 0xB37B , 0xA35A , 0xD3BD , 0xC39C , 0xF3FF , 0xE3DE , 0x2462 , 0x3443 , 0x0420 , 0x1401 , 0x64E6 , 0x74C7 , 0x44A4 , 0x5485 , 0xA56A , 0xB54B , 0x8528 , 0x9509 , 0xE5EE , 0xF5CF , 0xC5AC , 0xD58D , 0x3653 , 0x2672 , 0x1611 , 0x0630 , 0x76D7 , 0x66F6 , 0x5695 , 0x46B4 , 0xB75B , 0xA77A , 0x9719 , 0x8738 , 0xF7DF , 0xE7FE , 0xD79D , 0xC7BC , 0x48C4 , 0x58E5 , 0x6886 , 0x78A7 , 0x0840 , 0x1861 , 0x2802 , 0x3823 , 0xC9CC , 0xD9ED , 0xE98E , 0xF9AF , 0x8948 , 0x9969 , 0xA90A , 0xB92B , 0x5AF5 , 0x4AD4 , 0x7AB7 , 0x6A96 , 0x1A71 , 0x0A50 , 0x3A33 , 0x2A12 , 0xDBFD , 0xCBDC , 0xFBBF , 0xEB9E , 0x9B79 , 0x8B58 , 0xBB3B , 0xAB1A , 0x6CA6 , 0x7C87 , 0x4CE4 , 0x5CC5 , 0x2C22 , 0x3C03 , 0x0C60 , 0x1C41 , 0xEDAE , 0xFD8F , 0xCDEC , 0xDDCD , 0xAD2A , 0xBD0B , 0x8D68 , 0x9D49 , 0x7E97 , 0x6EB6 , 0x5ED5 , 0x4EF4 , 0x3E13 , 0x2E32 , 0x1E51 , 0x0E70 , 0xFF9F , 0xEFBE , 0xDFDD , 0xCFFC , 0xBF1B , 0xAF3A , 0x9F59 , 0x8F78 , 0x9188 , 0x81A9 , 0xB1CA , 0xA1EB , 0xD10C , 0xC12D , 0xF14E , 0xE16F , 0x1080 , 0x00A1 , 0x30C2 , 0x20E3 , 0x5004 , 0x4025 , 0x7046 , 0x6067 , 0x83B9 , 0x9398 , 0xA3FB , 0xB3DA , 0xC33D , 0xD31C , 0xE37F , 0xF35E , 0x02B1 , 0x1290 , 0x22F3 , 0x32D2 , 0x4235 , 0x5214 , 0x6277 , 0x7256 , 0xB5EA , 0xA5CB , 0x95A8 , 0x8589 , 0xF56E , 0xE54F , 0xD52C , 0xC50D , 0x34E2 , 0x24C3 , 0x14A0 , 0x0481 , 0x7466 , 0x6447 , 0x5424 , 0x4405 , 0xA7DB , 0xB7FA , 0x8799 , 0x97B8 , 0xE75F , 0xF77E , 0xC71D , 0xD73C , 0x26D3 , 0x36F2 , 0x0691 , 0x16B0 , 0x6657 , 0x7676 , 0x4615 , 0x5634 , 0xD94C , 0xC96D , 0xF90E , 0xE92F , 0x99C8 , 0x89E9 , 0xB98A , 0xA9AB , 0x5844 , 0x4865 , 0x7806 , 0x6827 , 0x18C0 , 0x08E1 , 0x3882 , 0x28A3 , 0xCB7D , 0xDB5C , 0xEB3F , 0xFB1E , 0x8BF9 , 0x9BD8 , 0xABBB , 0xBB9A , 0x4A75 , 0x5A54 , 0x6A37 , 0x7A16 , 0x0AF1 , 0x1AD0 , 0x2AB3 , 0x3A92 , 0xFD2E , 0xED0F , 0xDD6C , 0xCD4D , 0xBDAA , 0xAD8B , 0x9DE8 , 0x8DC9 , 0x7C26 , 0x6C07 , 0x5C64 , 0x4C45 , 0x3CA2 , 0x2C83 , 0x1CE0 , 0x0CC1 , 0xEF1F , 0xFF3E , 0xCF5D , 0xDF7C , 0xAF9B , 0xBFBA , 0x8FD9 , 0x9FF8 , 0x6E17 , 0x7E36 , 0x4E55 , 0x5E74 , 0x2E93 , 0x3EB2 , 0x0ED1 , 0x1EF0 }; unsigned short crc_16 ( unsigned char * buf , int len ) { unsigned short crc = 0 ; while ( len -- > 0 ) crc = ( crc << 8 ) ^ crc16_table [(( crc >> 8 ) ^ * buf ++ ) & 0xFF ]; return crc ; }","title":"CRC16"},{"location":"Embedded System/crc16/#crc16-c","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 static const unsigned short crc16_table [ 256 ] = { 0x0000 , 0x1021 , 0x2042 , 0x3063 , 0x4084 , 0x50A5 , 0x60C6 , 0x70E7 , 0x8108 , 0x9129 , 0xA14A , 0xB16B , 0xC18C , 0xD1AD , 0xE1CE , 0xF1EF , 0x1231 , 0x0210 , 0x3273 , 0x2252 , 0x52B5 , 0x4294 , 0x72F7 , 0x62D6 , 0x9339 , 0x8318 , 0xB37B , 0xA35A , 0xD3BD , 0xC39C , 0xF3FF , 0xE3DE , 0x2462 , 0x3443 , 0x0420 , 0x1401 , 0x64E6 , 0x74C7 , 0x44A4 , 0x5485 , 0xA56A , 0xB54B , 0x8528 , 0x9509 , 0xE5EE , 0xF5CF , 0xC5AC , 0xD58D , 0x3653 , 0x2672 , 0x1611 , 0x0630 , 0x76D7 , 0x66F6 , 0x5695 , 0x46B4 , 0xB75B , 0xA77A , 0x9719 , 0x8738 , 0xF7DF , 0xE7FE , 0xD79D , 0xC7BC , 0x48C4 , 0x58E5 , 0x6886 , 0x78A7 , 0x0840 , 0x1861 , 0x2802 , 0x3823 , 0xC9CC , 0xD9ED , 0xE98E , 0xF9AF , 0x8948 , 0x9969 , 0xA90A , 0xB92B , 0x5AF5 , 0x4AD4 , 0x7AB7 , 0x6A96 , 0x1A71 , 0x0A50 , 0x3A33 , 0x2A12 , 0xDBFD , 0xCBDC , 0xFBBF , 0xEB9E , 0x9B79 , 0x8B58 , 0xBB3B , 0xAB1A , 0x6CA6 , 0x7C87 , 0x4CE4 , 0x5CC5 , 0x2C22 , 0x3C03 , 0x0C60 , 0x1C41 , 0xEDAE , 0xFD8F , 0xCDEC , 0xDDCD , 0xAD2A , 0xBD0B , 0x8D68 , 0x9D49 , 0x7E97 , 0x6EB6 , 0x5ED5 , 0x4EF4 , 0x3E13 , 0x2E32 , 0x1E51 , 0x0E70 , 0xFF9F , 0xEFBE , 0xDFDD , 0xCFFC , 0xBF1B , 0xAF3A , 0x9F59 , 0x8F78 , 0x9188 , 0x81A9 , 0xB1CA , 0xA1EB , 0xD10C , 0xC12D , 0xF14E , 0xE16F , 0x1080 , 0x00A1 , 0x30C2 , 0x20E3 , 0x5004 , 0x4025 , 0x7046 , 0x6067 , 0x83B9 , 0x9398 , 0xA3FB , 0xB3DA , 0xC33D , 0xD31C , 0xE37F , 0xF35E , 0x02B1 , 0x1290 , 0x22F3 , 0x32D2 , 0x4235 , 0x5214 , 0x6277 , 0x7256 , 0xB5EA , 0xA5CB , 0x95A8 , 0x8589 , 0xF56E , 0xE54F , 0xD52C , 0xC50D , 0x34E2 , 0x24C3 , 0x14A0 , 0x0481 , 0x7466 , 0x6447 , 0x5424 , 0x4405 , 0xA7DB , 0xB7FA , 0x8799 , 0x97B8 , 0xE75F , 0xF77E , 0xC71D , 0xD73C , 0x26D3 , 0x36F2 , 0x0691 , 0x16B0 , 0x6657 , 0x7676 , 0x4615 , 0x5634 , 0xD94C , 0xC96D , 0xF90E , 0xE92F , 0x99C8 , 0x89E9 , 0xB98A , 0xA9AB , 0x5844 , 0x4865 , 0x7806 , 0x6827 , 0x18C0 , 0x08E1 , 0x3882 , 0x28A3 , 0xCB7D , 0xDB5C , 0xEB3F , 0xFB1E , 0x8BF9 , 0x9BD8 , 0xABBB , 0xBB9A , 0x4A75 , 0x5A54 , 0x6A37 , 0x7A16 , 0x0AF1 , 0x1AD0 , 0x2AB3 , 0x3A92 , 0xFD2E , 0xED0F , 0xDD6C , 0xCD4D , 0xBDAA , 0xAD8B , 0x9DE8 , 0x8DC9 , 0x7C26 , 0x6C07 , 0x5C64 , 0x4C45 , 0x3CA2 , 0x2C83 , 0x1CE0 , 0x0CC1 , 0xEF1F , 0xFF3E , 0xCF5D , 0xDF7C , 0xAF9B , 0xBFBA , 0x8FD9 , 0x9FF8 , 0x6E17 , 0x7E36 , 0x4E55 , 0x5E74 , 0x2E93 , 0x3EB2 , 0x0ED1 , 0x1EF0 }; unsigned short crc_16 ( unsigned char * buf , int len ) { unsigned short crc = 0 ; while ( len -- > 0 ) crc = ( crc << 8 ) ^ crc16_table [(( crc >> 8 ) ^ * buf ++ ) & 0xFF ]; return crc ; }","title":"CRC16\u8ba1\u7b97-C\u8bed\u8a00\u5b9e\u73b0"},{"location":"Embedded System/dron_open_source/","text":"\u65e0\u4eba\u673a\u5f00\u6e90\u8d44\u6e90\u6c47\u603b \u00b6 1.\u98de\u63a7\u8f6f\u4ef6 \u00b6 ArduPilot PX4 2.\u98de\u63a7\u786c\u4ef6 \u00b6 \u98de\u63a7\u786c\u4ef6 3.\u5730\u9762\u7ad9 \u00b6 \u5730\u9762\u7ad9 Android\u5730\u9762\u7ad9 \u589e\u7a33\u4e91\u53f0 \u00b6 SimpleBGC32 Storm32BGC","title":"\u65e0\u4eba\u673a\u5f00\u6e90\u8d44\u6e90\u6c47\u603b"},{"location":"Embedded System/dron_open_source/#_1","text":"","title":"\u65e0\u4eba\u673a\u5f00\u6e90\u8d44\u6e90\u6c47\u603b"},{"location":"Embedded System/dron_open_source/#1","text":"ArduPilot PX4","title":"1.\u98de\u63a7\u8f6f\u4ef6"},{"location":"Embedded System/dron_open_source/#2","text":"\u98de\u63a7\u786c\u4ef6","title":"2.\u98de\u63a7\u786c\u4ef6"},{"location":"Embedded System/dron_open_source/#3","text":"\u5730\u9762\u7ad9 Android\u5730\u9762\u7ad9","title":"3.\u5730\u9762\u7ad9"},{"location":"Embedded System/dron_open_source/#_2","text":"SimpleBGC32 Storm32BGC","title":"\u589e\u7a33\u4e91\u53f0"},{"location":"Embedded System/ftp_server_build/","text":"\u672c\u6587\u5b9e\u9a8c\u73af\u5883\uff1aUbuntu16.04 64bit LTS \u00b6 \u4e00\u3001\u9996\u5148\u914d\u7f6eLinux\u4e2d\u7684FTP\u670d\u52a1 \u00b6 1. \u5b89\u88c5FTP\u670d\u52a1 \u00b6 1 sudo apt-get install vsftpd 2. \u6253\u5f00FTP\u914d\u7f6e\u6587\u4ef6 \u00b6 1 sudo vim /etc/vsftpd.conf 3. \u5c06 \u201d write_enable=YES \u201c\u524d\u7684\u6ce8\u91ca\u7b26\u53f7\u201c#\u201d\u53bb\u6389\uff0c\u4fdd\u5b58\u9000\u51fa \u00b6 4. \u67e5\u770bLinux IP\u5730\u5740 \u00b6 1 ifconfig \u5982\u679cifconfig\u540e\uff0c\u6ca1\u6709\u51fa\u73b0IP\u5730\u5740\uff0c\u8bf7\u5148\u914d\u7f6eIP\uff0c\u7136\u540e\u7ee7\u7eed\u4e0b\u9762\u6b65\u9aa4 5. \u542f\u52a8FTP\u670d\u52a1 \u00b6 1 sudo service vsftpd restart \u4e8c\u3001\u4f7f\u7528FTP\u5de5\u5177\u767b\u9646Linux \u00b6 \u5e38\u7528FTP\u5de5\u5177\u6709\u5f88\u591a\u6b3e\uff0c\u53bb\u7f51\u4e0a\u627e\u5230\u4f60\u559c\u6b22\u7684\u5c31\u597d\uff0c\u4e0b\u9762\u4ee5\u201c8uftp\u201c\u5de5\u5177\u4e3a\u4f8b\u4ecb\u7ecd\u4f7f\u7528\u65b9\u6cd5 \u66f4\u591a\u7cbe\u5f69\u8d44\u8baf\uff0c\u8bf7\u626b\u7801\u5173\u6ce8\u3002 \u00b6","title":"FTP\u670d\u52a1\u914d\u7f6e"},{"location":"Embedded System/ftp_server_build/#ubuntu1604-64bit-lts","text":"","title":"\u672c\u6587\u5b9e\u9a8c\u73af\u5883\uff1aUbuntu16.04 64bit LTS"},{"location":"Embedded System/ftp_server_build/#linuxftp","text":"","title":"\u4e00\u3001\u9996\u5148\u914d\u7f6eLinux\u4e2d\u7684FTP\u670d\u52a1"},{"location":"Embedded System/ftp_server_build/#1-ftp","text":"1 sudo apt-get install vsftpd","title":"1. \u5b89\u88c5FTP\u670d\u52a1"},{"location":"Embedded System/ftp_server_build/#2-ftp","text":"1 sudo vim /etc/vsftpd.conf","title":"2. \u6253\u5f00FTP\u914d\u7f6e\u6587\u4ef6"},{"location":"Embedded System/ftp_server_build/#3-write_enableyes","text":"","title":"3. \u5c06 \u201d write_enable=YES \u201c\u524d\u7684\u6ce8\u91ca\u7b26\u53f7\u201c#\u201d\u53bb\u6389\uff0c\u4fdd\u5b58\u9000\u51fa"},{"location":"Embedded System/ftp_server_build/#4-linux-ip","text":"1 ifconfig \u5982\u679cifconfig\u540e\uff0c\u6ca1\u6709\u51fa\u73b0IP\u5730\u5740\uff0c\u8bf7\u5148\u914d\u7f6eIP\uff0c\u7136\u540e\u7ee7\u7eed\u4e0b\u9762\u6b65\u9aa4","title":"4. \u67e5\u770bLinux IP\u5730\u5740"},{"location":"Embedded System/ftp_server_build/#5-ftp","text":"1 sudo service vsftpd restart","title":"5. \u542f\u52a8FTP\u670d\u52a1"},{"location":"Embedded System/ftp_server_build/#ftplinux","text":"\u5e38\u7528FTP\u5de5\u5177\u6709\u5f88\u591a\u6b3e\uff0c\u53bb\u7f51\u4e0a\u627e\u5230\u4f60\u559c\u6b22\u7684\u5c31\u597d\uff0c\u4e0b\u9762\u4ee5\u201c8uftp\u201c\u5de5\u5177\u4e3a\u4f8b\u4ecb\u7ecd\u4f7f\u7528\u65b9\u6cd5","title":"\u4e8c\u3001\u4f7f\u7528FTP\u5de5\u5177\u767b\u9646Linux"},{"location":"Embedded System/ftp_server_build/#_1","text":"","title":"\u66f4\u591a\u7cbe\u5f69\u8d44\u8baf\uff0c\u8bf7\u626b\u7801\u5173\u6ce8\u3002"},{"location":"Embedded System/gcc_clang_llvm/","text":"GCC\u3001Clang\u3001LLVM \u00b6","title":"GCC&Clang&LLVM\u7684\u5173\u7cfb"},{"location":"Embedded System/gcc_clang_llvm/#gccclangllvm","text":"","title":"GCC\u3001Clang\u3001LLVM"},{"location":"Embedded System/gcc_dynamic_linking_library/","text":"GCC\u7f16\u8bd1\u52a8\u6001\u94fe\u63a5\u5e93\u7b80\u4ecb \u00b6 1. \u7f16\u5199\u6d4b\u8bd5\u6587\u4ef6 \u00b6 hello.c 1 2 3 4 5 #include <stdio.h> void print_hello ( void ) { printf ( \"Hello Linux! \\n \" ); } test.c 1 2 3 4 5 6 void print_hello ( void ); int main () { print_hello (); return 0 ; } \u9a8c\u8bc1\u7a0b\u5e8f\u662f\u5426\u80fd\u88ab\u6b63\u786e\u7f16\u8bd1\u6267\u884c 1 2 gcc test.c hello.c -o test ./test 2.\u7f16\u8bd1\u52a8\u6001\u94fe\u63a5\u5e93\u5e76\u6d4b\u8bd5 \u00b6 \u5c06hello.c\u7f16\u8bd1\u4e3a\u52a8\u6001\u94fe\u63a5\u5e93 1 gcc -fpic -shared hello.c -o libhello.so \u6ce8\u610f\uff1a\u52a8\u6001\u94fe\u63a5\u5e93\u7684\u547d\u540d\u89c4\u5219\u5fc5\u987b\u662flibxxx.so\uff0c\u5176\u4e2dxxx\u662f\u4f60\u7684\u5e93\u540d \u53c2\u6570 \u542b\u4e49 -fpic \u6307\u660e\u7f16\u8bd1\u4e3a\u4f4d\u7f6e\u65e0\u5173\u7801 -shared \u6307\u660e\u7f16\u8bd1\u4e3a\u52a8\u6001\u94fe\u63a5\u5e93 \u5f15\u7528\u52a8\u6001\u94fe\u63a5\u5e93libhello.so 1 2 3 4 5 6 7 8 9 10 # \u9996\u5148\u5c06libhello.so\u6dfb\u52a0\u5230\u7cfb\u7edf\u9ed8\u8ba4\u5e93\u641c\u7d22\u76ee\u5f55 sudo cp libhello.so /usr/lib/ # \u6216\u8005 sudo cp libhello.so /lib/ # \u7f16\u8bd1test.c gcc test.c -L. -lhello -o test # \u6267\u884c ./test \u6ce8\u610f\uff1atest.c\u7684\u4f4d\u7f6e\u5fc5\u987b\u5728\u53c2\u6570 -L. -lhello \u4e4b\u524d \u53c2\u6570 \u542b\u4e49 -L. \u544a\u8bc9\u94fe\u63a5\u5668\u8981\u94fe\u63a5\u7684\u5e93\u6587\u4ef6\u5728\u5f53\u524d\u76ee\u5f55\u4e0b -lhello \u544a\u8bc9\u94fe\u63a5\u5668\u8981\u94fe\u63a5\u7684\u5e93\u7684\u540d\u5b57\u662flibhello.so \u6709\u65f6\u6211\u4eec\u5e76\u4e0d\u60f3\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u7684\u5e93\u641c\u7d22\u8def\u5f84\uff0c\u90a3\u4e48\u6307\u5b9a\u6dfb\u52a0\u81ea\u5df1\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u8def\u5f84\uff0c\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1a 1 2 3 4 5 6 7 8 # \u6253\u5f00\u6587\u4ef6 sudo vim /etc/ld.so.conf # \u7136\u540e\u5728\u5176\u672b\u5c3e\u6dfb\u52a0\u4f60\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u8def\u5f84\uff0ceg: /home/pi/mydata # \u4f7f\u914d\u7f6e\u751f\u6548 sudo ldconfig 3.\u67e5\u770b\u7a0b\u5e8f\u7684\u4f9d\u8d56\u5e93 \u00b6 1 2 3 4 5 6 $ ldd test linux-vdso.so.1 ( 0x0000007fa0ffb000 ) libhello.so = > /home/pi/mydata/libhello.so ( 0x0000007fa0f80000 ) libc.so.6 = > /lib/aarch64-linux-gnu/libc.so.6 ( 0x0000007fa0e27000 ) /lib/ld-linux-aarch64.so.1 ( 0x0000007fa0fd0000 )","title":"GCC\u7f16\u8bd1\u52a8\u6001\u94fe\u63a5\u5e93"},{"location":"Embedded System/gcc_dynamic_linking_library/#gcc","text":"","title":"GCC\u7f16\u8bd1\u52a8\u6001\u94fe\u63a5\u5e93\u7b80\u4ecb"},{"location":"Embedded System/gcc_dynamic_linking_library/#1","text":"hello.c 1 2 3 4 5 #include <stdio.h> void print_hello ( void ) { printf ( \"Hello Linux! \\n \" ); } test.c 1 2 3 4 5 6 void print_hello ( void ); int main () { print_hello (); return 0 ; } \u9a8c\u8bc1\u7a0b\u5e8f\u662f\u5426\u80fd\u88ab\u6b63\u786e\u7f16\u8bd1\u6267\u884c 1 2 gcc test.c hello.c -o test ./test","title":"1. \u7f16\u5199\u6d4b\u8bd5\u6587\u4ef6"},{"location":"Embedded System/gcc_dynamic_linking_library/#2","text":"\u5c06hello.c\u7f16\u8bd1\u4e3a\u52a8\u6001\u94fe\u63a5\u5e93 1 gcc -fpic -shared hello.c -o libhello.so \u6ce8\u610f\uff1a\u52a8\u6001\u94fe\u63a5\u5e93\u7684\u547d\u540d\u89c4\u5219\u5fc5\u987b\u662flibxxx.so\uff0c\u5176\u4e2dxxx\u662f\u4f60\u7684\u5e93\u540d \u53c2\u6570 \u542b\u4e49 -fpic \u6307\u660e\u7f16\u8bd1\u4e3a\u4f4d\u7f6e\u65e0\u5173\u7801 -shared \u6307\u660e\u7f16\u8bd1\u4e3a\u52a8\u6001\u94fe\u63a5\u5e93 \u5f15\u7528\u52a8\u6001\u94fe\u63a5\u5e93libhello.so 1 2 3 4 5 6 7 8 9 10 # \u9996\u5148\u5c06libhello.so\u6dfb\u52a0\u5230\u7cfb\u7edf\u9ed8\u8ba4\u5e93\u641c\u7d22\u76ee\u5f55 sudo cp libhello.so /usr/lib/ # \u6216\u8005 sudo cp libhello.so /lib/ # \u7f16\u8bd1test.c gcc test.c -L. -lhello -o test # \u6267\u884c ./test \u6ce8\u610f\uff1atest.c\u7684\u4f4d\u7f6e\u5fc5\u987b\u5728\u53c2\u6570 -L. -lhello \u4e4b\u524d \u53c2\u6570 \u542b\u4e49 -L. \u544a\u8bc9\u94fe\u63a5\u5668\u8981\u94fe\u63a5\u7684\u5e93\u6587\u4ef6\u5728\u5f53\u524d\u76ee\u5f55\u4e0b -lhello \u544a\u8bc9\u94fe\u63a5\u5668\u8981\u94fe\u63a5\u7684\u5e93\u7684\u540d\u5b57\u662flibhello.so \u6709\u65f6\u6211\u4eec\u5e76\u4e0d\u60f3\u4f7f\u7528\u7cfb\u7edf\u9ed8\u8ba4\u7684\u5e93\u641c\u7d22\u8def\u5f84\uff0c\u90a3\u4e48\u6307\u5b9a\u6dfb\u52a0\u81ea\u5df1\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u8def\u5f84\uff0c\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1a 1 2 3 4 5 6 7 8 # \u6253\u5f00\u6587\u4ef6 sudo vim /etc/ld.so.conf # \u7136\u540e\u5728\u5176\u672b\u5c3e\u6dfb\u52a0\u4f60\u7684\u52a8\u6001\u94fe\u63a5\u5e93\u8def\u5f84\uff0ceg: /home/pi/mydata # \u4f7f\u914d\u7f6e\u751f\u6548 sudo ldconfig","title":"2.\u7f16\u8bd1\u52a8\u6001\u94fe\u63a5\u5e93\u5e76\u6d4b\u8bd5"},{"location":"Embedded System/gcc_dynamic_linking_library/#3","text":"1 2 3 4 5 6 $ ldd test linux-vdso.so.1 ( 0x0000007fa0ffb000 ) libhello.so = > /home/pi/mydata/libhello.so ( 0x0000007fa0f80000 ) libc.so.6 = > /lib/aarch64-linux-gnu/libc.so.6 ( 0x0000007fa0e27000 ) /lib/ld-linux-aarch64.so.1 ( 0x0000007fa0fd0000 )","title":"3.\u67e5\u770b\u7a0b\u5e8f\u7684\u4f9d\u8d56\u5e93"},{"location":"Embedded System/linux_shell_cmd/","text":"Linux Shell CMD \u00b6 1. dd \u00b6 1 sudo dd if = /xx/xx/xx.img of = /dev/sdc bs = 512M if -- input file of -- output file 2. rm \u00b6 1 2 3 4 5 # \u9664file\u4e4b\u5916\u7684\u6587\u4ef6\u5168\u90e8\u5220\u9664 rm -f ! ( file ) # \u9664file1,file2,...\u4e4b\u5916\u7684\u6587\u4ef6\u5168\u90e8\u5220\u9664 rm -f ! ( file1 | file2 | ... ) 3. \u786c\u76d8\u76f8\u5173 \u00b6 \u786c\u76d8\u5206\u533a\u683c\u5f0f\u5316 1 2 3 4 5 # \u5206\u533a sudo fdisk /dev/sdx # \u683c\u5f0f\u5316 sudo mkfs.vfat /dev/sdx \u67e5\u770b\u786c\u76d8\u5bb9\u91cf\u4f7f\u7528\u60c5\u51b5 1 2 3 4 5 # \u67e5\u770b\u786c\u76d8\u5bb9\u91cf\u4f7f\u7528\u60c5\u51b5 -h --human-readable df -hl /dev/sda1 # \u67e5\u770b\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\u7684\u5927\u5c0f du -hl xxx 4. \u7f51\u7edc\u4f20\u8f93\u76f8\u5173\u547d\u4ee4 \u00b6 wget 1 2 3 4 5 6 7 wget https://ftp.gnu.org/gnu/wget/wget-latest.tar.gz # \u533f\u540d\u767b\u5f55FTP\u670d\u52a1\u5668\u5e76\u4e0b\u8f7d\u6587\u4ef6 wget ftp://192.168.10.100/fhc/wuhuanWiki/site.zip # \u4f7f\u7528\u7528\u6237\u540d\u5bc6\u7801\u767b\u5f55\u5e76\u4e0b\u8f7d\u6587\u4ef6 wget ftp://username:paswword@192.168.10.100/fhc/wuhuanWiki/site.zip scp 1 scp source_file username@host:/path 5.\u7f51\u7edc\u7ba1\u7406 \u00b6 wifi\u8fde\u63a5\u76f8\u5173\u64cd\u4f5c 1 2 3 4 5 6 7 8 9 10 11 # \u5b89\u88c5nmcli\u7f51\u7edc\u7ba1\u7406\u5de5\u5177 sudo apt-get install nmcli # \u6253\u5f00\u6216\u8005\u5173\u95edwifi sudo nmcli r wifi on/off # \u626b\u63cf\u9644\u8fd1wifi\u70ed\u70b9 sudo nmcli dev wifi # \u8fde\u63a5\u5230\u6307\u5b9a\u7684wifi\u70ed\u70b9 sudo nmcli dev wifi connect \"SSID\" password \"PASSWORD\" ifname wlan0","title":"\u5e38\u7528shell\u547d\u4ee4"},{"location":"Embedded System/linux_shell_cmd/#linux-shell-cmd","text":"","title":"Linux Shell CMD"},{"location":"Embedded System/linux_shell_cmd/#1-dd","text":"1 sudo dd if = /xx/xx/xx.img of = /dev/sdc bs = 512M if -- input file of -- output file","title":"1. dd"},{"location":"Embedded System/linux_shell_cmd/#2-rm","text":"1 2 3 4 5 # \u9664file\u4e4b\u5916\u7684\u6587\u4ef6\u5168\u90e8\u5220\u9664 rm -f ! ( file ) # \u9664file1,file2,...\u4e4b\u5916\u7684\u6587\u4ef6\u5168\u90e8\u5220\u9664 rm -f ! ( file1 | file2 | ... )","title":"2. rm"},{"location":"Embedded System/linux_shell_cmd/#3","text":"\u786c\u76d8\u5206\u533a\u683c\u5f0f\u5316 1 2 3 4 5 # \u5206\u533a sudo fdisk /dev/sdx # \u683c\u5f0f\u5316 sudo mkfs.vfat /dev/sdx \u67e5\u770b\u786c\u76d8\u5bb9\u91cf\u4f7f\u7528\u60c5\u51b5 1 2 3 4 5 # \u67e5\u770b\u786c\u76d8\u5bb9\u91cf\u4f7f\u7528\u60c5\u51b5 -h --human-readable df -hl /dev/sda1 # \u67e5\u770b\u6587\u4ef6\u6216\u8005\u6587\u4ef6\u5939\u7684\u5927\u5c0f du -hl xxx","title":"3. \u786c\u76d8\u76f8\u5173"},{"location":"Embedded System/linux_shell_cmd/#4","text":"wget 1 2 3 4 5 6 7 wget https://ftp.gnu.org/gnu/wget/wget-latest.tar.gz # \u533f\u540d\u767b\u5f55FTP\u670d\u52a1\u5668\u5e76\u4e0b\u8f7d\u6587\u4ef6 wget ftp://192.168.10.100/fhc/wuhuanWiki/site.zip # \u4f7f\u7528\u7528\u6237\u540d\u5bc6\u7801\u767b\u5f55\u5e76\u4e0b\u8f7d\u6587\u4ef6 wget ftp://username:paswword@192.168.10.100/fhc/wuhuanWiki/site.zip scp 1 scp source_file username@host:/path","title":"4. \u7f51\u7edc\u4f20\u8f93\u76f8\u5173\u547d\u4ee4"},{"location":"Embedded System/linux_shell_cmd/#5","text":"wifi\u8fde\u63a5\u76f8\u5173\u64cd\u4f5c 1 2 3 4 5 6 7 8 9 10 11 # \u5b89\u88c5nmcli\u7f51\u7edc\u7ba1\u7406\u5de5\u5177 sudo apt-get install nmcli # \u6253\u5f00\u6216\u8005\u5173\u95edwifi sudo nmcli r wifi on/off # \u626b\u63cf\u9644\u8fd1wifi\u70ed\u70b9 sudo nmcli dev wifi # \u8fde\u63a5\u5230\u6307\u5b9a\u7684wifi\u70ed\u70b9 sudo nmcli dev wifi connect \"SSID\" password \"PASSWORD\" ifname wlan0","title":"5.\u7f51\u7edc\u7ba1\u7406"},{"location":"Embedded System/linux_shell_program/","text":"Linux Shell Script Program \u00b6 \u5206\u652f\u8bed\u53e5 \u00b6 1 2 3 4 5 6 7 8 dir = /home/fhc/dir # dir\u548c=\u4e4b\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c if [ -d \" $dir \" ] # if\u548c[\u4e4b\u95f4\u5fc5\u987b\u6709\u4e00\u4e2a\u7a7a\u683c\uff0c[\u548c-d\u4e4b\u95f4\u5fc5\u987b\u6709\u4e00\u4e2a\u7a7a\u683c\uff0c \"$dir\"\u548c]\u4e4b\u95f4\u5fc5\u987b\u6709\u4e00\u4e2a\u7a7a\u683c then # then\u5fc5\u987b\u53e6\u8d77\u4e00\u884c\uff08\u6216\u8005 f [ -d \"$dir\" ];then \uff09 echo \"dir is existed!\" else echo \"dir isn't existed!\" fi -d \u5224\u65ad\u4e00\u4e2a\u6587\u4ef6\u5939\u662f\u5426\u5b58\u5728 \u987a\u5e8f\u6267\u884c\u6307\u4ee4 \u00b6 \u4e0a\u4e00\u6761\u6307\u4ee4\u6267\u884c\u5b8c\u6bd5\u624d\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4 1 2 3 4 # \u5c06\u6307\u4ee4\u7684\u8fd4\u56de\u503c\u8d4b\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u6837\u672c\u6761\u6307\u4ee4\u6267\u884c\u5b8c\u6bd5\uff0c\u624d\u4f1a\u7ee7\u7eed\u5411\u4e0b\u6267\u884c rm_ok = ` sudo rm /var/www/html/* ` cp_ok = ` sudo cp xxx xxx `","title":"Linux Shell\u811a\u672c\u7f16\u7a0b"},{"location":"Embedded System/linux_shell_program/#linux-shell-script-program","text":"","title":"Linux Shell Script Program"},{"location":"Embedded System/linux_shell_program/#_1","text":"1 2 3 4 5 6 7 8 dir = /home/fhc/dir # dir\u548c=\u4e4b\u95f4\u4e0d\u80fd\u6709\u7a7a\u683c if [ -d \" $dir \" ] # if\u548c[\u4e4b\u95f4\u5fc5\u987b\u6709\u4e00\u4e2a\u7a7a\u683c\uff0c[\u548c-d\u4e4b\u95f4\u5fc5\u987b\u6709\u4e00\u4e2a\u7a7a\u683c\uff0c \"$dir\"\u548c]\u4e4b\u95f4\u5fc5\u987b\u6709\u4e00\u4e2a\u7a7a\u683c then # then\u5fc5\u987b\u53e6\u8d77\u4e00\u884c\uff08\u6216\u8005 f [ -d \"$dir\" ];then \uff09 echo \"dir is existed!\" else echo \"dir isn't existed!\" fi -d \u5224\u65ad\u4e00\u4e2a\u6587\u4ef6\u5939\u662f\u5426\u5b58\u5728","title":"\u5206\u652f\u8bed\u53e5"},{"location":"Embedded System/linux_shell_program/#_2","text":"\u4e0a\u4e00\u6761\u6307\u4ee4\u6267\u884c\u5b8c\u6bd5\u624d\u6267\u884c\u4e0b\u4e00\u6761\u6307\u4ee4 1 2 3 4 # \u5c06\u6307\u4ee4\u7684\u8fd4\u56de\u503c\u8d4b\u7ed9\u4e00\u4e2a\u53d8\u91cf\uff0c\u8fd9\u6837\u672c\u6761\u6307\u4ee4\u6267\u884c\u5b8c\u6bd5\uff0c\u624d\u4f1a\u7ee7\u7eed\u5411\u4e0b\u6267\u884c rm_ok = ` sudo rm /var/www/html/* ` cp_ok = ` sudo cp xxx xxx `","title":"\u987a\u5e8f\u6267\u884c\u6307\u4ee4"},{"location":"Embedded System/nanopc_m4/","text":"NanoPC RK3399 \u00b6 1. \u547d\u4ee4\u884c\u8fde\u63a5WiFi \u00b6 \u5207\u6362\u5230root\u8d26\u6237 1 $ su root \u67e5\u770b\u7f51\u7edc\u8bbe\u5907\u5217\u8868 1 $ nmcli dev \u6ce8\u610f\uff0c\u5982\u679c\u5217\u51fa\u7684\u8bbe\u5907\u72b6\u6001\u662f unmanaged \u7684\uff0c\u8bf4\u660e\u7f51\u7edc\u8bbe\u5907\u4e0d\u53d7NetworkManager\u7ba1\u7406\uff0c\u4f60\u9700\u8981\u6e05\u7a7a /etc/network/interfaces\u4e0b\u7684\u7f51\u7edc\u8bbe\u7f6e,\u7136\u540e\u91cd\u542f. \u5f00\u542fWiFi 1 $ nmcli r wifi on \u626b\u63cf\u9644\u8fd1\u7684 WiFi \u70ed\u70b9 1 $ nmcli dev wifi \u8fde\u63a5\u5230\u6307\u5b9a\u7684 WiFi \u70ed\u70b9 1 $ nmcli dev wifi connect \"SSID\" password \"PASSWORD\" ifname wlan0 \u8bf7\u5c06 SSID\u548c PASSWORD \u66ff\u6362\u6210\u5b9e\u9645\u7684 WiFi\u540d\u79f0\u548c\u5bc6\u7801\u3002 \u8fde\u63a5\u6210\u529f\u540e\uff0c\u4e0b\u6b21\u5f00\u673a\uff0cWiFi \u4e5f\u4f1a\u81ea\u52a8\u8fde\u63a5\u3002","title":"NanoPC RK3399"},{"location":"Embedded System/nanopc_m4/#nanopc-rk3399","text":"","title":"NanoPC RK3399"},{"location":"Embedded System/nanopc_m4/#1-wifi","text":"\u5207\u6362\u5230root\u8d26\u6237 1 $ su root \u67e5\u770b\u7f51\u7edc\u8bbe\u5907\u5217\u8868 1 $ nmcli dev \u6ce8\u610f\uff0c\u5982\u679c\u5217\u51fa\u7684\u8bbe\u5907\u72b6\u6001\u662f unmanaged \u7684\uff0c\u8bf4\u660e\u7f51\u7edc\u8bbe\u5907\u4e0d\u53d7NetworkManager\u7ba1\u7406\uff0c\u4f60\u9700\u8981\u6e05\u7a7a /etc/network/interfaces\u4e0b\u7684\u7f51\u7edc\u8bbe\u7f6e,\u7136\u540e\u91cd\u542f. \u5f00\u542fWiFi 1 $ nmcli r wifi on \u626b\u63cf\u9644\u8fd1\u7684 WiFi \u70ed\u70b9 1 $ nmcli dev wifi \u8fde\u63a5\u5230\u6307\u5b9a\u7684 WiFi \u70ed\u70b9 1 $ nmcli dev wifi connect \"SSID\" password \"PASSWORD\" ifname wlan0 \u8bf7\u5c06 SSID\u548c PASSWORD \u66ff\u6362\u6210\u5b9e\u9645\u7684 WiFi\u540d\u79f0\u548c\u5bc6\u7801\u3002 \u8fde\u63a5\u6210\u529f\u540e\uff0c\u4e0b\u6b21\u5f00\u673a\uff0cWiFi \u4e5f\u4f1a\u81ea\u52a8\u8fde\u63a5\u3002","title":"1. \u547d\u4ee4\u884c\u8fde\u63a5WiFi"},{"location":"Embedded System/pkg_config/","text":"pkg-config \u00b6 1 2 3 4 5 pkg-config --libs --cflags opus -I/home/fhc/opus/local_build/include/opus -L/home/fhc/opus/local_build/lib -lopus gcc trivial_example.c ` pkg-config `","title":"pkg-config"},{"location":"Embedded System/pkg_config/#pkg-config","text":"1 2 3 4 5 pkg-config --libs --cflags opus -I/home/fhc/opus/local_build/include/opus -L/home/fhc/opus/local_build/lib -lopus gcc trivial_example.c ` pkg-config `","title":"pkg-config"},{"location":"Embedded System/samba/","text":"Samba \u00b6 \u4e00\u3001\u5b89\u88c5 \u00b6 1 sudo apt-get install samba Samba\u670d\u52a1\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u5934 \u901a\u8fc7 man 5 smb.conf\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f \"#\"\u6ce8\u91ca\u548c\";\"\u6ce8\u91ca\u7684\u533a\u522b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # Sample configuration file for the Samba suite for Debian GNU/Linux. # # # This is the main Samba configuration file. You should read the # smb.conf(5) manual page in order to understand the options listed # here. Samba has a huge number of configurable options most of which # are not shown in this example # # Some options that are often worth tuning have been included as # commented-out examples in this file. # - When such options are commented with \";\", the proposed setting # differs from the default Samba behaviour # - When commented with \"#\", the proposed setting is the default # behaviour of Samba but the option is considered important # enough to be mentioned here # # NOTE: Whenever you modify this file you should run the command # \"testparm\" to check that you have not made any basic syntactic # errors. \u4e8c\u3001\u914d\u7f6e \u00b6 2.1. \u6253\u5f00Samba\u914d\u7f6e\u6587\u4ef6 1 sudo vim /etc/samba/smb.conf 2.2. \u914d\u7f6e\u5171\u4eabHome\u76ee\u5f55 \u5047\u5982\u4f60\u53ea\u6709\u4e00\u4e2asamba\u7528\u6237\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u5171\u4eabHome\u76ee\u5f55\u5373\u53ef\u6ee1\u8db3\u9700\u6c42\u3002 \u591a\u4eba\u4f7f\u7528\u7684Samba\u670d\u52a1\uff0c\u8bf7\u53c2\u770b2.3\u8282 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 # Un-comment the following (and tweak the other settings below to suit) # to enable the default home directory shares. This will share each # user's home directory as \\\\server\\username [ homes ] comment = Home Directories browseable = no #\u4e0d\u5141\u8bb8\u6d4f\u89c8\uff0c\u5176\u4ed6\u7528\u6237\u767b\u5f55\u65f6\u770b\u4e0d\u5230\u6b64\u6587\u4ef6\u5939 # By default, the home directories are exported read-only. Change the # next parameter to 'no' if you want to be able to write to them. read only = no # File creation mask is set to 0700 for security reasons. If you want to # create files with group=rw permissions, set next parameter to 0775. ; create mask = 0700 # Directory creation mask is set to 0700 for security reasons. If you want to # create dirs. with group=rw permissions, set next parameter to 0775. ; directory mask = 0700 # By default, \\\\server\\username shares can be connected to by anyone # with access to the samba server. # Un-comment the following parameter to make sure that only \"username\" # can connect to \\\\server\\username # This might need tweaking when using external authentication schemes ; valid users = %S \"#\"\u6ce8\u91ca\u548c\";\"\u6ce8\u91ca\u7684\u533a\u522b\uff0c\u8bf7\u53c2\u770bsmb.conf\u6587\u4ef6\u5934\u90e8 valid users = xxx,yyy,zzz \u201c\u6709\u6548\u7684\u8bbf\u95ee\u7528\u6237\u201d \u6307\u7684\u662f\u53ea\u6709\u7528\u6237xxx,yyy,zzz\u624d\u53ef\u4ee5\u8bbf\u95ee\\server\\xxx valid users = %S \u5176\u4e2d%S\u6307\u7684\u662f\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237 2.3. \u4e3a\u7279\u5b9a\u7684\u7528\u6237\u6307\u5b9a\u5171\u4eab\u6587\u4ef6\u5939 1 2 3 4 5 6 7 8 [ xxx ' s shared folder ] comment = Home Directories path = /home/xxx/sharedFolder browseable = no #\u4e0d\u5141\u8bb8\u6d4f\u89c8\uff0c\u5176\u4ed6\u7528\u6237\u767b\u5f55\u65f6\u770b\u4e0d\u5230\u6b64\u6587\u4ef6\u5939 read only = no #\u53ef\u8bfb\u5199 create mask = 0700 #\u65b0\u5efa\u6587\u4ef6\u6743\u9650\uff0c\u6839\u636e\u81ea\u5df1\u9700\u6c42\u914d\u7f6e directory mask = 0700 #\u65b0\u5efa\u6587\u4ef6\u5939\u6743\u9650\uff0c\u6839\u636e\u81ea\u5df1\u9700\u6c42\u914d\u7f6e valid users = xxx #\u6307\u5b9a\u6709\u6548\u7528\u6237 \u901a\u8fc7create mask\u548cdirectory mask\u63a7\u5236\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7684\u8bbf\u95ee\u6743\u9650 \u53ef\u4f7f\u7528\u5206\u7ec4\u7684\u5f62\u5f0f\uff0c\u5b9e\u73b0\u4e0d\u540c\u7528\u6237\u62e5\u6709\u4e0d\u540c\u7684\u8bbf\u95ee\u6743\u9650 [Optional]\u901a\u8fc7Samba\u670d\u52a1\u914d\u7f6e\u6587\u4ef6write list = user1,user2 \u4e09\u3001\u5e38\u7528\u6307\u4ee4 \u00b6 Warning \u5728\u67d0\u4e9b\u7535\u8111\u4e0a\uff0c\u6709\u65f6restart\u914d\u7f6e\u4e0d\u80fd\u91cd\u65b0\u751f\u6548\uff0c\u53ea\u80fd\u5148stop\u7136\u540e\u5728start\uff0c\u5177\u4f53\u539f\u56e0\u6ca1\u6709\u6df1\u7a76 1 2 3 4 5 sudo service smbd status #\u67e5\u770bsmd\u670d\u52a1\u7684\u72b6\u6001 sudo service smbd start #\u8fd0\u884csmb\u670d\u52a1 sudo service smbd stop #\u505c\u6b62\u670d\u52a1 sudo service smbd restart #\u91cd\u542f\u670d\u52a1\uff0c\u4f46\u5728\u5b9e\u9645\u4e2d\u4e00\u822c\u4e0d\u91c7\u7528 sudo service smbd reload #\u91cd\u8f7d\u670d\u52a1\uff0c\u5728\u5b9e\u9645\u4e2d\u8f83\u5e38\u7528\uff0c\u4e0d\u7528\u505c\u6b62\u670d\u52a1 \u56db\u3001\u521b\u5efasamba\u7528\u6237 \u00b6 Warning \u666e\u901a\u7528\u6237\u4e0d\u53ef\u7528\uff0c\u5fc5\u987b\u4f7f\u7528smbpasswd\u521b\u5efasamba\u7528\u6237! 1 2 useradd tst1_samba sudo smbpasswd -a tst1_samba # -a add user \u4e94\u3001Windows\u4e0b\u6ce8\u9500\u7528\u6237 \u00b6 1 net use * /del \u516d\u3001\u53c2\u8003\u94fe\u63a5 \u00b6 Important \u53c2\u8003\u94fe\u63a5\uff0c\u5f88\u91cd\u8981\uff01\uff01\uff01 smb.conf man 5 smb.conf","title":"samba\u670d\u52a1\u914d\u7f6e"},{"location":"Embedded System/samba/#samba","text":"","title":"Samba"},{"location":"Embedded System/samba/#_1","text":"1 sudo apt-get install samba Samba\u670d\u52a1\u9ed8\u8ba4\u914d\u7f6e\u6587\u4ef6\u5934 \u901a\u8fc7 man 5 smb.conf\u67e5\u770b\u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4fe1\u606f \"#\"\u6ce8\u91ca\u548c\";\"\u6ce8\u91ca\u7684\u533a\u522b 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 # Sample configuration file for the Samba suite for Debian GNU/Linux. # # # This is the main Samba configuration file. You should read the # smb.conf(5) manual page in order to understand the options listed # here. Samba has a huge number of configurable options most of which # are not shown in this example # # Some options that are often worth tuning have been included as # commented-out examples in this file. # - When such options are commented with \";\", the proposed setting # differs from the default Samba behaviour # - When commented with \"#\", the proposed setting is the default # behaviour of Samba but the option is considered important # enough to be mentioned here # # NOTE: Whenever you modify this file you should run the command # \"testparm\" to check that you have not made any basic syntactic # errors.","title":"\u4e00\u3001\u5b89\u88c5"},{"location":"Embedded System/samba/#_2","text":"2.1. \u6253\u5f00Samba\u914d\u7f6e\u6587\u4ef6 1 sudo vim /etc/samba/smb.conf 2.2. \u914d\u7f6e\u5171\u4eabHome\u76ee\u5f55 \u5047\u5982\u4f60\u53ea\u6709\u4e00\u4e2asamba\u7528\u6237\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u5171\u4eabHome\u76ee\u5f55\u5373\u53ef\u6ee1\u8db3\u9700\u6c42\u3002 \u591a\u4eba\u4f7f\u7528\u7684Samba\u670d\u52a1\uff0c\u8bf7\u53c2\u770b2.3\u8282 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 # Un-comment the following (and tweak the other settings below to suit) # to enable the default home directory shares. This will share each # user's home directory as \\\\server\\username [ homes ] comment = Home Directories browseable = no #\u4e0d\u5141\u8bb8\u6d4f\u89c8\uff0c\u5176\u4ed6\u7528\u6237\u767b\u5f55\u65f6\u770b\u4e0d\u5230\u6b64\u6587\u4ef6\u5939 # By default, the home directories are exported read-only. Change the # next parameter to 'no' if you want to be able to write to them. read only = no # File creation mask is set to 0700 for security reasons. If you want to # create files with group=rw permissions, set next parameter to 0775. ; create mask = 0700 # Directory creation mask is set to 0700 for security reasons. If you want to # create dirs. with group=rw permissions, set next parameter to 0775. ; directory mask = 0700 # By default, \\\\server\\username shares can be connected to by anyone # with access to the samba server. # Un-comment the following parameter to make sure that only \"username\" # can connect to \\\\server\\username # This might need tweaking when using external authentication schemes ; valid users = %S \"#\"\u6ce8\u91ca\u548c\";\"\u6ce8\u91ca\u7684\u533a\u522b\uff0c\u8bf7\u53c2\u770bsmb.conf\u6587\u4ef6\u5934\u90e8 valid users = xxx,yyy,zzz \u201c\u6709\u6548\u7684\u8bbf\u95ee\u7528\u6237\u201d \u6307\u7684\u662f\u53ea\u6709\u7528\u6237xxx,yyy,zzz\u624d\u53ef\u4ee5\u8bbf\u95ee\\server\\xxx valid users = %S \u5176\u4e2d%S\u6307\u7684\u662f\u5f53\u524d\u767b\u5f55\u7684\u7528\u6237 2.3. \u4e3a\u7279\u5b9a\u7684\u7528\u6237\u6307\u5b9a\u5171\u4eab\u6587\u4ef6\u5939 1 2 3 4 5 6 7 8 [ xxx ' s shared folder ] comment = Home Directories path = /home/xxx/sharedFolder browseable = no #\u4e0d\u5141\u8bb8\u6d4f\u89c8\uff0c\u5176\u4ed6\u7528\u6237\u767b\u5f55\u65f6\u770b\u4e0d\u5230\u6b64\u6587\u4ef6\u5939 read only = no #\u53ef\u8bfb\u5199 create mask = 0700 #\u65b0\u5efa\u6587\u4ef6\u6743\u9650\uff0c\u6839\u636e\u81ea\u5df1\u9700\u6c42\u914d\u7f6e directory mask = 0700 #\u65b0\u5efa\u6587\u4ef6\u5939\u6743\u9650\uff0c\u6839\u636e\u81ea\u5df1\u9700\u6c42\u914d\u7f6e valid users = xxx #\u6307\u5b9a\u6709\u6548\u7528\u6237 \u901a\u8fc7create mask\u548cdirectory mask\u63a7\u5236\u6587\u4ef6\u548c\u6587\u4ef6\u5939\u7684\u8bbf\u95ee\u6743\u9650 \u53ef\u4f7f\u7528\u5206\u7ec4\u7684\u5f62\u5f0f\uff0c\u5b9e\u73b0\u4e0d\u540c\u7528\u6237\u62e5\u6709\u4e0d\u540c\u7684\u8bbf\u95ee\u6743\u9650 [Optional]\u901a\u8fc7Samba\u670d\u52a1\u914d\u7f6e\u6587\u4ef6write list = user1,user2","title":"\u4e8c\u3001\u914d\u7f6e"},{"location":"Embedded System/samba/#_3","text":"Warning \u5728\u67d0\u4e9b\u7535\u8111\u4e0a\uff0c\u6709\u65f6restart\u914d\u7f6e\u4e0d\u80fd\u91cd\u65b0\u751f\u6548\uff0c\u53ea\u80fd\u5148stop\u7136\u540e\u5728start\uff0c\u5177\u4f53\u539f\u56e0\u6ca1\u6709\u6df1\u7a76 1 2 3 4 5 sudo service smbd status #\u67e5\u770bsmd\u670d\u52a1\u7684\u72b6\u6001 sudo service smbd start #\u8fd0\u884csmb\u670d\u52a1 sudo service smbd stop #\u505c\u6b62\u670d\u52a1 sudo service smbd restart #\u91cd\u542f\u670d\u52a1\uff0c\u4f46\u5728\u5b9e\u9645\u4e2d\u4e00\u822c\u4e0d\u91c7\u7528 sudo service smbd reload #\u91cd\u8f7d\u670d\u52a1\uff0c\u5728\u5b9e\u9645\u4e2d\u8f83\u5e38\u7528\uff0c\u4e0d\u7528\u505c\u6b62\u670d\u52a1","title":"\u4e09\u3001\u5e38\u7528\u6307\u4ee4"},{"location":"Embedded System/samba/#samba_1","text":"Warning \u666e\u901a\u7528\u6237\u4e0d\u53ef\u7528\uff0c\u5fc5\u987b\u4f7f\u7528smbpasswd\u521b\u5efasamba\u7528\u6237! 1 2 useradd tst1_samba sudo smbpasswd -a tst1_samba # -a add user","title":"\u56db\u3001\u521b\u5efasamba\u7528\u6237"},{"location":"Embedded System/samba/#windows","text":"1 net use * /del","title":"\u4e94\u3001Windows\u4e0b\u6ce8\u9500\u7528\u6237"},{"location":"Embedded System/samba/#_4","text":"Important \u53c2\u8003\u94fe\u63a5\uff0c\u5f88\u91cd\u8981\uff01\uff01\uff01 smb.conf man 5 smb.conf","title":"\u516d\u3001\u53c2\u8003\u94fe\u63a5"},{"location":"Embedded System/typedef_tips/","text":"typedef\u4f7f\u7528\u6ce8\u610f \u00b6 1 2 3 4 /* opus.c */ struct opus { int Fs ; }; \u53d8\u91cf\u5b9a\u4e49\u4e0d\u5728\u672c\u6587\u4ef6\u5185\uff0c\u53ea\u6709typedef\u5b9a\u65f6\u662f\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\u7684 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 /* main.c */ #include <stdio.h> #include <stdlib.h> typedef struct opus opus ; int main () { opus * test_opus ; // it is ok // test_opus->Fs = 10; // it is error printf ( \"Hello\" ); return 0 ; }","title":"typedef\u4f7f\u7528\u6ce8\u610f"},{"location":"Embedded System/typedef_tips/#typedef","text":"1 2 3 4 /* opus.c */ struct opus { int Fs ; }; \u53d8\u91cf\u5b9a\u4e49\u4e0d\u5728\u672c\u6587\u4ef6\u5185\uff0c\u53ea\u6709typedef\u5b9a\u65f6\u662f\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528\u7684 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 /* main.c */ #include <stdio.h> #include <stdlib.h> typedef struct opus opus ; int main () { opus * test_opus ; // it is ok // test_opus->Fs = 10; // it is error printf ( \"Hello\" ); return 0 ; }","title":"typedef\u4f7f\u7528\u6ce8\u610f"},{"location":"Embedded System/zigbee_keys/","text":"Z-Stack Keys\u5904\u7406\u673a\u5236 \u00b6 1\u3001\u5b9a\u65f6\u5668\u8f6e\u8bad\u673a\u5236 \u00b6 \u5728\u914d\u7f6e\u7684\u65f6\u5019\u53d1\u9001\u4e00\u4e2a\u201c\u6309\u952e\u4e8b\u4ef6\u201d\uff0c\u5728\u5bf9\u5e94\u7684\u201c\u6309\u952e\u4e8b\u4ef6\u201d\u5904\u7406\u51fd\u6570\u4e2d\uff0c\u518d\u6b21\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff0c\u5f62\u6210\u5faa\u73af 2\u3001\u6309\u952e\u4e2d\u65ad\u673a\u5236 \u00b6 \u5728\u914d\u7f6e\u65f6\u8bbe\u7f6e\u6309\u952e\u4e2d\u65ad\u5e76\u914d\u7f6e\u56de\u8c03\u51fd\u6570\uff0c\u5728\u4e2d\u65ad\u51fd\u6570\u4e2d\u8c03\u7528\u56de\u8c03\u51fd\u6570","title":"Zigbee"},{"location":"Embedded System/zigbee_keys/#z-stack-keys","text":"","title":"Z-Stack Keys\u5904\u7406\u673a\u5236"},{"location":"Embedded System/zigbee_keys/#1","text":"\u5728\u914d\u7f6e\u7684\u65f6\u5019\u53d1\u9001\u4e00\u4e2a\u201c\u6309\u952e\u4e8b\u4ef6\u201d\uff0c\u5728\u5bf9\u5e94\u7684\u201c\u6309\u952e\u4e8b\u4ef6\u201d\u5904\u7406\u51fd\u6570\u4e2d\uff0c\u518d\u6b21\u8bbe\u7f6e\u5b9a\u65f6\u5668\uff0c\u5f62\u6210\u5faa\u73af","title":"1\u3001\u5b9a\u65f6\u5668\u8f6e\u8bad\u673a\u5236"},{"location":"Embedded System/zigbee_keys/#2","text":"\u5728\u914d\u7f6e\u65f6\u8bbe\u7f6e\u6309\u952e\u4e2d\u65ad\u5e76\u914d\u7f6e\u56de\u8c03\u51fd\u6570\uff0c\u5728\u4e2d\u65ad\u51fd\u6570\u4e2d\u8c03\u7528\u56de\u8c03\u51fd\u6570","title":"2\u3001\u6309\u952e\u4e2d\u65ad\u673a\u5236"},{"location":"Embedded System/STM32/stm32_adc/","text":"STM32 ADC \u00b6 1. AWD \u00b6 \u6bcf\u4e2aADC\u90fd\u6709\u4e00\u4e2aAWD AWD\u5fc5\u987b\u7ed1\u5b9a\u5728\u6307\u5b9a\u7684ADC\u901a\u9053\u4e0a 2. \u8f6c\u6362\u65f6\u95f4 \u00b6","title":"STM32 ADC"},{"location":"Embedded System/STM32/stm32_adc/#stm32-adc","text":"","title":"STM32 ADC"},{"location":"Embedded System/STM32/stm32_adc/#1-awd","text":"\u6bcf\u4e2aADC\u90fd\u6709\u4e00\u4e2aAWD AWD\u5fc5\u987b\u7ed1\u5b9a\u5728\u6307\u5b9a\u7684ADC\u901a\u9053\u4e0a","title":"1. AWD"},{"location":"Embedded System/STM32/stm32_adc/#2","text":"","title":"2. \u8f6c\u6362\u65f6\u95f4"},{"location":"Embedded System/STM32/stm32_flash_erase_leveling/","text":"STM32\u5185\u90e8Flash\u4f7f\u7528\u78e8\u635f\u5747\u8861\u7b97\u6cd5(Erase Leveling) \u00b6 STM32\u5185\u90e8Flash\u7684\u5199\u5bff\u547d\u5927\u7ea6\u662f1\u4e07\u6b21\uff0c\u5047\u5982\u6211\u4eec\u5728\u5176Flash\u4e2d\u5b58\u50a8\u6570\u636e\uff0c\u6bcf\u5929100\u6b21\u5199\u64cd\u4f5c\uff0c100\u5929\u540eFlash\u5c31\u65e0\u6cd5\u7ee7\u7eed\u53ef\u9760\u4f7f\u7528\u4e86\uff0c \u672c\u6587\u91c7\u53d6\u4e86\u4e00\u79cd\u975e\u5e38\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5c06Flash\u7684\u4f7f\u7528\u5bff\u547d\u5ef6\u957f\u4e861024\u500d\uff08\u4ec5\u9650\u672c\u6587\u8bd5\u9a8c\u73af\u5883\u4e0b\uff09\u3002 1. \u8bbe\u8ba1\u601d\u8def \u00b6 \u672c\u5b9e\u9a8c\u4ee5\u4e00\u9875Flash\u7684\u64cd\u4f5c\u4e3a\u4f8b\u3002\u6211\u4eec\u6309\u7167\u7279\u5b9a\u683c\u5f0f\u5c06\u6570\u636e\u4e00\u6761\u4e00\u6761\u7684\u5199\u8fdbFlash\uff0c\u5728\u5199\u5165\u65b0\u7684\u6570\u636e\u524d\u5c06\u65e7\u6570\u636e\u6e05\u96f6\uff0c \u4fdd\u8bc1Flash\u4e2d\u6709\u6548\u6570\u636e\u7684\u552f\u4e00\u6027\uff0c\u76f4\u5230\u672c\u9875\u5199\u6ee1\u540e\uff0c\u624d\u5c06\u672c\u9875\u64e6\u9664\uff0c\u6545\u6781\u5927\u7684\u5ef6\u957f\u4e86Flash\u7684\u4f7f\u7528\u5bff\u547d\u3002 \u82af\u7247\uff1aSTM32F103ZET6 \u8f6f\u4ef6\uff1aSTM32CubeHAL Flash Page Size\uff1a2K \u4f7f\u7528Flash\u7684\u4e00\u9875Page60(0x0801E000 ~ 0x0801E800(\u4e0d\u5305\u542b))\u8fdb\u884c\u78e8\u635f\u5747\u8861\u7b97\u6cd5\u8bd5\u9a8c \u6570\u636e\u5e27\u683c\u5f0f\uff1a |0x5A|data1|data2|0xA5| \u672c\u5b9e\u9a8cFlash\u5b58\u50a8\u6a21\u578b\u5982\u4e0b\uff1a \u9996\u5148\u5c06Page60\u64e6\u9664\uff0c\u64e6\u9664\u540ePage60\u9875\u4e2d\u7684\u6570\u636e\u5168\u4e3a1\u3002 \u6bcf\u6b21\u5199\u5165\u6570\u636e\u65f6\uff0c\u4f1a\u987a\u6b21\u5bfb\u627e\u6570\u503cFF\uff08\u672a\u5199\u5165\u6570\u636e\u7684\uff09\uff0c\u627e\u5230\u540e\u5199\u5165\u6570\u636e\uff0c\u540c\u65f6\u5c06\u5148\u524d\u7684\u6709\u6548\u6570\u636e\u7f6e\u4e3a0\uff0c\u82e5\u672a\u627e\u5230FF\uff0c\u5219\u8868\u660e\u6570\u636e\u5df2\u5199\u6ee1\uff0c\u5c06\u64e6\u9664\u6574\u9875\uff0c\u4ece\u5934\u5f00\u59cb\u5199 \u6bcf\u6b21\u8bfb\u51fa\u6570\u636e\u65f6\uff0c\u4f1a\u987a\u6b21\u5bfb\u627e\u6570\u503c5A\uff08\u6709\u6548\u6570\u636e\uff09\uff0c\u7136\u540e\u8bfb\u51fa4\u4e2a\u5b57\u8282\uff0c\u82e5\u672a\u627e\u5230\u6570\u503c5A\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u78010 2. \u5b9e\u73b0\u4ee3\u7801 \u00b6 \u4e00\u5171\u67093\u4e2a\u6587\u4ef6\uff0cflash_wear_leveling.h\u3001flash_wear_leveling.c\u548cexample.c\uff0cflash_wear_leveling.h\u548cflash_wear_leveling.c\u662f \u78e8\u635f\u5747\u8861\u7b97\u6cd5\u7684\u5b9e\u73b0\uff0cexample.c\u662f\u4f7f\u7528\u4e3e\u4f8b\u3002 \u76f4\u63a5\u8bbf\u95ee\u6211\u7684Gist\u83b7\u53d6\u6700\u65b0\u4ee3\u7801 flash_wear_leveling.h 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #ifndef __FLASH_H__ #define __FLASH_H__ #include \"stm32f1xx_hal.h\" #define FLASH_START_ADDRESS 0x0801E000 #define PAGE_SIZE (uint32_t)FLASH_PAGE_SIZE /* Page size */ #define WT_GET_NEW_ADDR (1<<0) #define WT_GET_USED_ADDR (1<<1) typedef union { uint8_t buff[4]; uint32_t data; }flash_pack_u; typedef struct { uint32_t flash_start_address; uint32_t current_addr; uint32_t new_addr; uint16_t page_size; flash_pack_u buff; }flasher_t; typedef union { uint8_t data[2]; uint16_t data16; }writer_u; void flash_init(void); void easer_flash(void); void find_new_entry(void); uint32_t find_used_entry(void); void write_word_to_flash(writer_u writer); #endif flash_wear_leveling.c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 #include <drv_flash.h> extern void FLASH_PageErase(uint32_t PageAddress); static flasher_t flasher; void flash_init(void) { flasher.flash_start_address = FLASH_START_ADDRESS; flasher.page_size = FLASH_PAGE_SIZE; flasher.current_addr = FLASH_START_ADDRESS; } void easer_flash(void) { /* -1- Unlock the Flash Bank Program Erase controller */ HAL_FLASH_Unlock(); /* -2- Clear All pending flags */ __HAL_FLASH_CLEAR_FLAG(FLASH_FLAG_EOP | FLASH_FLAG_WRPERR | FLASH_FLAG_PGERR); /* -3- erase the FLASH pages */ FLASH_PageErase(FLASH_START_ADDRESS); FLASH_WaitForLastOperation(FLASH_TIMEOUT_VALUE); CLEAR_BIT(FLASH->CR, FLASH_CR_PER); /* -5- Lock the Flash Bank Program Erase controller */ HAL_FLASH_Lock(); } void find_new_entry(void) { while(flasher.current_addr < flasher.flash_start_address+flasher.page_size) { flasher.buff.data = read_word_from_flash(flasher.current_addr); if(flasher.buff.buff[0] == 0xFF) { flasher.new_addr = flasher.current_addr; return; } flasher.current_addr += 4; } if(flasher.current_addr >= flasher.flash_start_address+flasher.page_size) { easer_flash(); flasher.current_addr = flasher.flash_start_address; flasher.new_addr = flasher.flash_start_address; } } uint32_t find_used_entry(void) { while(flasher.current_addr < flasher.flash_start_address+flasher.page_size) { flasher.buff.data = read_word_from_flash(flasher.current_addr); if(flasher.buff.buff[0] == 0x5A) { return flasher.buff.data; } flasher.current_addr += 4; } return 0; } void write_word_to_flash(writer_u writer) { flash_pack_u buf; buf.buff[0] = 0x5A; buf.buff[1] = writer.data[0]; buf.buff[2] = writer.data[1]; buf.buff[3] = 0xA5; find_new_entry(); HAL_FLASH_Unlock(); if(flasher.new_addr-4 >= flasher.flash_start_address) { HAL_FLASH_Program(FLASH_TYPEPROGRAM_WORD,flasher.new_addr-4,0x00); } HAL_FLASH_Program(FLASH_TYPEPROGRAM_WORD,flasher.new_addr,buf.data); HAL_FLASH_Lock(); } example.c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 /* * \u9996\u5148\u786e\u4fdd\u4f60\u8981\u64cd\u4f5c\u7684\u7684Flash\u533a\u57df\u662f\u521a\u64e6\u9664\u8fc7\u7684(\u5168\u4e3a1)\uff0c\u4e3a\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u7684\uff0c\u4f60\u53ef\u4ee5\u53ea\u8c03\u7528easer_flash()\u51fd\u6570\uff0c\u5c06\u7279\u5b9a\u7684flash page\u64e6\u9664\uff0c * \u5f53\u7136\u4f60\u9700\u8981\u5148\u8c03\u7528flash_init()\u51fd\u6570\u8bbe\u7f6eflash page\u7684\u9996\u5730\u5740 * \u6570\u636e\u5e27\u683c\u5f0f\u4e3a |0x5A | data1 | data2 | 0xA5| * \u6bcf\u6b21\u5199\u5165\u6570\u636e\u65f6\uff0c\u4f1a\u987a\u6b21\u5bfb\u627e\u6570\u503cFF\uff08\u672a\u5199\u5165\u6570\u636e\u7684\uff09\uff0c\u627e\u5230\u540e\u5199\u5165\u6570\u636e\uff0c\u540c\u65f6\u5c06\u5148\u524d\u7684\u6709\u6548\u6570\u636e\u7f6e\u4e3a0\uff0c\u82e5\u672a\u627e\u5230FF\uff0c\u5219\u8868\u660e\u6570\u636e\u5df2\u5199\u6ee1\uff0c\u5c06\u64e6\u9664\u6574\u9875\uff0c\u4ece\u5934\u5f00\u59cb\u5199 * \u6bcf\u6b21\u8bfb\u51fa\u6570\u636e\u65f6\uff0c\u4f1a\u987a\u6b21\u5bfb\u627e\u6570\u503c5A\uff08\u6709\u6548\u6570\u636e\uff09\uff0c\u7136\u540e\u8bfb\u51fa4\u4e2a\u5b57\u8282\uff0c\u82e5\u672a\u627e\u5230\u6570\u503c5A\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u78010 * */ int main() { // write data into flash writer_u writer; writer.data[0] = 0x11; writer.data[1] = 0x22; write_word_to_flash(writer); // then read it from flash and print it flash_pack_u flash_pack; flash_pack.data = find_used_entry(); usart1_printf(\"%x %x\\n\",flash_pack.buff[1]); usart1_printf(\"%x %x\\n\",flash_pack.buff[2]); }","title":"Flash \u78e8\u635f\u5747\u8861\u7b97\u6cd5"},{"location":"Embedded System/STM32/stm32_flash_erase_leveling/#stm32flasherase-leveling","text":"STM32\u5185\u90e8Flash\u7684\u5199\u5bff\u547d\u5927\u7ea6\u662f1\u4e07\u6b21\uff0c\u5047\u5982\u6211\u4eec\u5728\u5176Flash\u4e2d\u5b58\u50a8\u6570\u636e\uff0c\u6bcf\u5929100\u6b21\u5199\u64cd\u4f5c\uff0c100\u5929\u540eFlash\u5c31\u65e0\u6cd5\u7ee7\u7eed\u53ef\u9760\u4f7f\u7528\u4e86\uff0c \u672c\u6587\u91c7\u53d6\u4e86\u4e00\u79cd\u975e\u5e38\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u5c06Flash\u7684\u4f7f\u7528\u5bff\u547d\u5ef6\u957f\u4e861024\u500d\uff08\u4ec5\u9650\u672c\u6587\u8bd5\u9a8c\u73af\u5883\u4e0b\uff09\u3002","title":"STM32\u5185\u90e8Flash\u4f7f\u7528\u78e8\u635f\u5747\u8861\u7b97\u6cd5(Erase Leveling)"},{"location":"Embedded System/STM32/stm32_flash_erase_leveling/#1","text":"\u672c\u5b9e\u9a8c\u4ee5\u4e00\u9875Flash\u7684\u64cd\u4f5c\u4e3a\u4f8b\u3002\u6211\u4eec\u6309\u7167\u7279\u5b9a\u683c\u5f0f\u5c06\u6570\u636e\u4e00\u6761\u4e00\u6761\u7684\u5199\u8fdbFlash\uff0c\u5728\u5199\u5165\u65b0\u7684\u6570\u636e\u524d\u5c06\u65e7\u6570\u636e\u6e05\u96f6\uff0c \u4fdd\u8bc1Flash\u4e2d\u6709\u6548\u6570\u636e\u7684\u552f\u4e00\u6027\uff0c\u76f4\u5230\u672c\u9875\u5199\u6ee1\u540e\uff0c\u624d\u5c06\u672c\u9875\u64e6\u9664\uff0c\u6545\u6781\u5927\u7684\u5ef6\u957f\u4e86Flash\u7684\u4f7f\u7528\u5bff\u547d\u3002 \u82af\u7247\uff1aSTM32F103ZET6 \u8f6f\u4ef6\uff1aSTM32CubeHAL Flash Page Size\uff1a2K \u4f7f\u7528Flash\u7684\u4e00\u9875Page60(0x0801E000 ~ 0x0801E800(\u4e0d\u5305\u542b))\u8fdb\u884c\u78e8\u635f\u5747\u8861\u7b97\u6cd5\u8bd5\u9a8c \u6570\u636e\u5e27\u683c\u5f0f\uff1a |0x5A|data1|data2|0xA5| \u672c\u5b9e\u9a8cFlash\u5b58\u50a8\u6a21\u578b\u5982\u4e0b\uff1a \u9996\u5148\u5c06Page60\u64e6\u9664\uff0c\u64e6\u9664\u540ePage60\u9875\u4e2d\u7684\u6570\u636e\u5168\u4e3a1\u3002 \u6bcf\u6b21\u5199\u5165\u6570\u636e\u65f6\uff0c\u4f1a\u987a\u6b21\u5bfb\u627e\u6570\u503cFF\uff08\u672a\u5199\u5165\u6570\u636e\u7684\uff09\uff0c\u627e\u5230\u540e\u5199\u5165\u6570\u636e\uff0c\u540c\u65f6\u5c06\u5148\u524d\u7684\u6709\u6548\u6570\u636e\u7f6e\u4e3a0\uff0c\u82e5\u672a\u627e\u5230FF\uff0c\u5219\u8868\u660e\u6570\u636e\u5df2\u5199\u6ee1\uff0c\u5c06\u64e6\u9664\u6574\u9875\uff0c\u4ece\u5934\u5f00\u59cb\u5199 \u6bcf\u6b21\u8bfb\u51fa\u6570\u636e\u65f6\uff0c\u4f1a\u987a\u6b21\u5bfb\u627e\u6570\u503c5A\uff08\u6709\u6548\u6570\u636e\uff09\uff0c\u7136\u540e\u8bfb\u51fa4\u4e2a\u5b57\u8282\uff0c\u82e5\u672a\u627e\u5230\u6570\u503c5A\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u78010","title":"1. \u8bbe\u8ba1\u601d\u8def"},{"location":"Embedded System/STM32/stm32_flash_erase_leveling/#2","text":"\u4e00\u5171\u67093\u4e2a\u6587\u4ef6\uff0cflash_wear_leveling.h\u3001flash_wear_leveling.c\u548cexample.c\uff0cflash_wear_leveling.h\u548cflash_wear_leveling.c\u662f \u78e8\u635f\u5747\u8861\u7b97\u6cd5\u7684\u5b9e\u73b0\uff0cexample.c\u662f\u4f7f\u7528\u4e3e\u4f8b\u3002 \u76f4\u63a5\u8bbf\u95ee\u6211\u7684Gist\u83b7\u53d6\u6700\u65b0\u4ee3\u7801 flash_wear_leveling.h 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 #ifndef __FLASH_H__ #define __FLASH_H__ #include \"stm32f1xx_hal.h\" #define FLASH_START_ADDRESS 0x0801E000 #define PAGE_SIZE (uint32_t)FLASH_PAGE_SIZE /* Page size */ #define WT_GET_NEW_ADDR (1<<0) #define WT_GET_USED_ADDR (1<<1) typedef union { uint8_t buff[4]; uint32_t data; }flash_pack_u; typedef struct { uint32_t flash_start_address; uint32_t current_addr; uint32_t new_addr; uint16_t page_size; flash_pack_u buff; }flasher_t; typedef union { uint8_t data[2]; uint16_t data16; }writer_u; void flash_init(void); void easer_flash(void); void find_new_entry(void); uint32_t find_used_entry(void); void write_word_to_flash(writer_u writer); #endif flash_wear_leveling.c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 #include <drv_flash.h> extern void FLASH_PageErase(uint32_t PageAddress); static flasher_t flasher; void flash_init(void) { flasher.flash_start_address = FLASH_START_ADDRESS; flasher.page_size = FLASH_PAGE_SIZE; flasher.current_addr = FLASH_START_ADDRESS; } void easer_flash(void) { /* -1- Unlock the Flash Bank Program Erase controller */ HAL_FLASH_Unlock(); /* -2- Clear All pending flags */ __HAL_FLASH_CLEAR_FLAG(FLASH_FLAG_EOP | FLASH_FLAG_WRPERR | FLASH_FLAG_PGERR); /* -3- erase the FLASH pages */ FLASH_PageErase(FLASH_START_ADDRESS); FLASH_WaitForLastOperation(FLASH_TIMEOUT_VALUE); CLEAR_BIT(FLASH->CR, FLASH_CR_PER); /* -5- Lock the Flash Bank Program Erase controller */ HAL_FLASH_Lock(); } void find_new_entry(void) { while(flasher.current_addr < flasher.flash_start_address+flasher.page_size) { flasher.buff.data = read_word_from_flash(flasher.current_addr); if(flasher.buff.buff[0] == 0xFF) { flasher.new_addr = flasher.current_addr; return; } flasher.current_addr += 4; } if(flasher.current_addr >= flasher.flash_start_address+flasher.page_size) { easer_flash(); flasher.current_addr = flasher.flash_start_address; flasher.new_addr = flasher.flash_start_address; } } uint32_t find_used_entry(void) { while(flasher.current_addr < flasher.flash_start_address+flasher.page_size) { flasher.buff.data = read_word_from_flash(flasher.current_addr); if(flasher.buff.buff[0] == 0x5A) { return flasher.buff.data; } flasher.current_addr += 4; } return 0; } void write_word_to_flash(writer_u writer) { flash_pack_u buf; buf.buff[0] = 0x5A; buf.buff[1] = writer.data[0]; buf.buff[2] = writer.data[1]; buf.buff[3] = 0xA5; find_new_entry(); HAL_FLASH_Unlock(); if(flasher.new_addr-4 >= flasher.flash_start_address) { HAL_FLASH_Program(FLASH_TYPEPROGRAM_WORD,flasher.new_addr-4,0x00); } HAL_FLASH_Program(FLASH_TYPEPROGRAM_WORD,flasher.new_addr,buf.data); HAL_FLASH_Lock(); } example.c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 /* * \u9996\u5148\u786e\u4fdd\u4f60\u8981\u64cd\u4f5c\u7684\u7684Flash\u533a\u57df\u662f\u521a\u64e6\u9664\u8fc7\u7684(\u5168\u4e3a1)\uff0c\u4e3a\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u7684\uff0c\u4f60\u53ef\u4ee5\u53ea\u8c03\u7528easer_flash()\u51fd\u6570\uff0c\u5c06\u7279\u5b9a\u7684flash page\u64e6\u9664\uff0c * \u5f53\u7136\u4f60\u9700\u8981\u5148\u8c03\u7528flash_init()\u51fd\u6570\u8bbe\u7f6eflash page\u7684\u9996\u5730\u5740 * \u6570\u636e\u5e27\u683c\u5f0f\u4e3a |0x5A | data1 | data2 | 0xA5| * \u6bcf\u6b21\u5199\u5165\u6570\u636e\u65f6\uff0c\u4f1a\u987a\u6b21\u5bfb\u627e\u6570\u503cFF\uff08\u672a\u5199\u5165\u6570\u636e\u7684\uff09\uff0c\u627e\u5230\u540e\u5199\u5165\u6570\u636e\uff0c\u540c\u65f6\u5c06\u5148\u524d\u7684\u6709\u6548\u6570\u636e\u7f6e\u4e3a0\uff0c\u82e5\u672a\u627e\u5230FF\uff0c\u5219\u8868\u660e\u6570\u636e\u5df2\u5199\u6ee1\uff0c\u5c06\u64e6\u9664\u6574\u9875\uff0c\u4ece\u5934\u5f00\u59cb\u5199 * \u6bcf\u6b21\u8bfb\u51fa\u6570\u636e\u65f6\uff0c\u4f1a\u987a\u6b21\u5bfb\u627e\u6570\u503c5A\uff08\u6709\u6548\u6570\u636e\uff09\uff0c\u7136\u540e\u8bfb\u51fa4\u4e2a\u5b57\u8282\uff0c\u82e5\u672a\u627e\u5230\u6570\u503c5A\uff0c\u5219\u8fd4\u56de\u9519\u8bef\u78010 * */ int main() { // write data into flash writer_u writer; writer.data[0] = 0x11; writer.data[1] = 0x22; write_word_to_flash(writer); // then read it from flash and print it flash_pack_u flash_pack; flash_pack.data = find_used_entry(); usart1_printf(\"%x %x\\n\",flash_pack.buff[1]); usart1_printf(\"%x %x\\n\",flash_pack.buff[2]); }","title":"2. \u5b9e\u73b0\u4ee3\u7801"},{"location":"Embedded System/STM32/stm32_hal_uart/","text":"STM32\u4e32\u53e3\u64cd\u4f5c-\u4e2d\u65ad \u00b6 1.\u4f7f\u7528CubeMX\u8fdb\u884c\u4e32\u53e3\u914d\u7f6e \u00b6 Note System Core\u914d\u7f6e\u7565 2.\u5f00\u542f\u4e2d\u65ad \u00b6 \u5728main.c\u4e2d\u6dfb\u52a0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 /* USER CODE BEGIN 2 */ // \u4e2d\u65ad\u65b9\u5f0f\u63a5\u6536 \u6700\u540e\u4e00\u4e2a\u53c2\u657010\u8868\u793a\u63a5\u6536\u523010\u4e2a\u5b57\u8282\u624d\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570 HAL_UART_Receive_IT ( & huart1 , ( uint8_t * ) aRxBuffer , 10 ); // DMA\u65b9\u5f0f\u63a5\u6536 \u6700\u540e\u4e00\u4e2a\u53c2\u657010\u8868\u793a\u63a5\u6536\u523010\u4e2a\u5b57\u8282\u624d\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570 /* USER CODE END 2 */ HAL_UART_Receive_DMA ( & huart1 , usart1_rx_buff , 10 ); ...... /* USER CODE BEGIN 4 */ // \u4e32\u53e3\u63a5\u6536\u56de\u8c03\u51fd\u6570 void HAL_UART_RxCpltCallback ( UART_HandleTypeDef * huart ) { HAL_GPIO_TogglePin ( GPIOD , GPIO_PIN_7 ); } /* USER CODE END 4 */","title":"STM32\u5b9a\u65f6\u5668\u7f16\u7a0b\u4e4bPWM"},{"location":"Embedded System/STM32/stm32_hal_uart/#stm32-","text":"","title":"STM32\u4e32\u53e3\u64cd\u4f5c-\u4e2d\u65ad"},{"location":"Embedded System/STM32/stm32_hal_uart/#1cubemx","text":"Note System Core\u914d\u7f6e\u7565","title":"1.\u4f7f\u7528CubeMX\u8fdb\u884c\u4e32\u53e3\u914d\u7f6e"},{"location":"Embedded System/STM32/stm32_hal_uart/#2","text":"\u5728main.c\u4e2d\u6dfb\u52a0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 /* USER CODE BEGIN 2 */ // \u4e2d\u65ad\u65b9\u5f0f\u63a5\u6536 \u6700\u540e\u4e00\u4e2a\u53c2\u657010\u8868\u793a\u63a5\u6536\u523010\u4e2a\u5b57\u8282\u624d\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570 HAL_UART_Receive_IT ( & huart1 , ( uint8_t * ) aRxBuffer , 10 ); // DMA\u65b9\u5f0f\u63a5\u6536 \u6700\u540e\u4e00\u4e2a\u53c2\u657010\u8868\u793a\u63a5\u6536\u523010\u4e2a\u5b57\u8282\u624d\u4f1a\u8c03\u7528\u56de\u8c03\u51fd\u6570 /* USER CODE END 2 */ HAL_UART_Receive_DMA ( & huart1 , usart1_rx_buff , 10 ); ...... /* USER CODE BEGIN 4 */ // \u4e32\u53e3\u63a5\u6536\u56de\u8c03\u51fd\u6570 void HAL_UART_RxCpltCallback ( UART_HandleTypeDef * huart ) { HAL_GPIO_TogglePin ( GPIOD , GPIO_PIN_7 ); } /* USER CODE END 4 */","title":"2.\u5f00\u542f\u4e2d\u65ad"},{"location":"Embedded System/STM32/stm32_io_drive_42stepper_l298n/","text":"STM32\u4f7f\u7528L298N\u9a71\u52a842\u6b65\u8fdb\u7535\u673a \u00b6 1. \u540d\u8bcd\u89e3\u91ca \u00b6 42\u6b65\u8fdb\u7535\u673a\u6307\u7684\u662f\u201c2\u76f84\u7ebf\u6b65\u8fdb\u7535\u673a\u201d\uff0c\u6bd4\u5982\u8fd9\u4e2a\u7535\u673a 42\u6b65\u8fdb\u7535\u673a\u7684\u9a71\u52a8\u8282\u62cd Tip \u5c06\u8282\u62cd\u5012\u8fc7\u6765\uff0c\u5373\u53ef\u5b9e\u73b0\u6b65\u8fdb\u7535\u673a\u53cd\u8f6c \u628a\u8282\u62cd\u6574\u7406\u6210\u4e00\u4e2a\u8868\u683c\uff0c\u65b9\u4fbf\u67e5\u9605 \u6b65\u8fdb\u7535\u673a\u5f15\u811a step1 step2 step3 step4 A+ 1 1 0 0 A- 0 0 1 1 B+ 0 1 1 0 B- 1 0 0 1 \u5173\u4e8e\u6b65\u8fdb\u7535\u673a\u7684\u8282\u62cd\uff0c\u901a\u5e38\u4e5f\u8fd9\u4e48\u8868\u793a \u5c06\u4e3a1\uff08\u9ad8\u7535\u5e73\uff09\u7684\u5f15\u811a\u5199\u51fa\u6765\uff0c\u4e3a0\uff08\u4f4e\u7535\u5e73\uff09\u7684\u5f15\u811a\u7701\u7565\u4e0d\u5199 step1: A+B- step2: A+B+ step3: A-B+ step4: A-B- 2. L298N\u9a71\u52a85V\u7535\u673a \u00b6 Warning L298N\u9a71\u52a85V\u7535\u673a\u65f6\uff0c\u9700\u8981\u5c06+12V \u548c +5V \u7aef\u53e3\u4e00\u8d77\u63a55V\u7535\u6e90 3. \u9a71\u52a8\u7a0b\u5e8f \u00b6 Tip \u6b65\u8fdb\u7535\u673a\u7684\u65cb\u8f6c\u901f\u5ea6\uff0c\u4e0e\u53d1\u9001\u7684\u8109\u51b2\u9891\u7387\u6210\u6b63\u6bd4 \u5f15\u811a\u6620\u5c04\u5173\u7cfb \u6b65\u8fdb\u7535\u673a\u5f15\u811a STM32\u5f15\u811a A+ A__Pin A- A_B7_Pin B+ B__Pin B- B_B9_Pin \u6b65\u8fdb\u7535\u673a\u6b63\u8f6c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_SET ); // 1 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_RESET ); // 0 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_RESET ); // 0 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_SET ); // 1 // very important HAL_Delay ( 10 ); \u6b65\u8fdb\u7535\u673a\u53cd\u8f6c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_SET ); // 1 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_RESET ); // 0 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_RESET ); // 0 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_SET ); // 1 // very important HAL_Delay ( 10 );","title":"STM32\u63a7\u523642\u6b65\u8fdb\u7535\u673a"},{"location":"Embedded System/STM32/stm32_io_drive_42stepper_l298n/#stm32l298n42","text":"","title":"STM32\u4f7f\u7528L298N\u9a71\u52a842\u6b65\u8fdb\u7535\u673a"},{"location":"Embedded System/STM32/stm32_io_drive_42stepper_l298n/#1","text":"42\u6b65\u8fdb\u7535\u673a\u6307\u7684\u662f\u201c2\u76f84\u7ebf\u6b65\u8fdb\u7535\u673a\u201d\uff0c\u6bd4\u5982\u8fd9\u4e2a\u7535\u673a 42\u6b65\u8fdb\u7535\u673a\u7684\u9a71\u52a8\u8282\u62cd Tip \u5c06\u8282\u62cd\u5012\u8fc7\u6765\uff0c\u5373\u53ef\u5b9e\u73b0\u6b65\u8fdb\u7535\u673a\u53cd\u8f6c \u628a\u8282\u62cd\u6574\u7406\u6210\u4e00\u4e2a\u8868\u683c\uff0c\u65b9\u4fbf\u67e5\u9605 \u6b65\u8fdb\u7535\u673a\u5f15\u811a step1 step2 step3 step4 A+ 1 1 0 0 A- 0 0 1 1 B+ 0 1 1 0 B- 1 0 0 1 \u5173\u4e8e\u6b65\u8fdb\u7535\u673a\u7684\u8282\u62cd\uff0c\u901a\u5e38\u4e5f\u8fd9\u4e48\u8868\u793a \u5c06\u4e3a1\uff08\u9ad8\u7535\u5e73\uff09\u7684\u5f15\u811a\u5199\u51fa\u6765\uff0c\u4e3a0\uff08\u4f4e\u7535\u5e73\uff09\u7684\u5f15\u811a\u7701\u7565\u4e0d\u5199 step1: A+B- step2: A+B+ step3: A-B+ step4: A-B-","title":"1. \u540d\u8bcd\u89e3\u91ca"},{"location":"Embedded System/STM32/stm32_io_drive_42stepper_l298n/#2-l298n5v","text":"Warning L298N\u9a71\u52a85V\u7535\u673a\u65f6\uff0c\u9700\u8981\u5c06+12V \u548c +5V \u7aef\u53e3\u4e00\u8d77\u63a55V\u7535\u6e90","title":"2. L298N\u9a71\u52a85V\u7535\u673a"},{"location":"Embedded System/STM32/stm32_io_drive_42stepper_l298n/#3","text":"Tip \u6b65\u8fdb\u7535\u673a\u7684\u65cb\u8f6c\u901f\u5ea6\uff0c\u4e0e\u53d1\u9001\u7684\u8109\u51b2\u9891\u7387\u6210\u6b63\u6bd4 \u5f15\u811a\u6620\u5c04\u5173\u7cfb \u6b65\u8fdb\u7535\u673a\u5f15\u811a STM32\u5f15\u811a A+ A__Pin A- A_B7_Pin B+ B__Pin B- B_B9_Pin \u6b65\u8fdb\u7535\u673a\u6b63\u8f6c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_SET ); // 1 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_RESET ); // 0 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_RESET ); // 0 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_SET ); // 1 // very important HAL_Delay ( 10 ); \u6b65\u8fdb\u7535\u673a\u53cd\u8f6c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_SET ); // 1 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_RESET ); // 0 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_RESET ); // 0 // very important HAL_Delay ( 10 ); HAL_GPIO_WritePin ( GPIOB , A__Pin , GPIO_PIN_SET ); // 1 HAL_GPIO_WritePin ( GPIOB , A_B7_Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B__Pin , GPIO_PIN_RESET ); // 0 HAL_GPIO_WritePin ( GPIOB , B_B9_Pin , GPIO_PIN_SET ); // 1 // very important HAL_Delay ( 10 );","title":"3. \u9a71\u52a8\u7a0b\u5e8f"},{"location":"Embedded System/STM32/stm32_module_init_like.linux/","text":"\u7c7blinux\u9a71\u52a8\u6a21\u5757\u6846\u67b6module_init(init_fun)\u5728STM32\u4e0a\u7684\u5b9e\u73b0 \u00b6 \u8bbe\u8ba1\u601d\u60f3 \u00b6 \u5229\u7528\u7f16\u8bd1\u5668\u7684\u7279\u6027\uff0c\u5728\u7a0b\u5e8f\u7f16\u8bd1\u65f6\u5c06\u5404\u6a21\u5757\u521d\u59cb\u5316\u51fd\u6570\u987a\u5e8f\u5b58\u653e\u5230\u5185\u5b58\u7684\u6307\u5b9a\u5730\u5740\uff0c\u7136\u540e\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6main\u51fd\u6570\u4ece\u8fd9\u5757\u5185\u5b58\u533a\u57df\u4e2d \u4f9d\u6b21\u8c03\u7528\u5404\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570\uff0c\u81ea\u52a8\u5b8c\u6210\u5404\u4e2a\u6a21\u5757\u7684\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u540c\u65f6\u589e\u5f3a\u4e86\u7a0b\u5e8f\u7684\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u7279\u6027\uff0c\u63d0\u9ad8\u4e86\u8f6f\u4ef6\u7684\u8d28\u91cf\u3002 \u8bd5\u9a8c\u73af\u5883 \u00b6 \u5de5\u5177\u94fe\uff1aKeil5 \u5f00\u53d1\u677f\uff1aSTM32F103ZE 1. \u4fee\u6539\u94fe\u63a5\u811a\u672c \u00b6 \u4fee\u6539\u94fe\u63a5\u811a\u672c\u7684\u76ee\u7684\u662f\uff1a\u5728STM32\u7684\u5185\u5b58\u4e2d\uff0c\u7559\u51fa\u4e00\u5757\u5408\u9002\u7684\u5927\u5c0f(\u5927\u5c0f\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u8c03\u6574)\uff0c \u7528\u6765\u5b58\u653e\u5404\u4e2a\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570 1.1 \u5185\u5b58\u5206\u914d \u00b6 \u5728Keil\u4e2d\u65b0\u5efa\u4e00\u4e2a\u5de5\u7a0b\uff0c\u7f16\u8bd1\u540e\u5728\u5de5\u7a0b\u76ee\u5f55\u4e0b\u7684Objects\u6587\u4ef6\u5939\u4e2d\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u4ee5.sct\u7ed3\u5c3e\u7684\u94fe\u63a5\u811a\u672c\uff0c \u5176\u5185\u5bb9\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ; ************************************************************* ; *** Scatter-Loading Description File generated by uVision *** ; ************************************************************* LR_IROM1 0x08000000 0x00080000 { ; load region size_region ER_IROM1 0x08000000 0x00080000 { ; load address = execution address *.o (RESET, +First) *(InRoot$$Sections) .ANY (+RO) .ANY (+XO) } ; \u6b64\u533a\u57df(RW_IRAM1)\u4f7f\u7528\u6240\u6709\u7684\u5185\u5b5864Kb RW_IRAM1 0x20000000 0x00010000 { ; RW data .ANY (+RW +ZI) } } \u6211\u4eec\u5c06\u5176\u4fee\u6539\uff1aRW_IRAM1\u4e3a48K\uff0cRW_IRAM2\u4e3a16K\uff0c\u5176\u4e2dRW_IRAM2\u7528\u6765\u987a\u5e8f\u5b58\u653e\u5404\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 ; ************************************************************* ; *** Scatter-Loading Description File generated by uVision *** ; ************************************************************* LR_IROM1 0x08000000 0x00080000 { ; load region size_region ER_IROM1 0x08000000 0x00080000 { ; load address = execution address *.o (RESET, +First) *(InRoot$$Sections) .ANY (+RO) .ANY (+XO) } ;RW_IRAM1\u4e3a48K\uff0c\u4f9b\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 RW_IRAM1 0x20000000 0x0000c000 { ; RW data .ANY (+RW +ZI) } ;RW_IRAM2\u4e3a16K\uff0c\u7528\u4e8e\u5b58\u653e\u5404\u4e2a\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570 RW_IRAM2 0x2000c000 0x00004000 { ; RW data *.o(RAMCODE) } } \u53cb\u60c5\u63d0\u793a\uff1akeil\u4e2d\u94fe\u63a5\u811a\u672c\u7684\u4fee\u6539\u65b9\u6cd5\u5982\u4e0b\u56fe\u6240\u793a 1.2 \u5c06\u6307\u5b9a\u7684\u51fd\u6570\u5b58\u653e\u5230\u6307\u5b9a\u7684\u5185\u5b58\u533a\u57df \u00b6 \u4e0a\u9762\u6211\u4eec\u5bf9STM32\u7684\u5185\u5b58\u8fdb\u884c\u4e86\u5206\u914d\uff0c16K\u5927\u5c0f\u7684RW_IRAM2\u5185\u5b58\u533a\u57df\u5c06\u7528\u4f5c\u5b58\u50a8\u521d\u59cb\u5316\u51fd\u6570\uff0c \u90a3\u4e48\u600e\u4e48\u624d\u80fd\u5c06\u6307\u5b9a\u7684\u51fd\u6570\u653e\u8fdb\u8fd9\u4e2a\u533a\u57df\u5462\uff1f \u5b9e\u73b0\u65b9\u6cd5\u5982\u4e0b\uff1a 1 2 3 4 5 6 // \u521d\u59cb\u5316\u51fd\u6570\u7684\u539f\u578b\uff0c\u51fd\u6570\u539f\u578b\u53ef\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8c03\u6574 typedef void ( * init_function_list )( uint8_t taskID ); // \u901a\u8fc7MODULE_INIT(func)\uff0cfunc\u51fd\u6570\u5728\u7f16\u8bd1\u65f6\u5c06\u4f1a\u88ab\u94fe\u63a5\u5230RAMCODE\u5185\u5b58\u533a\uff0c\u65e2\u6211\u4eec\u4e3a\u521d\u59cb\u5316\u51fd\u6570\u9884\u5148\u5206\u914d\u7684\u5185\u5b58\u533a\u57df #define _init __attribute__((used, section(\"RAMCODE\"))) #define MODULE_INIT(func) init_function_list _fn_##func _init = func \u5c06\u6240\u6709\u7684\u521d\u59cb\u5316\u51fd\u6570\u90fd\u5199\u8fdb\u7279\u5b9a\u5185\u5b58\u533a\u57df\u540e\uff0c\u6211\u4eec\u53ea\u9700\u77e5\u9053\u8fd9\u4e2a\u533a\u57df\u7684\u8d77\u6b62\u5730\u5740\uff0c\u5c31\u53ef\u4ee5\u7edf\u4e00\u904d\u5386\u8c03\u7528\u6240\u6709\u7684\u521d\u59cb\u5316\u51fd\u6570\uff0c \u4ece\u800c\u5b9e\u73b0\u5bf9\u5404\u4e2a\u6a21\u5757\u7684\u521d\u59cb\u5316\u3002 \u6a21\u5757\u7684\u521d\u59cb\u5316\u6709\u987a\u5e8f\u8981\u6c42\u600e\u4e48\u529e\uff1f \u6709\u65f6\u4e00\u4e2a\u6a21\u5757\u7684\u6b63\u5e38\u4f7f\u7528\u5fc5\u987b\u5728\u67d0\u4e2a\u6a21\u5757\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u6bd4\u5982\u4e00\u4e2a\u6a21\u5757\u9700\u8981\u6253\u5370Log\uff0c\u90a3\u4e48Log\u6a21\u5757\u5fc5\u987b\u5728\u5b83\u4e4b\u524d\u88ab\u521d\u59cb\u5316\u3002 \u600e\u4e48\u89e3\u51b3\u4e86\uff1f\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u7edf\u4e00\u8c03\u7528\u521d\u59cb\u5316\u51fd\u6570\u65f6\uff0c\u6211\u4eec\u662f\u6839\u636e\u5185\u5b58\u5730\u5740\u987a\u5e8f\u8c03\u7528\u7684\uff0c\u90a3\u4e48\u5c06Log\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570\u653e\u5728\u5176\u524d\u9762\u5c31\u53ef\u4ee5\u4e86\u3002 \u5728Keil\u4e2d\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1a 1.3 \u4f7f\u7528\u4e3e\u4f8b \u00b6 Talk is cheap. Show me the code. \u5b8c\u6574\u793a\u4f8b\u5de5\u7a0b\u6e90\u7801\u70b9\u51fb\u4e0b\u8f7d module1.c,module2.c,module3.c \u4e3a3\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\uff0c\u5176\u521d\u59cb\u5316\u51fd\u6570\u90fd\u4e3a\u5185\u90e8\u51fd\u6570(\u4f7f\u7528static\u4fee\u9970)\uff0c\u7b26\u5408\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u7684\u8f6f\u4ef6\u8bbe\u8ba1\u601d\u60f3 main.c\u4e2d\uff0cdo_init\u51fd\u6570\u76f4\u63a5\u901a\u8fc7\u521d\u59cb\u5316\u51fd\u6570\u7684\u5185\u5b58\u5730\u5740\uff0c\u5bf9\u521d\u59cb\u5316\u51fd\u6570\u9010\u4e2a\u8fdb\u884c\u8c03\u7528 \u7b80\u5355\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a module1.c 1 2 3 4 5 6 static void module1_init ( uint8_t taskID ) { // write your code ... } MODULE_INIT ( module1_init ); module2.c 1 2 3 4 5 6 static void module2_init ( uint8_t taskID ) { // write your code ... } MODULE_INIT ( module2_init ); module3.c 1 2 3 4 5 6 static void module3_init ( uint8_t taskID ) { // write your code ... } MODULE_INIT ( module3_init ); main.c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 void do_init ( void ) { uint8_t taskID = 0 ; init_function_list * call = ( init_function_list * ) & Image $$ RW_IRAM2 $$ Base ; init_function_list * end = ( init_function_list * ) & Image $$ RW_IRAM2 $$ Limit ; do { ( * call )( taskID ++ ); call ++ ; } while ( call < end ); } int main () { // init all module in the function do_init (); // write your code ... while ( 1 ) { // write your code ... } }","title":"\u521d\u59cb\u5316\u51fd\u6570\u7684\u53e6\u4e00\u79cd\u5199\u6cd5"},{"location":"Embedded System/STM32/stm32_module_init_like.linux/#linuxmodule_initinit_funstm32","text":"","title":"\u7c7blinux\u9a71\u52a8\u6a21\u5757\u6846\u67b6module_init(init_fun)\u5728STM32\u4e0a\u7684\u5b9e\u73b0"},{"location":"Embedded System/STM32/stm32_module_init_like.linux/#_1","text":"\u5229\u7528\u7f16\u8bd1\u5668\u7684\u7279\u6027\uff0c\u5728\u7a0b\u5e8f\u7f16\u8bd1\u65f6\u5c06\u5404\u6a21\u5757\u521d\u59cb\u5316\u51fd\u6570\u987a\u5e8f\u5b58\u653e\u5230\u5185\u5b58\u7684\u6307\u5b9a\u5730\u5740\uff0c\u7136\u540e\u5728\u7a0b\u5e8f\u8fd0\u884c\u65f6main\u51fd\u6570\u4ece\u8fd9\u5757\u5185\u5b58\u533a\u57df\u4e2d \u4f9d\u6b21\u8c03\u7528\u5404\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570\uff0c\u81ea\u52a8\u5b8c\u6210\u5404\u4e2a\u6a21\u5757\u7684\u521d\u59cb\u5316\u5de5\u4f5c\uff0c\u540c\u65f6\u589e\u5f3a\u4e86\u7a0b\u5e8f\u7684\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u7279\u6027\uff0c\u63d0\u9ad8\u4e86\u8f6f\u4ef6\u7684\u8d28\u91cf\u3002","title":"\u8bbe\u8ba1\u601d\u60f3"},{"location":"Embedded System/STM32/stm32_module_init_like.linux/#_2","text":"\u5de5\u5177\u94fe\uff1aKeil5 \u5f00\u53d1\u677f\uff1aSTM32F103ZE","title":"\u8bd5\u9a8c\u73af\u5883"},{"location":"Embedded System/STM32/stm32_module_init_like.linux/#1","text":"\u4fee\u6539\u94fe\u63a5\u811a\u672c\u7684\u76ee\u7684\u662f\uff1a\u5728STM32\u7684\u5185\u5b58\u4e2d\uff0c\u7559\u51fa\u4e00\u5757\u5408\u9002\u7684\u5927\u5c0f(\u5927\u5c0f\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u8c03\u6574)\uff0c \u7528\u6765\u5b58\u653e\u5404\u4e2a\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570","title":"1. \u4fee\u6539\u94fe\u63a5\u811a\u672c"},{"location":"Embedded System/STM32/stm32_module_init_like.linux/#11","text":"\u5728Keil\u4e2d\u65b0\u5efa\u4e00\u4e2a\u5de5\u7a0b\uff0c\u7f16\u8bd1\u540e\u5728\u5de5\u7a0b\u76ee\u5f55\u4e0b\u7684Objects\u6587\u4ef6\u5939\u4e2d\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u4ee5.sct\u7ed3\u5c3e\u7684\u94fe\u63a5\u811a\u672c\uff0c \u5176\u5185\u5bb9\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ; ************************************************************* ; *** Scatter-Loading Description File generated by uVision *** ; ************************************************************* LR_IROM1 0x08000000 0x00080000 { ; load region size_region ER_IROM1 0x08000000 0x00080000 { ; load address = execution address *.o (RESET, +First) *(InRoot$$Sections) .ANY (+RO) .ANY (+XO) } ; \u6b64\u533a\u57df(RW_IRAM1)\u4f7f\u7528\u6240\u6709\u7684\u5185\u5b5864Kb RW_IRAM1 0x20000000 0x00010000 { ; RW data .ANY (+RW +ZI) } } \u6211\u4eec\u5c06\u5176\u4fee\u6539\uff1aRW_IRAM1\u4e3a48K\uff0cRW_IRAM2\u4e3a16K\uff0c\u5176\u4e2dRW_IRAM2\u7528\u6765\u987a\u5e8f\u5b58\u653e\u5404\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570\u3002 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 ; ************************************************************* ; *** Scatter-Loading Description File generated by uVision *** ; ************************************************************* LR_IROM1 0x08000000 0x00080000 { ; load region size_region ER_IROM1 0x08000000 0x00080000 { ; load address = execution address *.o (RESET, +First) *(InRoot$$Sections) .ANY (+RO) .ANY (+XO) } ;RW_IRAM1\u4e3a48K\uff0c\u4f9b\u5e94\u7528\u7a0b\u5e8f\u4f7f\u7528 RW_IRAM1 0x20000000 0x0000c000 { ; RW data .ANY (+RW +ZI) } ;RW_IRAM2\u4e3a16K\uff0c\u7528\u4e8e\u5b58\u653e\u5404\u4e2a\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570 RW_IRAM2 0x2000c000 0x00004000 { ; RW data *.o(RAMCODE) } } \u53cb\u60c5\u63d0\u793a\uff1akeil\u4e2d\u94fe\u63a5\u811a\u672c\u7684\u4fee\u6539\u65b9\u6cd5\u5982\u4e0b\u56fe\u6240\u793a","title":"1.1 \u5185\u5b58\u5206\u914d"},{"location":"Embedded System/STM32/stm32_module_init_like.linux/#12","text":"\u4e0a\u9762\u6211\u4eec\u5bf9STM32\u7684\u5185\u5b58\u8fdb\u884c\u4e86\u5206\u914d\uff0c16K\u5927\u5c0f\u7684RW_IRAM2\u5185\u5b58\u533a\u57df\u5c06\u7528\u4f5c\u5b58\u50a8\u521d\u59cb\u5316\u51fd\u6570\uff0c \u90a3\u4e48\u600e\u4e48\u624d\u80fd\u5c06\u6307\u5b9a\u7684\u51fd\u6570\u653e\u8fdb\u8fd9\u4e2a\u533a\u57df\u5462\uff1f \u5b9e\u73b0\u65b9\u6cd5\u5982\u4e0b\uff1a 1 2 3 4 5 6 // \u521d\u59cb\u5316\u51fd\u6570\u7684\u539f\u578b\uff0c\u51fd\u6570\u539f\u578b\u53ef\u6839\u636e\u5b9e\u9645\u9700\u6c42\u8c03\u6574 typedef void ( * init_function_list )( uint8_t taskID ); // \u901a\u8fc7MODULE_INIT(func)\uff0cfunc\u51fd\u6570\u5728\u7f16\u8bd1\u65f6\u5c06\u4f1a\u88ab\u94fe\u63a5\u5230RAMCODE\u5185\u5b58\u533a\uff0c\u65e2\u6211\u4eec\u4e3a\u521d\u59cb\u5316\u51fd\u6570\u9884\u5148\u5206\u914d\u7684\u5185\u5b58\u533a\u57df #define _init __attribute__((used, section(\"RAMCODE\"))) #define MODULE_INIT(func) init_function_list _fn_##func _init = func \u5c06\u6240\u6709\u7684\u521d\u59cb\u5316\u51fd\u6570\u90fd\u5199\u8fdb\u7279\u5b9a\u5185\u5b58\u533a\u57df\u540e\uff0c\u6211\u4eec\u53ea\u9700\u77e5\u9053\u8fd9\u4e2a\u533a\u57df\u7684\u8d77\u6b62\u5730\u5740\uff0c\u5c31\u53ef\u4ee5\u7edf\u4e00\u904d\u5386\u8c03\u7528\u6240\u6709\u7684\u521d\u59cb\u5316\u51fd\u6570\uff0c \u4ece\u800c\u5b9e\u73b0\u5bf9\u5404\u4e2a\u6a21\u5757\u7684\u521d\u59cb\u5316\u3002 \u6a21\u5757\u7684\u521d\u59cb\u5316\u6709\u987a\u5e8f\u8981\u6c42\u600e\u4e48\u529e\uff1f \u6709\u65f6\u4e00\u4e2a\u6a21\u5757\u7684\u6b63\u5e38\u4f7f\u7528\u5fc5\u987b\u5728\u67d0\u4e2a\u6a21\u5757\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u6bd4\u5982\u4e00\u4e2a\u6a21\u5757\u9700\u8981\u6253\u5370Log\uff0c\u90a3\u4e48Log\u6a21\u5757\u5fc5\u987b\u5728\u5b83\u4e4b\u524d\u88ab\u521d\u59cb\u5316\u3002 \u600e\u4e48\u89e3\u51b3\u4e86\uff1f\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u7edf\u4e00\u8c03\u7528\u521d\u59cb\u5316\u51fd\u6570\u65f6\uff0c\u6211\u4eec\u662f\u6839\u636e\u5185\u5b58\u5730\u5740\u987a\u5e8f\u8c03\u7528\u7684\uff0c\u90a3\u4e48\u5c06Log\u6a21\u5757\u7684\u521d\u59cb\u5316\u51fd\u6570\u653e\u5728\u5176\u524d\u9762\u5c31\u53ef\u4ee5\u4e86\u3002 \u5728Keil\u4e2d\u53ef\u4ee5\u8fd9\u4e48\u505a\uff1a","title":"1.2 \u5c06\u6307\u5b9a\u7684\u51fd\u6570\u5b58\u653e\u5230\u6307\u5b9a\u7684\u5185\u5b58\u533a\u57df"},{"location":"Embedded System/STM32/stm32_module_init_like.linux/#13","text":"Talk is cheap. Show me the code. \u5b8c\u6574\u793a\u4f8b\u5de5\u7a0b\u6e90\u7801\u70b9\u51fb\u4e0b\u8f7d module1.c,module2.c,module3.c \u4e3a3\u4e2a\u72ec\u7acb\u7684\u6a21\u5757\uff0c\u5176\u521d\u59cb\u5316\u51fd\u6570\u90fd\u4e3a\u5185\u90e8\u51fd\u6570(\u4f7f\u7528static\u4fee\u9970)\uff0c\u7b26\u5408\u9ad8\u5185\u805a\u4f4e\u8026\u5408\u7684\u8f6f\u4ef6\u8bbe\u8ba1\u601d\u60f3 main.c\u4e2d\uff0cdo_init\u51fd\u6570\u76f4\u63a5\u901a\u8fc7\u521d\u59cb\u5316\u51fd\u6570\u7684\u5185\u5b58\u5730\u5740\uff0c\u5bf9\u521d\u59cb\u5316\u51fd\u6570\u9010\u4e2a\u8fdb\u884c\u8c03\u7528 \u7b80\u5355\u793a\u4f8b\u4ee3\u7801\u5982\u4e0b\uff1a module1.c 1 2 3 4 5 6 static void module1_init ( uint8_t taskID ) { // write your code ... } MODULE_INIT ( module1_init ); module2.c 1 2 3 4 5 6 static void module2_init ( uint8_t taskID ) { // write your code ... } MODULE_INIT ( module2_init ); module3.c 1 2 3 4 5 6 static void module3_init ( uint8_t taskID ) { // write your code ... } MODULE_INIT ( module3_init ); main.c 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 void do_init ( void ) { uint8_t taskID = 0 ; init_function_list * call = ( init_function_list * ) & Image $$ RW_IRAM2 $$ Base ; init_function_list * end = ( init_function_list * ) & Image $$ RW_IRAM2 $$ Limit ; do { ( * call )( taskID ++ ); call ++ ; } while ( call < end ); } int main () { // init all module in the function do_init (); // write your code ... while ( 1 ) { // write your code ... } }","title":"1.3 \u4f7f\u7528\u4e3e\u4f8b"},{"location":"Embedded System/STM32/stm32_spi/","text":"SPI\u7b80\u4ecb \u00b6 \u6a21\u5f0f CPOL CPHA Mode 0 CPOL=0 CPHA=0 Mode 1 CPOL=0 CPHA=1 Mode 2 CPOL=1 CPHA=0 Mode 3 CPOL=1 CPHA=1 \u65f6\u949f\u6781\u6027CPOL: \u5373SPI\u7a7a\u95f2\u65f6\uff0c\u65f6\u949f\u4fe1\u53f7SCLK\u7684\u7535\u5e73\uff080:\u7a7a\u95f2\u65f6\u4f4e\u7535\u5e73\uff1b1:\u7a7a\u95f2\u65f6\u9ad8\u7535\u5e73\uff09 \u65f6\u949f\u76f8\u4f4dCPHA: \u5373SPI\u5728SCLK\u7b2c\u51e0\u4e2a\u8fb9\u6cbf\u5f00\u59cb\u91c7\u6837\uff080:\u7b2c\u4e00\u4e2a\u8fb9\u6cbf\u5f00\u59cb; 1:\u7b2c\u4e8c\u4e2a\u8fb9\u6cbf\u5f00\u59cb\uff09 CPOL( Clock Polarity) CPHA\uff08Clock Phase\uff09 \u56fe: MCP3202\u7684SPI\u901a\u4fe1\u65f6\u5e8f\u56fe \u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u51faSPI\u7a7a\u95f2\u65f6SCLK\u4e3a\u4f4e\u7535\u5e73\uff0c\u6240\u4ee5CPOL=0 \u5728\u4e0a\u5347\u6cbf\u91c7\u6837\uff0c\u53c8\u56e0\u4e3aCPU\u7a7a\u95f2\u65f6SCLK\u4e3a\u4f4e\u7535\u5e73\uff0c\u6240\u4ee5\u4e0a\u5347\u6cbf\u662f\u7b2c\u4e00\u4e2a\u8fb9\u6cbf\uff0c\u6240\u4ee5CPHA=0 \u6240\u4ee5\u6b64\u65f6\u5e8f\u56fe\u8868\u660eSPI\u5de5\u4f5c\u5728Mode 0","title":"STM32 SPI"},{"location":"Embedded System/STM32/stm32_spi/#spi","text":"\u6a21\u5f0f CPOL CPHA Mode 0 CPOL=0 CPHA=0 Mode 1 CPOL=0 CPHA=1 Mode 2 CPOL=1 CPHA=0 Mode 3 CPOL=1 CPHA=1 \u65f6\u949f\u6781\u6027CPOL: \u5373SPI\u7a7a\u95f2\u65f6\uff0c\u65f6\u949f\u4fe1\u53f7SCLK\u7684\u7535\u5e73\uff080:\u7a7a\u95f2\u65f6\u4f4e\u7535\u5e73\uff1b1:\u7a7a\u95f2\u65f6\u9ad8\u7535\u5e73\uff09 \u65f6\u949f\u76f8\u4f4dCPHA: \u5373SPI\u5728SCLK\u7b2c\u51e0\u4e2a\u8fb9\u6cbf\u5f00\u59cb\u91c7\u6837\uff080:\u7b2c\u4e00\u4e2a\u8fb9\u6cbf\u5f00\u59cb; 1:\u7b2c\u4e8c\u4e2a\u8fb9\u6cbf\u5f00\u59cb\uff09 CPOL( Clock Polarity) CPHA\uff08Clock Phase\uff09 \u56fe: MCP3202\u7684SPI\u901a\u4fe1\u65f6\u5e8f\u56fe \u4ece\u56fe\u4e2d\u53ef\u4ee5\u770b\u51faSPI\u7a7a\u95f2\u65f6SCLK\u4e3a\u4f4e\u7535\u5e73\uff0c\u6240\u4ee5CPOL=0 \u5728\u4e0a\u5347\u6cbf\u91c7\u6837\uff0c\u53c8\u56e0\u4e3aCPU\u7a7a\u95f2\u65f6SCLK\u4e3a\u4f4e\u7535\u5e73\uff0c\u6240\u4ee5\u4e0a\u5347\u6cbf\u662f\u7b2c\u4e00\u4e2a\u8fb9\u6cbf\uff0c\u6240\u4ee5CPHA=0 \u6240\u4ee5\u6b64\u65f6\u5e8f\u56fe\u8868\u660eSPI\u5de5\u4f5c\u5728Mode 0","title":"SPI\u7b80\u4ecb"},{"location":"Embedded System/STM32/stm32_tim_dma/","text":"Method 1 \u00b6 \u914d\u7f6eTIM \u914d\u7f6eDAM for TIM start DAM\uff0c\u6d41\u7a0b\u5982\u4e0b\uff1a 1 2 // enable HAL_TIM_PWM_Start_DMA -> HAL_DMA_Start_IT -> __HAL_TIM_ENABLE_DMA HAL_TIM_DMABurst_WriteStart HAL_DMA_Start","title":"Stm32 tim dma"},{"location":"Embedded System/STM32/stm32_tim_dma/#method-1","text":"\u914d\u7f6eTIM \u914d\u7f6eDAM for TIM start DAM\uff0c\u6d41\u7a0b\u5982\u4e0b\uff1a 1 2 // enable HAL_TIM_PWM_Start_DMA -> HAL_DMA_Start_IT -> __HAL_TIM_ENABLE_DMA HAL_TIM_DMABurst_WriteStart HAL_DMA_Start","title":"Method 1"},{"location":"Hardware/battery_work_time/","text":"\u4ece\u80fd\u91cf\u7684\u89d2\u5ea6\u8ba1\u7b97\u7535\u6c60\u7684\u5de5\u4f5c\u65f6\u95f4 \u00b6 \u540d\u8bcd\u89e3\u91ca \u00b6 \u5e93\u4f26\uff1a\u5e93\u4ed1\uff08\u82f1\u8bed\uff1aCoulomb\uff09\u662f\u7535\u91cf\u7684\u5355\u4f4d\uff0c\u7b80\u79f0\u5e93\uff0c\u7b26\u53f7\u4e3aC\u3002\u82e5\u5bfc\u7ebf\u4e2d\u8f7d\u67091\u5b89\u57f9\u7684\u7a33\u5b9a\u7535\u6d41\uff0c\u5219\u57281\u79d2\u5185\u901a\u8fc7\u5bfc\u7ebf\u6a2a\u622a\u9762\u79ef\u7684\u7535\u91cf\u4e3a1\u5e93\u4ed1\u30021C=1A*1S \u7535\u80fd\u7684\u5355\u4f4d\u662f\u201c\u5ea6\u201d\uff0c\u5b83\u7684\u5b66\u540d\u53eb\u505a\u5343\u74e6\u65f6\uff0c\u7b26\u53f7\u662fkW\u00b7h\u3002\u5728\u7269\u7406\u5b66\u4e2d\uff0c\u66f4\u5e38\u7528\u7684\u80fd\u91cf\u5355\u4f4d\uff08\u4e5f\u5c31\u662f\u4e3b\u5355\u4f4d\uff0c\u6709\u65f6\u4e5f\u53eb\u56fd\u9645\u5355\u4f4d\uff09\u662f\u7126\u8033\uff0c\u7b80\u79f0\u7126\uff0c\u7b26\u53f7\u662fJ\u3002 \u5b83\u4eec\u7684\u5173\u7cfb\u662f\uff1a 1kW\u00b7h=3.6\u00d710^6J \u7535\u80fd\u516c\u5f0f\uff1aW=UIt=Pt \u8ba1\u7b97 \u00b6 1C=1A*1s \u5047\u8bbe\u7535\u6c60\u7535\u91cf\u662f2200mAh\uff0c\u989d\u5b9a\u7535\u538b\u662f4.2V\uff0c\u90a3\u4e48\u5176\u7535\u91cf\u662f2.2A * 3600s = 7920C\uff0c\u5176\u7535\u80fd\u662f2.2A * 3600s * 4.2V = 33264J \u5047\u8bbe\u8d1f\u8f7d\u7684\u529f\u8017\u7684500mW\uff0c\u989d\u5b9a\u7535\u538b\u662f3.3V\uff0c\u90a3\u4e48\u5b83\u7684\u5de5\u4f5c\u65f6\u957f\u662ft = W/P = 33264J / 500mW = 66528s = 18.48h \u4e5f\u5c31\u76f8\u5f53\u4e8e\u529f\u7387\u76f8\u9664 (2.2A * 4.2V) / 0.5W = 18.48h","title":"\u7535\u6c60\u5de5\u4f5c\u65f6\u95f4\u7684\u8ba1\u7b97"},{"location":"Hardware/battery_work_time/#_1","text":"","title":"\u4ece\u80fd\u91cf\u7684\u89d2\u5ea6\u8ba1\u7b97\u7535\u6c60\u7684\u5de5\u4f5c\u65f6\u95f4"},{"location":"Hardware/battery_work_time/#_2","text":"\u5e93\u4f26\uff1a\u5e93\u4ed1\uff08\u82f1\u8bed\uff1aCoulomb\uff09\u662f\u7535\u91cf\u7684\u5355\u4f4d\uff0c\u7b80\u79f0\u5e93\uff0c\u7b26\u53f7\u4e3aC\u3002\u82e5\u5bfc\u7ebf\u4e2d\u8f7d\u67091\u5b89\u57f9\u7684\u7a33\u5b9a\u7535\u6d41\uff0c\u5219\u57281\u79d2\u5185\u901a\u8fc7\u5bfc\u7ebf\u6a2a\u622a\u9762\u79ef\u7684\u7535\u91cf\u4e3a1\u5e93\u4ed1\u30021C=1A*1S \u7535\u80fd\u7684\u5355\u4f4d\u662f\u201c\u5ea6\u201d\uff0c\u5b83\u7684\u5b66\u540d\u53eb\u505a\u5343\u74e6\u65f6\uff0c\u7b26\u53f7\u662fkW\u00b7h\u3002\u5728\u7269\u7406\u5b66\u4e2d\uff0c\u66f4\u5e38\u7528\u7684\u80fd\u91cf\u5355\u4f4d\uff08\u4e5f\u5c31\u662f\u4e3b\u5355\u4f4d\uff0c\u6709\u65f6\u4e5f\u53eb\u56fd\u9645\u5355\u4f4d\uff09\u662f\u7126\u8033\uff0c\u7b80\u79f0\u7126\uff0c\u7b26\u53f7\u662fJ\u3002 \u5b83\u4eec\u7684\u5173\u7cfb\u662f\uff1a 1kW\u00b7h=3.6\u00d710^6J \u7535\u80fd\u516c\u5f0f\uff1aW=UIt=Pt","title":"\u540d\u8bcd\u89e3\u91ca"},{"location":"Hardware/battery_work_time/#_3","text":"1C=1A*1s \u5047\u8bbe\u7535\u6c60\u7535\u91cf\u662f2200mAh\uff0c\u989d\u5b9a\u7535\u538b\u662f4.2V\uff0c\u90a3\u4e48\u5176\u7535\u91cf\u662f2.2A * 3600s = 7920C\uff0c\u5176\u7535\u80fd\u662f2.2A * 3600s * 4.2V = 33264J \u5047\u8bbe\u8d1f\u8f7d\u7684\u529f\u8017\u7684500mW\uff0c\u989d\u5b9a\u7535\u538b\u662f3.3V\uff0c\u90a3\u4e48\u5b83\u7684\u5de5\u4f5c\u65f6\u957f\u662ft = W/P = 33264J / 500mW = 66528s = 18.48h \u4e5f\u5c31\u76f8\u5f53\u4e8e\u529f\u7387\u76f8\u9664 (2.2A * 4.2V) / 0.5W = 18.48h","title":"\u8ba1\u7b97"},{"location":"Hardware/hardware/","text":"","title":"Hardware"},{"location":"ML/ml_basics/","text":"\u673a\u5668\u5b66\u4e60\u57fa\u7840 \u00b6 \u4e13\u4e1a\u540d\u8bcd \u542b\u4e49 \u5176\u4ed6 \u6fc0\u6d3b\u51fd\u6570 \u5c06\u503c\u9650\u5b9a\u57280\u548c1\u4e4b\u95f4 eg: sigmoid\u51fd\u6570","title":"\u673a\u5668\u5b66\u4e60\u57fa\u7840"},{"location":"ML/ml_basics/#_1","text":"\u4e13\u4e1a\u540d\u8bcd \u542b\u4e49 \u5176\u4ed6 \u6fc0\u6d3b\u51fd\u6570 \u5c06\u503c\u9650\u5b9a\u57280\u548c1\u4e4b\u95f4 eg: sigmoid\u51fd\u6570","title":"\u673a\u5668\u5b66\u4e60\u57fa\u7840"},{"location":"MotorControl/torque/","text":"\u626d\u77e9 \u00b6","title":"Torque"},{"location":"MotorControl/torque/#_1","text":"","title":"\u626d\u77e9"},{"location":"Multimedia/Multimedia/","text":"","title":"Multimedia"},{"location":"Multimedia/Ogg/","text":"Ogg\u7b80\u4ecb \u00b6 Ogg \u662f\u4e00\u79cd\u5c01\u88c5\u683c\u5f0f\uff0cOPUS\u7f16\u7801\u4e00\u822c\u91c7\u7528Ogg\u5c01\u88c5","title":"Ogg"},{"location":"Multimedia/Ogg/#ogg","text":"Ogg \u662f\u4e00\u79cd\u5c01\u88c5\u683c\u5f0f\uff0cOPUS\u7f16\u7801\u4e00\u822c\u91c7\u7528Ogg\u5c01\u88c5","title":"Ogg\u7b80\u4ecb"},{"location":"Multimedia/aac/","text":"AAC\u57fa\u7840\u77e5\u8bc6 \u00b6 \u53c2\u8003\u94fe\u63a51 \u53c2\u8003\u94fe\u63a52 \u53c2\u8003\u94fe\u63a53 \u53c2\u8003\u94fe\u63a54 \u5bf9\u4e8eAAC\u6765\u8bf4\uff0c\"csd-0\"\u5bf9\u5e94ADTS 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 5 bits: object type if (object type == 31) 6 bits + 32: object type 4 bits: frequency index if (frequency index == 15) 24 bits: frequency 4 bits: channel configuration var bits: AOT Specific Config ```` ## Audio Object Types MPEG-4 Audio Object Types: 0: Null 1: AAC Main 2: AAC LC (Low Complexity) 3: AAC SSR (Scalable Sample Rate) 4: AAC LTP (Long Term Prediction) 5: SBR (Spectral Band Replication) 6: AAC Scalable 7: TwinVQ 8: CELP (Code Excited Linear Prediction) 9: HXVC (Harmonic Vector eXcitation Coding) 10: Reserved 11: Reserved 12: TTSI (Text-To-Speech Interface) 13: Main Synthesis 14: Wavetable Synthesis 15: General MIDI 16: Algorithmic Synthesis and Audio Effects 17: ER (Error Resilient) AAC LC 18: Reserved 19: ER AAC LTP 20: ER AAC Scalable 21: ER TwinVQ 22: ER BSAC (Bit-Sliced Arithmetic Coding) 23: ER AAC LD (Low Delay) 24: ER CELP 25: ER HVXC 26: ER HILN (Harmonic and Individual Lines plus Noise) 27: ER Parametric 28: SSC (SinuSoidal Coding) 29: PS (Parametric Stereo) 30: MPEG Surround 31: (Escape value) 32: Layer-1 33: Layer-2 34: Layer-3 35: DST (Direct Stream Transfer) 36: ALS (Audio Lossless) 37: SLS (Scalable LosslesS) 38: SLS non-core 39: ER AAC ELD (Enhanced Low Delay) 40: SMR (Symbolic Music Representation) Simple 41: SMR Main 42: USAC (Unified Speech and Audio Coding) (no SBR) 43: SAOC (Spatial Audio Object Coding) 44: LD MPEG Surround 45: USAC ## Sampling Frequencies There are 13 supported frequencies: 0: 96000 Hz 1: 88200 Hz 2: 64000 Hz 3: 48000 Hz 4: 44100 Hz 5: 32000 Hz 6: 24000 Hz 7: 22050 Hz 8: 16000 Hz 9: 12000 Hz 10: 11025 Hz 11: 8000 Hz 12: 7350 Hz 13: Reserved 14: Reserved 15: frequency is written explictly ## Channel Configurations These are the channel configurations: 0: Defined in AOT Specifc Config 1: 1 channel: front-center 2: 2 channels: front-left, front-right 3: 3 channels: front-center, front-left, front-right 4: 4 channels: front-center, front-left, front-right, back-center 5: 5 channels: front-center, front-left, front-right,back-left, back-right 6: 6 channels: front-center, front-left, front-right, back-left, back-right, LFE-channel 7: 8 channels: front-center, front-left, front-right, side-left, side-right, back-left, back-right, LFE-channel 8-15: Reserved ## \u8ba1\u7b97CDS0 csd[0]\u9ad8\u4e94\u4f4d\u662fprofile csd[0]\u4f4e\u4e09\u4f4d | csd[1]\u6700\u9ad8\u4f4d \u662f\u91c7\u6837\u7387\u7d22\u5f15 ```c int profile = (csd_data[0] >> 3) & 0x1F; int frequency_idx = ((csd_data[0] & 0x7) << 1) | ((csd_data[1] >> 7) & 0x1); int channels = (csd_data[1] >> 3) & 0xF; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 int profile = 2; //AAC LC int freqIdx = 11; //8.0KHz int chanCfg = 1; //CPE \u58f0\u9053\u6570 0001 0101 1000 0001 0001 0001 0101 1001 0000 0x15 0x90 0001 0101 1000 1000 0x15 0x88 int profile = 2; //AAC LC int freqIdx = 8; //16.0KHz 0001 0100 0000 1000 14 08 5 bits: object type AAC_LC 2 0 0010 4 bits: frequency index 48k 3 0011 4 bits: channel configuration CH 2 0010 \u518d\u8865\u4e09\u4f4d 000 48K 2ch 0001 0001 1001 0000 0x11 0x90 16K 1ch 0000 1100 0000 1000 0x0c 0x08","title":"AAC\u7f16\u7801"},{"location":"Multimedia/aac/#aac","text":"\u53c2\u8003\u94fe\u63a51 \u53c2\u8003\u94fe\u63a52 \u53c2\u8003\u94fe\u63a53 \u53c2\u8003\u94fe\u63a54 \u5bf9\u4e8eAAC\u6765\u8bf4\uff0c\"csd-0\"\u5bf9\u5e94ADTS 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 5 bits: object type if (object type == 31) 6 bits + 32: object type 4 bits: frequency index if (frequency index == 15) 24 bits: frequency 4 bits: channel configuration var bits: AOT Specific Config ```` ## Audio Object Types MPEG-4 Audio Object Types: 0: Null 1: AAC Main 2: AAC LC (Low Complexity) 3: AAC SSR (Scalable Sample Rate) 4: AAC LTP (Long Term Prediction) 5: SBR (Spectral Band Replication) 6: AAC Scalable 7: TwinVQ 8: CELP (Code Excited Linear Prediction) 9: HXVC (Harmonic Vector eXcitation Coding) 10: Reserved 11: Reserved 12: TTSI (Text-To-Speech Interface) 13: Main Synthesis 14: Wavetable Synthesis 15: General MIDI 16: Algorithmic Synthesis and Audio Effects 17: ER (Error Resilient) AAC LC 18: Reserved 19: ER AAC LTP 20: ER AAC Scalable 21: ER TwinVQ 22: ER BSAC (Bit-Sliced Arithmetic Coding) 23: ER AAC LD (Low Delay) 24: ER CELP 25: ER HVXC 26: ER HILN (Harmonic and Individual Lines plus Noise) 27: ER Parametric 28: SSC (SinuSoidal Coding) 29: PS (Parametric Stereo) 30: MPEG Surround 31: (Escape value) 32: Layer-1 33: Layer-2 34: Layer-3 35: DST (Direct Stream Transfer) 36: ALS (Audio Lossless) 37: SLS (Scalable LosslesS) 38: SLS non-core 39: ER AAC ELD (Enhanced Low Delay) 40: SMR (Symbolic Music Representation) Simple 41: SMR Main 42: USAC (Unified Speech and Audio Coding) (no SBR) 43: SAOC (Spatial Audio Object Coding) 44: LD MPEG Surround 45: USAC ## Sampling Frequencies There are 13 supported frequencies: 0: 96000 Hz 1: 88200 Hz 2: 64000 Hz 3: 48000 Hz 4: 44100 Hz 5: 32000 Hz 6: 24000 Hz 7: 22050 Hz 8: 16000 Hz 9: 12000 Hz 10: 11025 Hz 11: 8000 Hz 12: 7350 Hz 13: Reserved 14: Reserved 15: frequency is written explictly ## Channel Configurations These are the channel configurations: 0: Defined in AOT Specifc Config 1: 1 channel: front-center 2: 2 channels: front-left, front-right 3: 3 channels: front-center, front-left, front-right 4: 4 channels: front-center, front-left, front-right, back-center 5: 5 channels: front-center, front-left, front-right,back-left, back-right 6: 6 channels: front-center, front-left, front-right, back-left, back-right, LFE-channel 7: 8 channels: front-center, front-left, front-right, side-left, side-right, back-left, back-right, LFE-channel 8-15: Reserved ## \u8ba1\u7b97CDS0 csd[0]\u9ad8\u4e94\u4f4d\u662fprofile csd[0]\u4f4e\u4e09\u4f4d | csd[1]\u6700\u9ad8\u4f4d \u662f\u91c7\u6837\u7387\u7d22\u5f15 ```c int profile = (csd_data[0] >> 3) & 0x1F; int frequency_idx = ((csd_data[0] & 0x7) << 1) | ((csd_data[1] >> 7) & 0x1); int channels = (csd_data[1] >> 3) & 0xF; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 int profile = 2; //AAC LC int freqIdx = 11; //8.0KHz int chanCfg = 1; //CPE \u58f0\u9053\u6570 0001 0101 1000 0001 0001 0001 0101 1001 0000 0x15 0x90 0001 0101 1000 1000 0x15 0x88 int profile = 2; //AAC LC int freqIdx = 8; //16.0KHz 0001 0100 0000 1000 14 08 5 bits: object type AAC_LC 2 0 0010 4 bits: frequency index 48k 3 0011 4 bits: channel configuration CH 2 0010 \u518d\u8865\u4e09\u4f4d 000 48K 2ch 0001 0001 1001 0000 0x11 0x90 16K 1ch 0000 1100 0000 1000 0x0c 0x08","title":"AAC\u57fa\u7840\u77e5\u8bc6"},{"location":"Multimedia/av_synchronization/","text":"\u97f3\u89c6\u9891\u540c\u6b65 \u00b6 1. \u65f6\u95f4\u6233 \u00b6 DTS: decoding time stamp \u89e3\u7801\u65f6\u95f4\u6233 PTS: presentation time stamp \u663e\u793a\u65f6\u95f4\u6233 \u89c6\u9891\u91c7\u7528H264\u7f16\u7801\uff0c\u5176\u89e3\u7801\u548c\u663e\u793a\u987a\u5e8f\u53ef\u80fd\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u5176DTS\u548cPTS\u662f\u4e0d\u4e00\u6837\u7684\uff1b\u97f3\u9891\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff0c\u97f3\u9891\u7684DTS\u548cPTS\u662f\u4e00\u6837\u7684\uff0c\u5bf9\u4e8e\u97f3\u9891\u901a\u5e38\u6211\u4eec\u53ea\u8bf4PTS\u3002 1.1 \u97f3\u9891\u65f6\u95f4\u6233 \u00b6 frame_size: \u97f3\u9891\u5e27\u7684\u5927\u5c0f\uff0c\u97f3\u9891\u7684\u5e27\u662f\u4ee5\u65f6\u95f4\u4e3a\u5355\u4f4d\u7684\uff0c\u6bd4\u59822.5, 5, 10, 20, 40 or 60 ms frame_byte_size\uff1a\u4e00\u5e27\u97f3\u9891\u6309\u7167\u5b57\u8282\u5b58\u50a8\u7684\u5927\u5c0f sample_rate: \u97f3\u9891\u7684\u91c7\u6837\u7387\uff0c\u5e38\u7528\u7684\u6709\uff1a8000,16000,44100,48000 sample_resolution\uff1a\u91c7\u6837\u4f4d\u6570 channel_num\uff1a\u901a\u9053\u6570 time_interval: \u65f6\u95f4\u95f4\u9694\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u64ad\u653eframe_size\u5927\u5c0f\u7684\u97f3\u9891\u6570\u636e\u9700\u8981\u7684\u65f6\u95f4 pts: \u65f6\u95f4\u6233 1 2 3 4 time_interval(ms) = frame_byte_size/channel_num/(sample_resolution/8) * 1000 / sample_rate (ms) pts(ms) = audio_index++ * time_interval (ms) = audio_index++ * (frame_size * 1000) / sample_rate (ms) eg: 1 48k 2ch 16bit frame size \u4e3a10ms \u90a3\u4e48 1 2 3 4 5 6 7 frame_byte_size = 10ms/1000ms * 48k = 480 byte channel_num = 2 sample_resolution = 16 time_interval(ms) = frame_byte_size/channel_num/(sample_resolution/8) * 1000 / sample_rate (ms) = 480/2/(16/2)*1000/48000 (ms) 1.2 \u89c6\u9891\u65f6\u95f4\u6233 \u00b6 fps: \u89c6\u9891\u5e27\u7387 1 pts(ms) = video_index++ * 1000 / fps (ms)","title":"\u97f3\u89c6\u9891\u540c\u6b65"},{"location":"Multimedia/av_synchronization/#_1","text":"","title":"\u97f3\u89c6\u9891\u540c\u6b65"},{"location":"Multimedia/av_synchronization/#1","text":"DTS: decoding time stamp \u89e3\u7801\u65f6\u95f4\u6233 PTS: presentation time stamp \u663e\u793a\u65f6\u95f4\u6233 \u89c6\u9891\u91c7\u7528H264\u7f16\u7801\uff0c\u5176\u89e3\u7801\u548c\u663e\u793a\u987a\u5e8f\u53ef\u80fd\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u5176DTS\u548cPTS\u662f\u4e0d\u4e00\u6837\u7684\uff1b\u97f3\u9891\u4e0d\u5b58\u5728\u8fd9\u4e2a\u95ee\u9898\uff0c\u97f3\u9891\u7684DTS\u548cPTS\u662f\u4e00\u6837\u7684\uff0c\u5bf9\u4e8e\u97f3\u9891\u901a\u5e38\u6211\u4eec\u53ea\u8bf4PTS\u3002","title":"1. \u65f6\u95f4\u6233"},{"location":"Multimedia/av_synchronization/#11","text":"frame_size: \u97f3\u9891\u5e27\u7684\u5927\u5c0f\uff0c\u97f3\u9891\u7684\u5e27\u662f\u4ee5\u65f6\u95f4\u4e3a\u5355\u4f4d\u7684\uff0c\u6bd4\u59822.5, 5, 10, 20, 40 or 60 ms frame_byte_size\uff1a\u4e00\u5e27\u97f3\u9891\u6309\u7167\u5b57\u8282\u5b58\u50a8\u7684\u5927\u5c0f sample_rate: \u97f3\u9891\u7684\u91c7\u6837\u7387\uff0c\u5e38\u7528\u7684\u6709\uff1a8000,16000,44100,48000 sample_resolution\uff1a\u91c7\u6837\u4f4d\u6570 channel_num\uff1a\u901a\u9053\u6570 time_interval: \u65f6\u95f4\u95f4\u9694\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u64ad\u653eframe_size\u5927\u5c0f\u7684\u97f3\u9891\u6570\u636e\u9700\u8981\u7684\u65f6\u95f4 pts: \u65f6\u95f4\u6233 1 2 3 4 time_interval(ms) = frame_byte_size/channel_num/(sample_resolution/8) * 1000 / sample_rate (ms) pts(ms) = audio_index++ * time_interval (ms) = audio_index++ * (frame_size * 1000) / sample_rate (ms) eg: 1 48k 2ch 16bit frame size \u4e3a10ms \u90a3\u4e48 1 2 3 4 5 6 7 frame_byte_size = 10ms/1000ms * 48k = 480 byte channel_num = 2 sample_resolution = 16 time_interval(ms) = frame_byte_size/channel_num/(sample_resolution/8) * 1000 / sample_rate (ms) = 480/2/(16/2)*1000/48000 (ms)","title":"1.1 \u97f3\u9891\u65f6\u95f4\u6233"},{"location":"Multimedia/av_synchronization/#12","text":"fps: \u89c6\u9891\u5e27\u7387 1 pts(ms) = video_index++ * 1000 / fps (ms)","title":"1.2 \u89c6\u9891\u65f6\u95f4\u6233"},{"location":"Multimedia/easydarwin/","text":"EasyDarwin RTSP \u00b6 1.EasyDarwin \u00b6 \u4e0b\u8f7d\u5730\u5740EasyDarwin \u542f\u52a8EasyDarwin\uff08\u6ce8\u610f\u5173\u95edVPN\uff09 2.\u4f7f\u7528FFMPEG\u63a8\u6d41 \u00b6 \u5355\u6b21\u63a8\u6d41 1 2 # \u5176\u4e2d192.168.1.13\u4e3a\u8fd0\u884cEasyDarwin\u670d\u52a1\u7684\u7535\u8111 ffmpeg -re -i test.mp4 -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://192.168.1.13:554/test \u5faa\u73af\u63a8\u6d41 1 2 # \u5176\u4e2d192.168.1.13\u4e3a\u8fd0\u884cEasyDarwin\u670d\u52a1\u7684\u7535\u8111 ffmpeg -re -stream_loop -1 -i test.mp4 -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://192.168.1.13:554/test","title":"EasyDarwin"},{"location":"Multimedia/easydarwin/#easydarwin-rtsp","text":"","title":"EasyDarwin RTSP"},{"location":"Multimedia/easydarwin/#1easydarwin","text":"\u4e0b\u8f7d\u5730\u5740EasyDarwin \u542f\u52a8EasyDarwin\uff08\u6ce8\u610f\u5173\u95edVPN\uff09","title":"1.EasyDarwin"},{"location":"Multimedia/easydarwin/#2ffmpeg","text":"\u5355\u6b21\u63a8\u6d41 1 2 # \u5176\u4e2d192.168.1.13\u4e3a\u8fd0\u884cEasyDarwin\u670d\u52a1\u7684\u7535\u8111 ffmpeg -re -i test.mp4 -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://192.168.1.13:554/test \u5faa\u73af\u63a8\u6d41 1 2 # \u5176\u4e2d192.168.1.13\u4e3a\u8fd0\u884cEasyDarwin\u670d\u52a1\u7684\u7535\u8111 ffmpeg -re -stream_loop -1 -i test.mp4 -rtsp_transport tcp -vcodec h264 -f rtsp rtsp://192.168.1.13:554/test","title":"2.\u4f7f\u7528FFMPEG\u63a8\u6d41"},{"location":"Multimedia/ffmpeg_api/","text":"FFMPEG API\u4f7f\u7528\u4ecb\u7ecd \u00b6 1.\u6e90\u7801\u7f16\u8bd1 \u00b6 \u4e0b\u8f7d\u6e90\u7801 \u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u7f16\u8bd1\u6e90\u7801 1 2 3 4 5 6 # make install\u4f1a\u5c06\u7f16\u8bd1\u51fa\u7684\u5e93\u3001\u5934\u6587\u4ef6\u548c.pc\u6587\u4ef6\u90fd\u5b89\u88c5\u5230local_build ./configure --prefix=$PWD/local_build make make install 2.pkg-config\u4f7f\u7528 \u00b6 FFMPEG\u7f16\u8bd1\u5b89\u88c5\u540e\uff0c\u5176.pc\u6587\u4ef6\u90fd\u5728ffmpeg-x.x/local_build/lib/pkgconfig\u4e2d\uff0cpkg-config\u65e0\u6cd5\u627e\u5230\u5b83\u4eec\uff0c\u6240\u4ee5\u9700\u8981\u5c06\u5176 \u590d\u5236\u5230pkg-config\u7684\u641c\u7d22\u8def\u5f84\u4e2d 1 sudo cp ffmpeg-x.x/local_build/lib/pkgconfig/* /usr/lib/x86_64-linux-gnu/pkgconfig \u6ce8\u610f\uff1a\u4f60\u4e5f\u53ef\u4ee5\u5355\u72ec\u6dfb\u52a0\u4e00\u4e2apkg-config\uff0c\u4f46\u662f\u8bb0\u5f97\u5220\u9664\u65e7\u7248\u672c\uff1b\u590d\u5236\u6709\u4e00\u4e2a\u597d\u5904\uff0c\u80fd\u591f\u8986\u76d6\u65e7\u7248\u672c 1 2 # \u67e5\u770bpkg-config\u9ed8\u8ba4\u641c\u7d22\u8def\u5f84 pkg-config --variable pc_path pkg-config 3.\u7f16\u8bd1\u4f7f\u7528\u4f8b\u7a0b \u00b6 1 2 3 cd ffmpeg-x.x/doc/example gcc -o transcode_aac transcode_aac.c `pkg-config --libs --cflags libavcodec libavformat libavutil libswresample`","title":"FFMPEG API"},{"location":"Multimedia/ffmpeg_api/#ffmpeg-api","text":"","title":"FFMPEG API\u4f7f\u7528\u4ecb\u7ecd"},{"location":"Multimedia/ffmpeg_api/#1","text":"\u4e0b\u8f7d\u6e90\u7801 \u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u7f16\u8bd1\u6e90\u7801 1 2 3 4 5 6 # make install\u4f1a\u5c06\u7f16\u8bd1\u51fa\u7684\u5e93\u3001\u5934\u6587\u4ef6\u548c.pc\u6587\u4ef6\u90fd\u5b89\u88c5\u5230local_build ./configure --prefix=$PWD/local_build make make install","title":"1.\u6e90\u7801\u7f16\u8bd1"},{"location":"Multimedia/ffmpeg_api/#2pkg-config","text":"FFMPEG\u7f16\u8bd1\u5b89\u88c5\u540e\uff0c\u5176.pc\u6587\u4ef6\u90fd\u5728ffmpeg-x.x/local_build/lib/pkgconfig\u4e2d\uff0cpkg-config\u65e0\u6cd5\u627e\u5230\u5b83\u4eec\uff0c\u6240\u4ee5\u9700\u8981\u5c06\u5176 \u590d\u5236\u5230pkg-config\u7684\u641c\u7d22\u8def\u5f84\u4e2d 1 sudo cp ffmpeg-x.x/local_build/lib/pkgconfig/* /usr/lib/x86_64-linux-gnu/pkgconfig \u6ce8\u610f\uff1a\u4f60\u4e5f\u53ef\u4ee5\u5355\u72ec\u6dfb\u52a0\u4e00\u4e2apkg-config\uff0c\u4f46\u662f\u8bb0\u5f97\u5220\u9664\u65e7\u7248\u672c\uff1b\u590d\u5236\u6709\u4e00\u4e2a\u597d\u5904\uff0c\u80fd\u591f\u8986\u76d6\u65e7\u7248\u672c 1 2 # \u67e5\u770bpkg-config\u9ed8\u8ba4\u641c\u7d22\u8def\u5f84 pkg-config --variable pc_path pkg-config","title":"2.pkg-config\u4f7f\u7528"},{"location":"Multimedia/ffmpeg_api/#3","text":"1 2 3 cd ffmpeg-x.x/doc/example gcc -o transcode_aac transcode_aac.c `pkg-config --libs --cflags libavcodec libavformat libavutil libswresample`","title":"3.\u7f16\u8bd1\u4f7f\u7528\u4f8b\u7a0b"},{"location":"Multimedia/ffmpeg_command/","text":"FFMPEG\u5e38\u7528\u547d\u4ee4 \u00b6 \u53c2\u8003\u6587\u6863 \u00b6 \u58f0\u5361-FFMPEG\u5b98\u65b9\u6587\u6863 \u5e38\u7528\u547d\u4ee4 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 # \u67e5\u770b\u58f0\u5361\u8bbe\u5907 cat /proc/asound/cards # FFMPEG\u5f55\u97f3\u547d\u4ee4 hw:CARD [ ,DEV [ ,SUBDEV ]] ffmpeg -f alsa -i hw:0 alsaout.wav # record ffmpeg -f video4linux2 -s 320 *300 -i /dev/video0 test.asf # play ffplay test.asf # record and play ffplay -f video4linux2 -framerate 30 -video_size hd720 /dev/video0 # FFMPEG \u4eceMP4\u4e2d\u62bd\u53d6H264\u6587\u4ef6 ffmpeg -i test.mp4 -an -vcodec libx264 -crf 23 test.h264 ffmpeg -i test.mp4 -codec copy -bsf h264_mp4toannexb -f h264 test.h264 # FFMPEG\u4e3a\u89c6\u9891\u6dfb\u52a0Log ffmpeg -i linuxidc.mp4 -i linuxidc.com.png -filter_complex overlay linuxidc.com.mp4 # FFMPEG\u4ee5\u5e27\u7684\u65b9\u5f0f\u67e5\u770bMP4\u5c01\u88c5\u4fe1\u606f ffprobe -i example.mp4 -print_format json -show_frames # FFMPEG\u67e5\u770bYUV\u56fe\u50cf / YUV\u89c6\u9891 # \u56fe\u7247\u7684\u5c3a\u5bf8\u5fc5\u987b\u5199\u5bf9\uff0c\u5426\u5219\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u64ad\u653e ffplay -video_size 1280x720 test.yuv # mp4\u8f6cflv ffmpeg -i example.mp4 -c:v libx264 -crf 24 example.flv ## FFMPEG\u89c6\u9891HLS\u63a8\u6d41 ffmpeg -re -i example.flv -vcodec copy -acodec copy -f flv rtmp://localhost:1935/hls/stream # FFMPEG\u6444\u50cf\u5934HLS\u63a8\u6d41 ffmpeg -f video4linux2 -i /dev/video0 -c:v libx264 -preset ultrafast -acodec libmp3lame -ar 44100 -ac 1 -f flv rtmp://localhost:1935/hls/stream \u547d\u4ee4\u53c2\u6570 \u00b6 \u53c2\u6570 \u542b\u4e49 -f \u5f3a\u8feb\u91c7\u7528\u683c\u5f0ffmt -i filename \u8f93\u5165\u6587\u4ef6 -s size \u8bbe\u7f6e\u5e27\u5927\u5c0f \u9ed8\u8ba4\u662f160x128 -r \u8bbe\u7f6e\u5e27\u9891\uff0c\u9ed8\u8ba425 \uff08\u5f85\u9a8c\u8bc1\uff0c\u786e\u8ba4\u975e\u6807\u51c6\u6862\u7387\u4f1a\u5bfc\u81f4\u97f3\u753b\u4e0d\u540c\u6b65\uff0c\u6240\u4ee5\u53ea\u80fd\u8bbe\u5b9a\u4e3a15\u6216\u800529.97\uff09 -ab bitrate\u8bbe\u7f6e\u97f3\u9891\u7801\u7387 -ar freq \u8bbe\u7f6e\u97f3\u9891\u91c7\u6837\u7387 -ac channels\u8bbe\u7f6e\u901a\u9053\uff0c\u9ed8\u8ba4\u4e3a1 -vd device \u8bbe\u7f6e\u89c6\u9891\u6355\u83b7\u8bbe\u5907 eg:/dev/video0 -av device \u8bbe\u7f6e\u97f3\u9891\u8bbe\u5907 eg:/dev/dsp -vcodec c:v is an abbreviated version of codec:v vcodec is an alias of codec:v So all 3 function the same, but are not limited to 'copy' only. It is used to specify the codec, or copy. For example ffmpeg -i INPUT -map 0 -c:v libx264 -c:a copy OUTPUT encodes all video streams with libx264 and copies all audio streams. This could also be written as ffmpeg -i INPUT -map 0 -codec:v libx264 -acodec copy OUTPUT or ffmpeg -i INPUT -map 0 -vcodec libx264 -codec:a copy OUTPUT","title":"FFMPEG\u547d\u4ee4"},{"location":"Multimedia/ffmpeg_command/#ffmpeg","text":"","title":"FFMPEG\u5e38\u7528\u547d\u4ee4"},{"location":"Multimedia/ffmpeg_command/#_1","text":"\u58f0\u5361-FFMPEG\u5b98\u65b9\u6587\u6863","title":"\u53c2\u8003\u6587\u6863"},{"location":"Multimedia/ffmpeg_command/#_2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 # \u67e5\u770b\u58f0\u5361\u8bbe\u5907 cat /proc/asound/cards # FFMPEG\u5f55\u97f3\u547d\u4ee4 hw:CARD [ ,DEV [ ,SUBDEV ]] ffmpeg -f alsa -i hw:0 alsaout.wav # record ffmpeg -f video4linux2 -s 320 *300 -i /dev/video0 test.asf # play ffplay test.asf # record and play ffplay -f video4linux2 -framerate 30 -video_size hd720 /dev/video0 # FFMPEG \u4eceMP4\u4e2d\u62bd\u53d6H264\u6587\u4ef6 ffmpeg -i test.mp4 -an -vcodec libx264 -crf 23 test.h264 ffmpeg -i test.mp4 -codec copy -bsf h264_mp4toannexb -f h264 test.h264 # FFMPEG\u4e3a\u89c6\u9891\u6dfb\u52a0Log ffmpeg -i linuxidc.mp4 -i linuxidc.com.png -filter_complex overlay linuxidc.com.mp4 # FFMPEG\u4ee5\u5e27\u7684\u65b9\u5f0f\u67e5\u770bMP4\u5c01\u88c5\u4fe1\u606f ffprobe -i example.mp4 -print_format json -show_frames # FFMPEG\u67e5\u770bYUV\u56fe\u50cf / YUV\u89c6\u9891 # \u56fe\u7247\u7684\u5c3a\u5bf8\u5fc5\u987b\u5199\u5bf9\uff0c\u5426\u5219\u53ef\u80fd\u65e0\u6cd5\u6b63\u5e38\u64ad\u653e ffplay -video_size 1280x720 test.yuv # mp4\u8f6cflv ffmpeg -i example.mp4 -c:v libx264 -crf 24 example.flv ## FFMPEG\u89c6\u9891HLS\u63a8\u6d41 ffmpeg -re -i example.flv -vcodec copy -acodec copy -f flv rtmp://localhost:1935/hls/stream # FFMPEG\u6444\u50cf\u5934HLS\u63a8\u6d41 ffmpeg -f video4linux2 -i /dev/video0 -c:v libx264 -preset ultrafast -acodec libmp3lame -ar 44100 -ac 1 -f flv rtmp://localhost:1935/hls/stream","title":"\u5e38\u7528\u547d\u4ee4"},{"location":"Multimedia/ffmpeg_command/#_3","text":"\u53c2\u6570 \u542b\u4e49 -f \u5f3a\u8feb\u91c7\u7528\u683c\u5f0ffmt -i filename \u8f93\u5165\u6587\u4ef6 -s size \u8bbe\u7f6e\u5e27\u5927\u5c0f \u9ed8\u8ba4\u662f160x128 -r \u8bbe\u7f6e\u5e27\u9891\uff0c\u9ed8\u8ba425 \uff08\u5f85\u9a8c\u8bc1\uff0c\u786e\u8ba4\u975e\u6807\u51c6\u6862\u7387\u4f1a\u5bfc\u81f4\u97f3\u753b\u4e0d\u540c\u6b65\uff0c\u6240\u4ee5\u53ea\u80fd\u8bbe\u5b9a\u4e3a15\u6216\u800529.97\uff09 -ab bitrate\u8bbe\u7f6e\u97f3\u9891\u7801\u7387 -ar freq \u8bbe\u7f6e\u97f3\u9891\u91c7\u6837\u7387 -ac channels\u8bbe\u7f6e\u901a\u9053\uff0c\u9ed8\u8ba4\u4e3a1 -vd device \u8bbe\u7f6e\u89c6\u9891\u6355\u83b7\u8bbe\u5907 eg:/dev/video0 -av device \u8bbe\u7f6e\u97f3\u9891\u8bbe\u5907 eg:/dev/dsp -vcodec c:v is an abbreviated version of codec:v vcodec is an alias of codec:v So all 3 function the same, but are not limited to 'copy' only. It is used to specify the codec, or copy. For example ffmpeg -i INPUT -map 0 -c:v libx264 -c:a copy OUTPUT encodes all video streams with libx264 and copies all audio streams. This could also be written as ffmpeg -i INPUT -map 0 -codec:v libx264 -acodec copy OUTPUT or ffmpeg -i INPUT -map 0 -vcodec libx264 -codec:a copy OUTPUT","title":"\u547d\u4ee4\u53c2\u6570"},{"location":"Multimedia/ffmpeg_compile/","text":"FFMPEG\u7f16\u8bd1 \u00b6 \u4e00\u3001\u5378\u8f7dUbuntu\u9884\u88c5FFMPEG \u00b6 1 2 3 4 sudo apt-get --purge remove ffmpeg # \u5982\u679c\u65e0\u6cd5\u5378\u8f7d\u5e72\u51c0\uff0c\u90a3\u4e48\u627e\u5230ffmpeg\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5c06\u5176\u5220\u9664 which ffmpeg \u4e8c\u3001\u7f16\u8bd1\u5b89\u88c5 \u00b6 2.1.\u6e90\u7801\u7f16\u8bd1 \u00b6 \u4e0b\u8f7d\u6e90\u7801 \u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u7f16\u8bd1FFMPEG\u6e90\u7801 1 2 3 4 5 6 # make install\u4f1a\u5c06\u7f16\u8bd1\u51fa\u7684\u5e93\u3001\u5934\u6587\u4ef6\u548c.pc\u6587\u4ef6\u90fd\u5b89\u88c5\u5230local_build ./configure --prefix=$PWD/local_build make make install Note \u4ee5\u4e0a\u7f16\u8bd1\uff0c\u53ea\u80fd\u7f16\u8bd1\u51faffmpeg\u548cffprobe 2.2.\u7f16\u8bd1ffplay \u00b6 \u4e0b\u8f7dSDL2.0 \u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u7f16\u8bd1SDL\u6e90\u7801 1 2 3 4 5 6 ./configure make make install \u914d\u7f6e\u4f7f\u80fdSDL --enable-sdl \uff0c\u7136\u540e\u91cd\u65b0\u7f16\u8bd1FFMPEG 1 2 3 4 5 ./configure --enable-sdl --prefix=$PWD/local_build make make install \u4f7f\u7528\u81ea\u5df1\u7f16\u8bd1\u7684FFMPEG\u9047\u5230\u7684\u95ee\u9898 \u00b6 ffmpeg -i example.mp4 -c:v libx264 -crf 24 example.flv \u62a5\u9519 Unrecognized option 'crf' \u539f\u56e0\uff1a\u7f16\u8bd1\u7684\u65f6\u5019\u6ca1\u6709\u4f7f\u80fd libx264 \u89e3\u51b3\uff1a 1 2 3 4 5 ./configure --enable-libx264 --enable-gpl make sudo make install","title":"FFMPEG\u7f16\u8bd1"},{"location":"Multimedia/ffmpeg_compile/#ffmpeg","text":"","title":"FFMPEG\u7f16\u8bd1"},{"location":"Multimedia/ffmpeg_compile/#ubuntuffmpeg","text":"1 2 3 4 sudo apt-get --purge remove ffmpeg # \u5982\u679c\u65e0\u6cd5\u5378\u8f7d\u5e72\u51c0\uff0c\u90a3\u4e48\u627e\u5230ffmpeg\u7684\u53ef\u6267\u884c\u6587\u4ef6\uff0c\u5c06\u5176\u5220\u9664 which ffmpeg","title":"\u4e00\u3001\u5378\u8f7dUbuntu\u9884\u88c5FFMPEG"},{"location":"Multimedia/ffmpeg_compile/#_1","text":"","title":"\u4e8c\u3001\u7f16\u8bd1\u5b89\u88c5"},{"location":"Multimedia/ffmpeg_compile/#21","text":"\u4e0b\u8f7d\u6e90\u7801 \u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u7f16\u8bd1FFMPEG\u6e90\u7801 1 2 3 4 5 6 # make install\u4f1a\u5c06\u7f16\u8bd1\u51fa\u7684\u5e93\u3001\u5934\u6587\u4ef6\u548c.pc\u6587\u4ef6\u90fd\u5b89\u88c5\u5230local_build ./configure --prefix=$PWD/local_build make make install Note \u4ee5\u4e0a\u7f16\u8bd1\uff0c\u53ea\u80fd\u7f16\u8bd1\u51faffmpeg\u548cffprobe","title":"2.1.\u6e90\u7801\u7f16\u8bd1"},{"location":"Multimedia/ffmpeg_compile/#22ffplay","text":"\u4e0b\u8f7dSDL2.0 \u4f7f\u7528\u4e0b\u9762\u7684\u547d\u4ee4\u7f16\u8bd1SDL\u6e90\u7801 1 2 3 4 5 6 ./configure make make install \u914d\u7f6e\u4f7f\u80fdSDL --enable-sdl \uff0c\u7136\u540e\u91cd\u65b0\u7f16\u8bd1FFMPEG 1 2 3 4 5 ./configure --enable-sdl --prefix=$PWD/local_build make make install","title":"2.2.\u7f16\u8bd1ffplay"},{"location":"Multimedia/ffmpeg_compile/#ffmpeg_1","text":"ffmpeg -i example.mp4 -c:v libx264 -crf 24 example.flv \u62a5\u9519 Unrecognized option 'crf' \u539f\u56e0\uff1a\u7f16\u8bd1\u7684\u65f6\u5019\u6ca1\u6709\u4f7f\u80fd libx264 \u89e3\u51b3\uff1a 1 2 3 4 5 ./configure --enable-libx264 --enable-gpl make sudo make install","title":"\u4f7f\u7528\u81ea\u5df1\u7f16\u8bd1\u7684FFMPEG\u9047\u5230\u7684\u95ee\u9898"},{"location":"Multimedia/linux_shell_cmd_for_multimedia/","text":"\u591a\u5a92\u4f53\u76f8\u5173\u7684Linux Shell\u547d\u4ee4 \u00b6 1 2 3 # \u67e5\u770b\u6444\u50cf\u5934\u6570\u636e sudo apt install v4l-utils v4l2-ctl -d /dev/video0 --all","title":"Linux Shell\u547d\u4ee4"},{"location":"Multimedia/linux_shell_cmd_for_multimedia/#linux-shell","text":"1 2 3 # \u67e5\u770b\u6444\u50cf\u5934\u6570\u636e sudo apt install v4l-utils v4l2-ctl -d /dev/video0 --all","title":"\u591a\u5a92\u4f53\u76f8\u5173\u7684Linux Shell\u547d\u4ee4"},{"location":"Multimedia/nginx/","text":"nginx \u00b6 \u4e00\u3001\u5378\u8f7dUbuntu\u9884\u5b89\u88c5\u7684nginx \u00b6 Ubuntu\u9884\u5b89\u88c5\u4e86nginx\uff0c\u4f46\u6211\u4eec\u5e0c\u671b\u4ece\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5\u4f7f\u7528\uff0c\u6240\u4ee5\u9996\u5148\u5378\u8f7dUbuntu\u9884\u88c5\u7684nginx\u3002 1 2 3 4 5 6 7 8 # \u5217\u51fanginx\u76f8\u5173\u8f6f\u4ef6 dpkg --get-selections | grep nginx # \u5c06\u4e0a\u9762\u6307\u4ee4\u5217\u51fa\u7684\u8f6f\u4ef6\u4e00\u4e00\u5378\u8f7d sudo apt-get --purge remove nginx sudo apt-get --purge remove nginx-common sudo apt-get --purge remove nginx-core \u4e8c\u3001\u4ece\u6e90\u7801\u5b89\u88c5nginx \u00b6 2.1.\u4e0b\u8f7d\u6e90\u7801 \u00b6 nginx\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740 2.2.\u7f16\u8bd1\u5b89\u88c5 \u00b6 \u4f7f\u7528nginx\u9ed8\u8ba4\u914d\u7f6e 1 2 3 4 5 ./configure make make install \u4f7f\u7528 nginx-rtmp-module 1 2 3 ./configure --add-module = /path/to/nginx-rtmp-module make make install 2.3.\u67e5\u770b80\u7aef\u53e3\u4f7f\u7528\u60c5\u51b5 \u00b6 1 2 3 lsof -i:80 # \u6216\u8005 netstat -tunlp | grep 80 \u5982\u679c80\u7aef\u53e3\u5df2\u88ab\u522b\u7684\u7a0b\u5e8f\u7ed1\u5b9a\uff0c\u90a3\u4e48\u8bf7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3 sudo vim /user/local/nginx/conf/nginx.conf \uff0c\u6216\u8005\u6740\u6b7b\u5360\u752880\u7aef\u53e3\u7684\u7a0b\u5e8f 2.4.\u542f\u52a8nginx \u00b6 \u5148\u8fdb\u5165nginx\u7684\u5b89\u88c5\u76ee\u5f55 /user/local/nginx/sbin \u8fd0\u884cnginx sudo ./nginx 2.5.\u67e5\u770bnginx\u662f\u5426\u6b63\u786e\u8fd0\u884c \u00b6 1 ps -ef | grep nginx 2.6.\u505c\u6b62nginx \u00b6 1 2 3 sudo nginx -s stop # \u6216\u8005\u76f4\u63a5kill sudo kill -9 nginx_pid \u4e09\u3001nginx\u914d\u7f6e \u00b6 HLS\u670d\u52a1\u5668 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 #user nobody; worker_processes 1; #error_log logs/error.log; #error_log logs/error.log notice; #error_log logs/error.log info; #pid logs/nginx.pid; events { worker_connections 1024; } rtmp { server { listen 1935; chunk_size 4000; application hls { live on; hls on; hls_path /tmp/hls; hls_fragment 5s; } } } http { include mime.types; default_type application/octet-stream; #log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' # '$status $body_bytes_sent \"$http_referer\" ' # '\"$http_user_agent\" \"$http_x_forwarded_for\"'; #access_log logs/access.log main; sendfile on; #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #gzip on; server { listen 80; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; location / { root html; index index.html index.htm; } #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } # This URL provides RTMP statistics in XML location /stat { rtmp_stat all; # Use this stylesheet to view XML as web page # in browser rtmp_stat_stylesheet stat.xsl; } location /stat.xsl { # XML stylesheet to view RTMP stats. # Copy stat.xsl wherever you want # and put the full directory path here root /path/to/stat.xsl/; } location /hls { # Serve HLS fragments types { application/vnd.apple.mpegurl m3u8; video/mp2t ts; } root /tmp; add_header Cache-Control no-cache; } location /dash { # Serve DASH fragments root /tmp; add_header Cache-Control no-cache; } # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ { # proxy_pass http://127.0.0.1; #} # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ { # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #} # deny access to .htaccess files, if Apache's document root # concurs with nginx's one # #location ~ /\\.ht { # deny all; #} } # another virtual host using mix of IP-, name-, and port-based configuration # #server { # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / { # root html; # index index.html index.htm; # } #} # HTTPS server # #server { # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location / { # root html; # index index.html index.htm; # } #} }","title":"nginx"},{"location":"Multimedia/nginx/#nginx","text":"","title":"nginx"},{"location":"Multimedia/nginx/#ubuntunginx","text":"Ubuntu\u9884\u5b89\u88c5\u4e86nginx\uff0c\u4f46\u6211\u4eec\u5e0c\u671b\u4ece\u6e90\u7801\u7f16\u8bd1\u5b89\u88c5\u4f7f\u7528\uff0c\u6240\u4ee5\u9996\u5148\u5378\u8f7dUbuntu\u9884\u88c5\u7684nginx\u3002 1 2 3 4 5 6 7 8 # \u5217\u51fanginx\u76f8\u5173\u8f6f\u4ef6 dpkg --get-selections | grep nginx # \u5c06\u4e0a\u9762\u6307\u4ee4\u5217\u51fa\u7684\u8f6f\u4ef6\u4e00\u4e00\u5378\u8f7d sudo apt-get --purge remove nginx sudo apt-get --purge remove nginx-common sudo apt-get --purge remove nginx-core","title":"\u4e00\u3001\u5378\u8f7dUbuntu\u9884\u5b89\u88c5\u7684nginx"},{"location":"Multimedia/nginx/#nginx_1","text":"","title":"\u4e8c\u3001\u4ece\u6e90\u7801\u5b89\u88c5nginx"},{"location":"Multimedia/nginx/#21","text":"nginx\u5b98\u7f51\u4e0b\u8f7d\u5730\u5740","title":"2.1.\u4e0b\u8f7d\u6e90\u7801"},{"location":"Multimedia/nginx/#22","text":"\u4f7f\u7528nginx\u9ed8\u8ba4\u914d\u7f6e 1 2 3 4 5 ./configure make make install \u4f7f\u7528 nginx-rtmp-module 1 2 3 ./configure --add-module = /path/to/nginx-rtmp-module make make install","title":"2.2.\u7f16\u8bd1\u5b89\u88c5"},{"location":"Multimedia/nginx/#2380","text":"1 2 3 lsof -i:80 # \u6216\u8005 netstat -tunlp | grep 80 \u5982\u679c80\u7aef\u53e3\u5df2\u88ab\u522b\u7684\u7a0b\u5e8f\u7ed1\u5b9a\uff0c\u90a3\u4e48\u8bf7\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u4e2d\u7684\u7aef\u53e3 sudo vim /user/local/nginx/conf/nginx.conf \uff0c\u6216\u8005\u6740\u6b7b\u5360\u752880\u7aef\u53e3\u7684\u7a0b\u5e8f","title":"2.3.\u67e5\u770b80\u7aef\u53e3\u4f7f\u7528\u60c5\u51b5"},{"location":"Multimedia/nginx/#24nginx","text":"\u5148\u8fdb\u5165nginx\u7684\u5b89\u88c5\u76ee\u5f55 /user/local/nginx/sbin \u8fd0\u884cnginx sudo ./nginx","title":"2.4.\u542f\u52a8nginx"},{"location":"Multimedia/nginx/#25nginx","text":"1 ps -ef | grep nginx","title":"2.5.\u67e5\u770bnginx\u662f\u5426\u6b63\u786e\u8fd0\u884c"},{"location":"Multimedia/nginx/#26nginx","text":"1 2 3 sudo nginx -s stop # \u6216\u8005\u76f4\u63a5kill sudo kill -9 nginx_pid","title":"2.6.\u505c\u6b62nginx"},{"location":"Multimedia/nginx/#nginx_2","text":"HLS\u670d\u52a1\u5668 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 #user nobody; worker_processes 1; #error_log logs/error.log; #error_log logs/error.log notice; #error_log logs/error.log info; #pid logs/nginx.pid; events { worker_connections 1024; } rtmp { server { listen 1935; chunk_size 4000; application hls { live on; hls on; hls_path /tmp/hls; hls_fragment 5s; } } } http { include mime.types; default_type application/octet-stream; #log_format main '$remote_addr - $remote_user [$time_local] \"$request\" ' # '$status $body_bytes_sent \"$http_referer\" ' # '\"$http_user_agent\" \"$http_x_forwarded_for\"'; #access_log logs/access.log main; sendfile on; #tcp_nopush on; #keepalive_timeout 0; keepalive_timeout 65; #gzip on; server { listen 80; server_name localhost; #charset koi8-r; #access_log logs/host.access.log main; location / { root html; index index.html index.htm; } #error_page 404 /404.html; # redirect server error pages to the static page /50x.html # error_page 500 502 503 504 /50x.html; location = /50x.html { root html; } # This URL provides RTMP statistics in XML location /stat { rtmp_stat all; # Use this stylesheet to view XML as web page # in browser rtmp_stat_stylesheet stat.xsl; } location /stat.xsl { # XML stylesheet to view RTMP stats. # Copy stat.xsl wherever you want # and put the full directory path here root /path/to/stat.xsl/; } location /hls { # Serve HLS fragments types { application/vnd.apple.mpegurl m3u8; video/mp2t ts; } root /tmp; add_header Cache-Control no-cache; } location /dash { # Serve DASH fragments root /tmp; add_header Cache-Control no-cache; } # proxy the PHP scripts to Apache listening on 127.0.0.1:80 # #location ~ \\.php$ { # proxy_pass http://127.0.0.1; #} # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000 # #location ~ \\.php$ { # root html; # fastcgi_pass 127.0.0.1:9000; # fastcgi_index index.php; # fastcgi_param SCRIPT_FILENAME /scripts$fastcgi_script_name; # include fastcgi_params; #} # deny access to .htaccess files, if Apache's document root # concurs with nginx's one # #location ~ /\\.ht { # deny all; #} } # another virtual host using mix of IP-, name-, and port-based configuration # #server { # listen 8000; # listen somename:8080; # server_name somename alias another.alias; # location / { # root html; # index index.html index.htm; # } #} # HTTPS server # #server { # listen 443 ssl; # server_name localhost; # ssl_certificate cert.pem; # ssl_certificate_key cert.key; # ssl_session_cache shared:SSL:1m; # ssl_session_timeout 5m; # ssl_ciphers HIGH:!aNULL:!MD5; # ssl_prefer_server_ciphers on; # location / { # root html; # index index.html index.htm; # } #} }","title":"\u4e09\u3001nginx\u914d\u7f6e"},{"location":"Multimedia/optical/","text":"\u5149\u5b66\u8bbe\u8ba1\u77e5\u8bc6 \u00b6 \u89c6\u573a\u548c\u5206\u8fa8\u7387\u9650\u5b9a\u4e86\uff0c\u50cf\u5143\u8d8a\u5c0f\u955c\u5934\u7126\u8ddd\u5c31\u8d8a\u5c0f\uff0c\u6574\u4e2a\u7cfb\u7edf\u7684\u91cd\u91cf\u4e5f\u5c31\u4f1a\u8d8a\u5c0f \u7406\u8bba\u6210\u50cf\u6781\u9650\u5206\u8fa8\u7387\u4e3a1.22\u00d7\u6ce2\u957f\u00d7F#,\u50cf\u5143\u592a\u5c0f\u4e86\uff0c\u76ee\u6807\u867d\u7136\u5927\u5c0f\u70b98\u4e2a\u50cf\u5143\uff0c\u4f468\u4e2a\u50cf\u5143\u4e4b\u95f4\u4e0d\u80fd\u6e05\u6670\u5206\u8fa8 \u50cf\u514315um\u5de6\u53f3\uff0c1500m\u7684\u4eba\u70b98\u4e2a\u50cf\u7d20\uff0c\u7126\u8ddd100mm\u5de6\u53f3\uff0c\u957f\u6ce2\u975e\u5236\u51b7\u4e00\u822c\u8981\u505a\u5230F1\uff0c\u90a3\u53e3\u5f84\u5c31\u8981100mm\uff0c\u6bd4\u8f83\u5927\u4e86\uff1bD = f/F = 100mm/1 =100mm \u4e2a\u4eba\u611f\u89c9\u53ef\u89c1\uff08\u6216\u77ed\u6ce2\u7ea2\u5916\uff09\u548c\u957f\u6ce2\u7ea2\u5916\u5171\u7528\u955c\u5934\u4e0d\u592a\u53ef\u80fd\uff0c\u9876\u591a\u5171\u7528\u90e8\u5206\u955c\u7247 F=f/D F-----\u5149\u5708\u503c\uff0c\u5b83\u662f\u4e00\u4e2a\u6bd4\u503c\uff0c\u6ca1\u6709\u5355\u4f4d f-----\u7126\u8ddd\u5927\u5c0f\uff0c\u4e00\u822c\u4ee5\u6beb\u7c73mm\u4e3a\u5355\u4f4d\uff0c135\u76f8\u673a\u7684\u6807\u51c6\u7126\u8ddd\u662f50mm D-----\u901a\u5149\u53e3\u5f84\uff0c\u5355\u4f4dmm\uff0c\u955c\u5934\u5728\u67d0\u4e00\u7126\u8ddd\u4e0b\u6700\u5927\u901a\u5149\u5b54\u6d1e\u7684\u76f4\u5f84(\u8981\u533a\u522b\u6ee4\u955c\u53e3\u5f84\uff0c\u4ed6\u4eec\u662f\u4e0d\u540c\u7684) \u5728\u67d0\u4e00\u7126\u8ddd\u4e0b\uff0c\u4f60\u7684\u901a\u5149\u53e3\u5f84D\u8d8a\u5927\uff0c\u5149\u5708\u503cF\u4e5f\u5c31\u8d8a\u5c0f\uff0c\u76f8\u673a\u63a5\u53d7\u7684\u5149\u4eae\u4e5f\u5c31\u8d8a\u591a\uff0c\u666f\u6df1\u8d8a\u6d45\uff0c\u4f8b\u598250/1.2\u5728F1.2\u65f6\u53ef\u4ee5\u8fbe\u5230\u6781\u6d45\u7684\u666f\u6df1 \u3002 \u77ed\u6ce2\u7ea2\u5916\uff08InGaAs\uff090.9um ~ 1.7um \u957f\u6ce2\u7ea2\u5916\uff08\u70ed\u50cf\u4eea\uff098um ~ 14um","title":"\u5149\u5b66\u77e5\u8bc6\u70b9"},{"location":"Multimedia/optical/#_1","text":"\u89c6\u573a\u548c\u5206\u8fa8\u7387\u9650\u5b9a\u4e86\uff0c\u50cf\u5143\u8d8a\u5c0f\u955c\u5934\u7126\u8ddd\u5c31\u8d8a\u5c0f\uff0c\u6574\u4e2a\u7cfb\u7edf\u7684\u91cd\u91cf\u4e5f\u5c31\u4f1a\u8d8a\u5c0f \u7406\u8bba\u6210\u50cf\u6781\u9650\u5206\u8fa8\u7387\u4e3a1.22\u00d7\u6ce2\u957f\u00d7F#,\u50cf\u5143\u592a\u5c0f\u4e86\uff0c\u76ee\u6807\u867d\u7136\u5927\u5c0f\u70b98\u4e2a\u50cf\u5143\uff0c\u4f468\u4e2a\u50cf\u5143\u4e4b\u95f4\u4e0d\u80fd\u6e05\u6670\u5206\u8fa8 \u50cf\u514315um\u5de6\u53f3\uff0c1500m\u7684\u4eba\u70b98\u4e2a\u50cf\u7d20\uff0c\u7126\u8ddd100mm\u5de6\u53f3\uff0c\u957f\u6ce2\u975e\u5236\u51b7\u4e00\u822c\u8981\u505a\u5230F1\uff0c\u90a3\u53e3\u5f84\u5c31\u8981100mm\uff0c\u6bd4\u8f83\u5927\u4e86\uff1bD = f/F = 100mm/1 =100mm \u4e2a\u4eba\u611f\u89c9\u53ef\u89c1\uff08\u6216\u77ed\u6ce2\u7ea2\u5916\uff09\u548c\u957f\u6ce2\u7ea2\u5916\u5171\u7528\u955c\u5934\u4e0d\u592a\u53ef\u80fd\uff0c\u9876\u591a\u5171\u7528\u90e8\u5206\u955c\u7247 F=f/D F-----\u5149\u5708\u503c\uff0c\u5b83\u662f\u4e00\u4e2a\u6bd4\u503c\uff0c\u6ca1\u6709\u5355\u4f4d f-----\u7126\u8ddd\u5927\u5c0f\uff0c\u4e00\u822c\u4ee5\u6beb\u7c73mm\u4e3a\u5355\u4f4d\uff0c135\u76f8\u673a\u7684\u6807\u51c6\u7126\u8ddd\u662f50mm D-----\u901a\u5149\u53e3\u5f84\uff0c\u5355\u4f4dmm\uff0c\u955c\u5934\u5728\u67d0\u4e00\u7126\u8ddd\u4e0b\u6700\u5927\u901a\u5149\u5b54\u6d1e\u7684\u76f4\u5f84(\u8981\u533a\u522b\u6ee4\u955c\u53e3\u5f84\uff0c\u4ed6\u4eec\u662f\u4e0d\u540c\u7684) \u5728\u67d0\u4e00\u7126\u8ddd\u4e0b\uff0c\u4f60\u7684\u901a\u5149\u53e3\u5f84D\u8d8a\u5927\uff0c\u5149\u5708\u503cF\u4e5f\u5c31\u8d8a\u5c0f\uff0c\u76f8\u673a\u63a5\u53d7\u7684\u5149\u4eae\u4e5f\u5c31\u8d8a\u591a\uff0c\u666f\u6df1\u8d8a\u6d45\uff0c\u4f8b\u598250/1.2\u5728F1.2\u65f6\u53ef\u4ee5\u8fbe\u5230\u6781\u6d45\u7684\u666f\u6df1 \u3002 \u77ed\u6ce2\u7ea2\u5916\uff08InGaAs\uff090.9um ~ 1.7um \u957f\u6ce2\u7ea2\u5916\uff08\u70ed\u50cf\u4eea\uff098um ~ 14um","title":"\u5149\u5b66\u8bbe\u8ba1\u77e5\u8bc6"},{"location":"Multimedia/opus/","text":"OPUS\u97f3\u9891\u7f16\u89e3\u7801\u5e93 \u00b6 1.\u57fa\u672c\u6982\u5ff5 \u00b6 1.1 Frame Size \u00b6 \u6bcf\u901a\u9053\u7684\u91c7\u6837\u6570\uff0c\u97f3\u9891\u7684\u5e27\u4ee5\u65f6\u95f4\u4e3a\u5355\u4f4d\uff0c\u5728OPUS\u4e2dFrame size\u5fc5\u987b\u662f2.5, 5, 10, 20, 40 or 60 ms 1.2 \u5c0f\u7aef\u6a21\u5f0f \u00b6 \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u4e00\u4e2a\u6574\u65700x11223344\uff0c\u5728\u5185\u5b58\u4e2d\u3001\u5199\u5165\u6587\u4ef6\u4e2d\u3001\u4ece\u6587\u4ef6\u4e2d\u8bfb\u51fa\uff0c\u4ece\u5b57\u8282\u7684\u89d2\u5ea6\u770b\uff0c\u5176\u5b58\u50a8\u65b9\u5f0f\u662f\u4e00\u6837\u7684\u3002 \u793a\u4f8b\u7a0b\u5e8f\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 unsigned int a = 0x11223344 ; unsigned char * p = & a ; // \u67e5\u770b\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u50a8\u60c5\u51b5 printf ( \"%x,%x,%x,%x \\n \" , * p , * ( p + 1 ), * ( p + 2 ), * ( p + 3 )); FILE * fp ; fp = fopen ( \"int.bin\" , \"w+\" ); // \u5199\u5165\u6587\u4ef6\u540e\uff0c\u901a\u8fc7\u4e8c\u8fdb\u5236\u67e5\u770b\u5de5\u5177\u67e5\u770b\uff0c\u5176\u5728\u6587\u4ef6\u4e2d\u7684\u5b58\u50a8\u60c5\u51b5 fwrite ( & a , sizeof ( int ), 1 , fp ); fseek ( fp , 0 , SEEK_SET ); unsigned char * buf = ( unsigned char * ) malloc ( 4 ); fread ( buf , sizeof ( int ), 1 , fp ); // \u67e5\u770b\u4ece\u6587\u4ef6\u8bfb\u51fa\u540e\u7684\u5b58\u50a8\u60c5\u51b5 printf ( \"%x,%x,%x,%x \\n \" , buf [ 0 ], buf [ 1 ], buf [ 2 ], buf [ 3 ]); \u5728\u6587\u4ef6\u4e2d\u7684\u5b58\u50a8\u60c5\u51b5\u5982\u4e0b\u56fe\u6240\u793a\uff1a Warning \u5982\u679c\u4f60\u5c06int\u6216\u8005short\u7c7b\u578b\u7684\u6570\u636e\u4ee5\u4e8c\u8fdb\u5236\u5199\u5165\u6587\u4ef6\uff0c\u7136\u540e\u4ee5\u5b57\u8282\u8bfb\u51fa\u3002\u7136\u540e\u5728\u5c06\u5b57\u8282\u6570\u636e\u8f6c\u6362\u4e3aint\u6216\u8005short\u7684\u65f6\u5019\uff0c \u8bf7\u6ce8\u610f\u5b57\u8282\u5e8f\u95ee\u9898\uff08 \u4e0d\u63a8\u8350\u8fd9\u79cd\u505a\u6cd5 \uff09\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 #define FRAME_SIZE 960 #define CHANNELS 1 #define MAX_FRAME_SIZE 6*960 opus_int16 in [ FRAME_SIZE * CHANNELS ]; unsigned char pcm_bytes [ MAX_FRAME_SIZE * CHANNELS * 2 ]; /* Convert from little-endian ordering. */ for ( i = 0 ; i < CHANNELS * FRAME_SIZE ; i ++ ) in [ i ] = pcm_bytes [ 2 * i + 1 ] << 8 | pcm_bytes [ 2 * i ]; \u4e00\u822c\u76f4\u63a5\u5c06\u6307\u5411\u5b57\u8282\u6570\u7ec4\u7684\u6307\u9488\uff08char *\uff09\u8f6c\u6362\u4e3a\u6307\u5411int\u6216\u8005short\u7684\u6307\u9488\u5373\u53ef\u3002\u793a\u4f8b\u5982\u4e0b\uff1a 1 unsigned short * short_buf = ( unsigned short * ) pcm_bytes ; \u5982\u679c\u662f16bit\u91c7\u6837\uff0c\u90a3\u4e48\u4e00\u4e2a\u6837\u672c\u9700\u8981\u75282\u4e2a\u5b57\u8282\uff08short\uff09\u53bb\u5b58\u50a8\u3002 OPUS\u7684\u7f16\u7801\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a 1 2 3 4 5 6 opus_int32 opus_encode ( OpusEncoder * st , const opus_int16 * pcm , int frame_size , unsigned char * data , opus_int32 max_data_bytes )","title":"OPUS"},{"location":"Multimedia/opus/#opus","text":"","title":"OPUS\u97f3\u9891\u7f16\u89e3\u7801\u5e93"},{"location":"Multimedia/opus/#1","text":"","title":"1.\u57fa\u672c\u6982\u5ff5"},{"location":"Multimedia/opus/#11-frame-size","text":"\u6bcf\u901a\u9053\u7684\u91c7\u6837\u6570\uff0c\u97f3\u9891\u7684\u5e27\u4ee5\u65f6\u95f4\u4e3a\u5355\u4f4d\uff0c\u5728OPUS\u4e2dFrame size\u5fc5\u987b\u662f2.5, 5, 10, 20, 40 or 60 ms","title":"1.1 Frame Size"},{"location":"Multimedia/opus/#12","text":"\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u4e00\u4e2a\u6574\u65700x11223344\uff0c\u5728\u5185\u5b58\u4e2d\u3001\u5199\u5165\u6587\u4ef6\u4e2d\u3001\u4ece\u6587\u4ef6\u4e2d\u8bfb\u51fa\uff0c\u4ece\u5b57\u8282\u7684\u89d2\u5ea6\u770b\uff0c\u5176\u5b58\u50a8\u65b9\u5f0f\u662f\u4e00\u6837\u7684\u3002 \u793a\u4f8b\u7a0b\u5e8f\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 unsigned int a = 0x11223344 ; unsigned char * p = & a ; // \u67e5\u770b\u5728\u5185\u5b58\u4e2d\u7684\u5b58\u50a8\u60c5\u51b5 printf ( \"%x,%x,%x,%x \\n \" , * p , * ( p + 1 ), * ( p + 2 ), * ( p + 3 )); FILE * fp ; fp = fopen ( \"int.bin\" , \"w+\" ); // \u5199\u5165\u6587\u4ef6\u540e\uff0c\u901a\u8fc7\u4e8c\u8fdb\u5236\u67e5\u770b\u5de5\u5177\u67e5\u770b\uff0c\u5176\u5728\u6587\u4ef6\u4e2d\u7684\u5b58\u50a8\u60c5\u51b5 fwrite ( & a , sizeof ( int ), 1 , fp ); fseek ( fp , 0 , SEEK_SET ); unsigned char * buf = ( unsigned char * ) malloc ( 4 ); fread ( buf , sizeof ( int ), 1 , fp ); // \u67e5\u770b\u4ece\u6587\u4ef6\u8bfb\u51fa\u540e\u7684\u5b58\u50a8\u60c5\u51b5 printf ( \"%x,%x,%x,%x \\n \" , buf [ 0 ], buf [ 1 ], buf [ 2 ], buf [ 3 ]); \u5728\u6587\u4ef6\u4e2d\u7684\u5b58\u50a8\u60c5\u51b5\u5982\u4e0b\u56fe\u6240\u793a\uff1a Warning \u5982\u679c\u4f60\u5c06int\u6216\u8005short\u7c7b\u578b\u7684\u6570\u636e\u4ee5\u4e8c\u8fdb\u5236\u5199\u5165\u6587\u4ef6\uff0c\u7136\u540e\u4ee5\u5b57\u8282\u8bfb\u51fa\u3002\u7136\u540e\u5728\u5c06\u5b57\u8282\u6570\u636e\u8f6c\u6362\u4e3aint\u6216\u8005short\u7684\u65f6\u5019\uff0c \u8bf7\u6ce8\u610f\u5b57\u8282\u5e8f\u95ee\u9898\uff08 \u4e0d\u63a8\u8350\u8fd9\u79cd\u505a\u6cd5 \uff09\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a 1 2 3 4 5 6 7 8 9 10 #define FRAME_SIZE 960 #define CHANNELS 1 #define MAX_FRAME_SIZE 6*960 opus_int16 in [ FRAME_SIZE * CHANNELS ]; unsigned char pcm_bytes [ MAX_FRAME_SIZE * CHANNELS * 2 ]; /* Convert from little-endian ordering. */ for ( i = 0 ; i < CHANNELS * FRAME_SIZE ; i ++ ) in [ i ] = pcm_bytes [ 2 * i + 1 ] << 8 | pcm_bytes [ 2 * i ]; \u4e00\u822c\u76f4\u63a5\u5c06\u6307\u5411\u5b57\u8282\u6570\u7ec4\u7684\u6307\u9488\uff08char *\uff09\u8f6c\u6362\u4e3a\u6307\u5411int\u6216\u8005short\u7684\u6307\u9488\u5373\u53ef\u3002\u793a\u4f8b\u5982\u4e0b\uff1a 1 unsigned short * short_buf = ( unsigned short * ) pcm_bytes ; \u5982\u679c\u662f16bit\u91c7\u6837\uff0c\u90a3\u4e48\u4e00\u4e2a\u6837\u672c\u9700\u8981\u75282\u4e2a\u5b57\u8282\uff08short\uff09\u53bb\u5b58\u50a8\u3002 OPUS\u7684\u7f16\u7801\u51fd\u6570\u539f\u578b\u5982\u4e0b\u6240\u793a\uff1a 1 2 3 4 5 6 opus_int32 opus_encode ( OpusEncoder * st , const opus_int16 * pcm , int frame_size , unsigned char * data , opus_int32 max_data_bytes )","title":"1.2 \u5c0f\u7aef\u6a21\u5f0f"},{"location":"Multimedia/pcm/","text":"PCM\u97f3\u9891\u6587\u4ef6 \u00b6 1. What is PCM? \u00b6 PCM(Pulse-code-modulation)\u662f\u6a21\u62df\u4fe1\u53f7\u4ee5\u56fa\u5b9a\u7684\u91c7\u6837\u9891\u7387\u8f6c\u6362\u6210\u6570\u5b57\u4fe1\u53f7\u540e\u7684\u8868\u73b0\u5f62\u5f0f\u3002 Sample Rate : \u91c7\u6837\u9891\u7387\u5355\u4f4d\u4e3a\uff1aHz\u3002\u91c7\u6837\u9891\u7387\u8d8a\u9ad8\uff0c\u97f3\u9891\u8d28\u91cf\u8d8a\u597d\uff0c\u5360\u7528\u7a7a\u95f4\u4e5f\u8d8a\u5927\u3002 Sign : \u97f3\u9891\u6570\u636e\u662f\u5426\u662f\u6709\u7b26\u53f7\u7684\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\u90fd\u662f\u6709\u7b26\u53f7\u7684\u3002\u82e5\u662f\u5c06\u6709\u7b26\u53f7\u7684\u6570\u636e\u5f53\u505a\u65e0\u7b26\u53f7\u7684\u6570\u636e\u6765\u5904\u7406\u5c06\u4f1a\u4f7f\u58f0\u97f3\u542c\u6765\u5f88\u523a Sample Size : \u8868\u793a\u6bcf\u4e00\u4e2a\u91c7\u6837\u6570\u636e\u7684\u5927\u5c0f\u3002\u901a\u5e38\u8be5\u503c\u4e3a16-bit\u3002 Byte Ordering : \u5b57\u8282\u5e8f\u6307\u7684\u662flittle-endian\u8fd8\u662fbig-endian\u3002\u8868\u793a\u97f3\u9891\u6570\u636e\u7684\u5b58\u50a8\u5b57\u8282\u5e8f\u3002\u901a\u5e38\u5747\u4e3alittle-endian\u3002 Number of Channels : \u6807\u8bc6\u97f3\u9891\u662f\u5355\u58f0\u9053(mono\uff0c1 channel)\u8fd8\u662f\u7acb\u4f53\u58f0(stereo\uff0c2 channels)\u3002 \u901a\u8fc7\u4ee5\u4e0a\u4e94\u4e2a\u6570\u636e\u6211\u4eec\u5c31\u53ef\u4ee5\u63cf\u8ff0\u4e00\u4e2aPCM\u6570\u636e\uff0c\u64ad\u653e\u4e00\u4e2aPCM\u6570\u636e\u9700\u8981\u7684\u5c31\u662f\u4ee5\u4e0a\u4e94\u4e2a\u6570\u636e\u3002 2. What does a PCM stream look like? \u00b6 \u5355\u58f0\u9053\uff1a \u6bcf\u4e2a\u6574\u6570\u5360\u636e2\u4e2a\u5b57\u8282(16-bit)\uff0c9\u4e2a\u91c7\u6837\u4e5f\u5c31\u662f18\u5b57\u8282\u7684\u6570\u636e\u3002\u6bcf\u4e2a\u91c7\u6837\u7684\u6574\u6570\u5927\u5c0f\u6700\u5c0f\u4e3a -32768\uff0c\u6700\u5927\u4e3a 32768 \u3002\u6839\u636e\u91c7\u6837\u6570\u636e\u7684\u4f4d\u7f6e\u548c\u503c\u753b\u4e00\u4e2a\u56fe\u7684\u8bdd\uff0c\u5c31\u4f1a\u5f97\u5230\u50cf\u64ad\u653e\u5668\u4e0a\u90a3\u6837\u7684\u6ce2\u6d6a\u5f62\u56fe\u3002 \u6211\u4eec\u53ef\u4ee5\u50cf\u4e0b\u9762\u4f2a\u4ee3\u7801\u793a\u4f8b\u8fd9\u6837\u5c06\u6570\u636e\u8bfb\u5165\u4e00\u4e2aC\u8bed\u8a00\u6570\u7ec4 : 1 2 3 4 5 FILE * pcmfile int16_t * pcmdata ; pcmfile = fopen ( your pcm data file ); pcmdata = malloc ( size of the file ); fread ( pcmdata , sizeof ( int16_t ), size of file / sizeof ( int16_t ), pcmfile ); \u5982\u679c\u6211\u4eec\u5c06\u8fd9\u4e9b\u6570\u636e\u9001\u5165\u58f0\u5361\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u542c\u5230\u58f0\u97f3\u3002\u5f53\u7136\u6211\u4eec\u9700\u8981\u544a\u8bc9\u58f0\u5361\u8fd9\u4e9b\u6570\u636e\u7684\u91c7\u6837\u7387\u3002\u82e5\u6211\u4eec\u544a\u77e5\u58f0\u5361\u7684\u91c7\u6837\u7387\u5927\u4e8e\u6570\u636e\u672c\u8eab\u7684\u91c7\u6837\u7387\uff0c\u90a3\u4e48\u8fd9\u4e9b\u6570\u636e\u7684\u64ad\u653e\u901f\u5ea6\u4f1a\u9ad8\u4e8e\u5176\u539f\u59cb\u7684\u901f\u5ea6\u3002\u5c31\u662f\u5feb\u653e\u7684\u529f\u80fd\u3002 \u7acb\u4f53\u58f0\uff1a \u6bcf\u4e00\u4e2aframe\u662f\u4e00\u4e2a16-bit\u7684\u91c7\u6837\u70b9\u3002\u5de6\u53f3\u58f0\u9053\u7684\u6570\u636e\u4ea4\u53c9\u5b58\u653e\u3002","title":"PCM"},{"location":"Multimedia/pcm/#pcm","text":"","title":"PCM\u97f3\u9891\u6587\u4ef6"},{"location":"Multimedia/pcm/#1-what-is-pcm","text":"PCM(Pulse-code-modulation)\u662f\u6a21\u62df\u4fe1\u53f7\u4ee5\u56fa\u5b9a\u7684\u91c7\u6837\u9891\u7387\u8f6c\u6362\u6210\u6570\u5b57\u4fe1\u53f7\u540e\u7684\u8868\u73b0\u5f62\u5f0f\u3002 Sample Rate : \u91c7\u6837\u9891\u7387\u5355\u4f4d\u4e3a\uff1aHz\u3002\u91c7\u6837\u9891\u7387\u8d8a\u9ad8\uff0c\u97f3\u9891\u8d28\u91cf\u8d8a\u597d\uff0c\u5360\u7528\u7a7a\u95f4\u4e5f\u8d8a\u5927\u3002 Sign : \u97f3\u9891\u6570\u636e\u662f\u5426\u662f\u6709\u7b26\u53f7\u7684\u3002\u901a\u5e38\u60c5\u51b5\u4e0b\u90fd\u662f\u6709\u7b26\u53f7\u7684\u3002\u82e5\u662f\u5c06\u6709\u7b26\u53f7\u7684\u6570\u636e\u5f53\u505a\u65e0\u7b26\u53f7\u7684\u6570\u636e\u6765\u5904\u7406\u5c06\u4f1a\u4f7f\u58f0\u97f3\u542c\u6765\u5f88\u523a Sample Size : \u8868\u793a\u6bcf\u4e00\u4e2a\u91c7\u6837\u6570\u636e\u7684\u5927\u5c0f\u3002\u901a\u5e38\u8be5\u503c\u4e3a16-bit\u3002 Byte Ordering : \u5b57\u8282\u5e8f\u6307\u7684\u662flittle-endian\u8fd8\u662fbig-endian\u3002\u8868\u793a\u97f3\u9891\u6570\u636e\u7684\u5b58\u50a8\u5b57\u8282\u5e8f\u3002\u901a\u5e38\u5747\u4e3alittle-endian\u3002 Number of Channels : \u6807\u8bc6\u97f3\u9891\u662f\u5355\u58f0\u9053(mono\uff0c1 channel)\u8fd8\u662f\u7acb\u4f53\u58f0(stereo\uff0c2 channels)\u3002 \u901a\u8fc7\u4ee5\u4e0a\u4e94\u4e2a\u6570\u636e\u6211\u4eec\u5c31\u53ef\u4ee5\u63cf\u8ff0\u4e00\u4e2aPCM\u6570\u636e\uff0c\u64ad\u653e\u4e00\u4e2aPCM\u6570\u636e\u9700\u8981\u7684\u5c31\u662f\u4ee5\u4e0a\u4e94\u4e2a\u6570\u636e\u3002","title":"1. What is PCM?"},{"location":"Multimedia/pcm/#2-what-does-a-pcm-stream-look-like","text":"\u5355\u58f0\u9053\uff1a \u6bcf\u4e2a\u6574\u6570\u5360\u636e2\u4e2a\u5b57\u8282(16-bit)\uff0c9\u4e2a\u91c7\u6837\u4e5f\u5c31\u662f18\u5b57\u8282\u7684\u6570\u636e\u3002\u6bcf\u4e2a\u91c7\u6837\u7684\u6574\u6570\u5927\u5c0f\u6700\u5c0f\u4e3a -32768\uff0c\u6700\u5927\u4e3a 32768 \u3002\u6839\u636e\u91c7\u6837\u6570\u636e\u7684\u4f4d\u7f6e\u548c\u503c\u753b\u4e00\u4e2a\u56fe\u7684\u8bdd\uff0c\u5c31\u4f1a\u5f97\u5230\u50cf\u64ad\u653e\u5668\u4e0a\u90a3\u6837\u7684\u6ce2\u6d6a\u5f62\u56fe\u3002 \u6211\u4eec\u53ef\u4ee5\u50cf\u4e0b\u9762\u4f2a\u4ee3\u7801\u793a\u4f8b\u8fd9\u6837\u5c06\u6570\u636e\u8bfb\u5165\u4e00\u4e2aC\u8bed\u8a00\u6570\u7ec4 : 1 2 3 4 5 FILE * pcmfile int16_t * pcmdata ; pcmfile = fopen ( your pcm data file ); pcmdata = malloc ( size of the file ); fread ( pcmdata , sizeof ( int16_t ), size of file / sizeof ( int16_t ), pcmfile ); \u5982\u679c\u6211\u4eec\u5c06\u8fd9\u4e9b\u6570\u636e\u9001\u5165\u58f0\u5361\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u542c\u5230\u58f0\u97f3\u3002\u5f53\u7136\u6211\u4eec\u9700\u8981\u544a\u8bc9\u58f0\u5361\u8fd9\u4e9b\u6570\u636e\u7684\u91c7\u6837\u7387\u3002\u82e5\u6211\u4eec\u544a\u77e5\u58f0\u5361\u7684\u91c7\u6837\u7387\u5927\u4e8e\u6570\u636e\u672c\u8eab\u7684\u91c7\u6837\u7387\uff0c\u90a3\u4e48\u8fd9\u4e9b\u6570\u636e\u7684\u64ad\u653e\u901f\u5ea6\u4f1a\u9ad8\u4e8e\u5176\u539f\u59cb\u7684\u901f\u5ea6\u3002\u5c31\u662f\u5feb\u653e\u7684\u529f\u80fd\u3002 \u7acb\u4f53\u58f0\uff1a \u6bcf\u4e00\u4e2aframe\u662f\u4e00\u4e2a16-bit\u7684\u91c7\u6837\u70b9\u3002\u5de6\u53f3\u58f0\u9053\u7684\u6570\u636e\u4ea4\u53c9\u5b58\u653e\u3002","title":"2. What does a PCM stream look like?"},{"location":"Multimedia/wav_foramt/","text":"WAV\u683c\u5f0f\u7b80\u4ecb \u00b6 WAV = PCM\u6570\u636e + WAV\u6587\u4ef6\u5934 \u6570\u636e\u5757\u7684\u8bb0\u5f55\u65b9\u5f0f\u662flittle-endian\u5b57\u8282\u987a\u5e8f WAV\u5934\u683c\u5f0f\u5982\u4e0b\uff1a offset address size type content 00H~03H 4 char \u8d44\u6e90\u4ea4\u6362\u6587\u4ef6\u6807\u5fd7\uff08RIFF\uff09 04H~07H 4 int32 \u4ece\u4e0b\u4e2a\u5730\u5740\u5f00\u59cb\u5230\u6587\u4ef6\u5c3e\u7684\u603b\u5b57\u8282\u6570 08H~0BH 4 char WAV\u6587\u4ef6\u6807\u5fd7\uff08WAVE\uff09 0CH~0FH 4 char \u6ce2\u5f62\u683c\u5f0f\u6807\u5fd7\uff08fmt \uff09\uff0c\u6700\u540e\u4e00\u4f4d\u7a7a\u683c\u3002 10H~13H 4 int32 \u8fc7\u6ee4\u5b57\u8282\uff08\u4e00\u822c\u4e3a00000010H\uff09\uff0c\u82e5\u4e3a00000012H\u5219\u8bf4\u660e\u6570\u636e\u5934\u643a\u5e26\u9644\u52a0\u4fe1\u606f\uff08\u89c1\u201c\u9644\u52a0\u4fe1\u606f\u201d\uff09\u3002 14H~15H 2 int16 \u683c\u5f0f\u79cd\u7c7b\uff08\u503c\u4e3a1\u65f6\uff0c\u8868\u793a\u6570\u636e\u4e3a\u7ebf\u6027PCM\u7f16\u7801\uff09 16H~17H 2 int16 \u901a\u9053\u6570\uff0c\u5355\u58f0\u9053\u4e3a1\uff0c\u53cc\u58f0\u9053\u4e3a2 18H~1BH 4 int32 \u91c7\u6837\u9891\u7387 1CH~1FH 4 int32 \u6ce2\u5f62\u6570\u636e\u4f20\u8f93\u901f\u7387\uff08\u6bcf\u79d2\u5e73\u5747\u5b57\u8282\u6570\uff09 20H~21H 2 int16 DATA\u6570\u636e\u5757\u957f\u5ea6\uff0c\u5b57\u8282\u3002 22H~23H 2 int16 PCM\u4f4d\u5bbd \u968f\u540e2\u5b57\u8282 2 int16 \u9644\u52a0\u4fe1\u606f\uff08\u53ef\u9009\uff0c\u7531\u4e0a\u65b9\u8fc7\u6ee4\u5b57\u8282\u786e\u5b9a\uff09 \u968f\u540e ... \u4e0d\u5b9a\u957f\u5ea6\u5b57\u7b26 \u201cfact\u201d,\u8be5\u90e8\u5206\u662f\u53ef\u9009\u90e8\u5206\uff0c\u4e00\u822c\u5f53WAV\u6587\u4ef6\u662f\u7531\u67d0\u4e9b\u8f6f\u4ef6\u8f6c\u6362\u800c\u6765\u65f6\uff0c\u5305\u542b\u8be5\u90e8\u5206\u3002\u82e5\u5305\u542b\u8be5\u90e8\u5206\uff1a\uff081\uff09\u8be5\u90e8\u5206\u7684\u524d4\u5b57\u8282\u4e3a\u6570\u636e\u5934\uff0c\u4e00\u822c\u4e3a4\u4e2a\u5b57\u6bcd\u3002\uff082\uff09\u968f\u540e4\u4e2a\u5b57\u8282\u8868\u793a\u957f\u5ea6\uff0c\u5373\u9664\u53bb\u5934\uff084\u5b57\u8282\uff09\u548c\u957f\u5ea6\uff084\u5b57\u8282\uff09\u4e4b\u540e\uff0c\u6570\u636e\u672c\u8eab\u7684\u957f\u5ea6\u3002\uff083\uff09\u6700\u540e\u7684\u5b57\u8282\u4e3a\u6570\u636e\u672c\u8eab\u3002\u4f8b\u5982\uff1a\u201c66 61 73 74 04 00 00 00F8 2F 14 00\u201d \u3002\u201c66 61 73 74\u201d\u662ffact\u5b57\u6bb5\u7684\u6570\u636e\u5934\uff0c\u201c04 00 00 00\u201d\u662f\u6570\u636e\u672c\u8eab\u7684\u957f\u5ea6\uff0c\u201cF8 2F 14 00\u201d\u662f\u6570\u636e\u672c\u8eab\u3002\uff08\u6ce8\u610f\u662flittle-endian\u5b57\u8282\u987a\u5e8f\uff09 \u968f\u540e4\u5b57\u8282 4 cahr \u6570\u636e\u6807\u5fd7\u7b26\uff08data\uff09 \u968f\u540e4\u5b57\u8282 4 int32 DATA\u603b\u6570\u636e\u957f\u5ea6\u5b57\u8282 \u968f\u540e ... DATA\u6570\u636e\u5757 \u793a\u4f8b","title":"WAV"},{"location":"Multimedia/wav_foramt/#wav","text":"WAV = PCM\u6570\u636e + WAV\u6587\u4ef6\u5934 \u6570\u636e\u5757\u7684\u8bb0\u5f55\u65b9\u5f0f\u662flittle-endian\u5b57\u8282\u987a\u5e8f WAV\u5934\u683c\u5f0f\u5982\u4e0b\uff1a offset address size type content 00H~03H 4 char \u8d44\u6e90\u4ea4\u6362\u6587\u4ef6\u6807\u5fd7\uff08RIFF\uff09 04H~07H 4 int32 \u4ece\u4e0b\u4e2a\u5730\u5740\u5f00\u59cb\u5230\u6587\u4ef6\u5c3e\u7684\u603b\u5b57\u8282\u6570 08H~0BH 4 char WAV\u6587\u4ef6\u6807\u5fd7\uff08WAVE\uff09 0CH~0FH 4 char \u6ce2\u5f62\u683c\u5f0f\u6807\u5fd7\uff08fmt \uff09\uff0c\u6700\u540e\u4e00\u4f4d\u7a7a\u683c\u3002 10H~13H 4 int32 \u8fc7\u6ee4\u5b57\u8282\uff08\u4e00\u822c\u4e3a00000010H\uff09\uff0c\u82e5\u4e3a00000012H\u5219\u8bf4\u660e\u6570\u636e\u5934\u643a\u5e26\u9644\u52a0\u4fe1\u606f\uff08\u89c1\u201c\u9644\u52a0\u4fe1\u606f\u201d\uff09\u3002 14H~15H 2 int16 \u683c\u5f0f\u79cd\u7c7b\uff08\u503c\u4e3a1\u65f6\uff0c\u8868\u793a\u6570\u636e\u4e3a\u7ebf\u6027PCM\u7f16\u7801\uff09 16H~17H 2 int16 \u901a\u9053\u6570\uff0c\u5355\u58f0\u9053\u4e3a1\uff0c\u53cc\u58f0\u9053\u4e3a2 18H~1BH 4 int32 \u91c7\u6837\u9891\u7387 1CH~1FH 4 int32 \u6ce2\u5f62\u6570\u636e\u4f20\u8f93\u901f\u7387\uff08\u6bcf\u79d2\u5e73\u5747\u5b57\u8282\u6570\uff09 20H~21H 2 int16 DATA\u6570\u636e\u5757\u957f\u5ea6\uff0c\u5b57\u8282\u3002 22H~23H 2 int16 PCM\u4f4d\u5bbd \u968f\u540e2\u5b57\u8282 2 int16 \u9644\u52a0\u4fe1\u606f\uff08\u53ef\u9009\uff0c\u7531\u4e0a\u65b9\u8fc7\u6ee4\u5b57\u8282\u786e\u5b9a\uff09 \u968f\u540e ... \u4e0d\u5b9a\u957f\u5ea6\u5b57\u7b26 \u201cfact\u201d,\u8be5\u90e8\u5206\u662f\u53ef\u9009\u90e8\u5206\uff0c\u4e00\u822c\u5f53WAV\u6587\u4ef6\u662f\u7531\u67d0\u4e9b\u8f6f\u4ef6\u8f6c\u6362\u800c\u6765\u65f6\uff0c\u5305\u542b\u8be5\u90e8\u5206\u3002\u82e5\u5305\u542b\u8be5\u90e8\u5206\uff1a\uff081\uff09\u8be5\u90e8\u5206\u7684\u524d4\u5b57\u8282\u4e3a\u6570\u636e\u5934\uff0c\u4e00\u822c\u4e3a4\u4e2a\u5b57\u6bcd\u3002\uff082\uff09\u968f\u540e4\u4e2a\u5b57\u8282\u8868\u793a\u957f\u5ea6\uff0c\u5373\u9664\u53bb\u5934\uff084\u5b57\u8282\uff09\u548c\u957f\u5ea6\uff084\u5b57\u8282\uff09\u4e4b\u540e\uff0c\u6570\u636e\u672c\u8eab\u7684\u957f\u5ea6\u3002\uff083\uff09\u6700\u540e\u7684\u5b57\u8282\u4e3a\u6570\u636e\u672c\u8eab\u3002\u4f8b\u5982\uff1a\u201c66 61 73 74 04 00 00 00F8 2F 14 00\u201d \u3002\u201c66 61 73 74\u201d\u662ffact\u5b57\u6bb5\u7684\u6570\u636e\u5934\uff0c\u201c04 00 00 00\u201d\u662f\u6570\u636e\u672c\u8eab\u7684\u957f\u5ea6\uff0c\u201cF8 2F 14 00\u201d\u662f\u6570\u636e\u672c\u8eab\u3002\uff08\u6ce8\u610f\u662flittle-endian\u5b57\u8282\u987a\u5e8f\uff09 \u968f\u540e4\u5b57\u8282 4 cahr \u6570\u636e\u6807\u5fd7\u7b26\uff08data\uff09 \u968f\u540e4\u5b57\u8282 4 int32 DATA\u603b\u6570\u636e\u957f\u5ea6\u5b57\u8282 \u968f\u540e ... DATA\u6570\u636e\u5757 \u793a\u4f8b","title":"WAV\u683c\u5f0f\u7b80\u4ecb"},{"location":"Multimedia/yuv/","text":"\u4e00\u6587\u8bfb\u61c2YUV\u91c7\u6837\u539f\u7406 \u00b6 1.\u989c\u8272\u7f16\u7801\u65b9\u5f0f\uff1aRGB \u00b6 2.\u989c\u8272\u7f16\u7801\u65b9\u5f0f\uff1aYUV \u00b6 \u4ece\u7535\u89c6\u7cfb\u7edf\u4e2d\u884d\u751f\u7684\uff0c\u9ed1\u767d\u7535\u89c6\u4f7f\u7528\u7684\u5c31\u662fY\u6570\u636e\uff08\u660e\u4eae\u503c\uff09\uff0c\u540e\u6765\u51fa\u73b0\u4e86\u5f69\u8272\u683c\u5f0f\uff0c\u7535\u89c6\u8282\u76ee\u65e2\u9700\u8981\u5728\u9ed1\u767d\u7535\u89c6\u4e0a\u64ad\u653e\uff0c\u53c8\u9700\u8981\u5728\u5f69\u8272\u7535\u89c6\u4e0a\u64ad\u653e\uff0c\u5c31\u9700\u8981\u505a\u683c\u5f0f\u517c\u5bb9\uff0c\u65b9\u6cd5\u5c31\u662f\u589e\u52a0U\u548cV\u5206\u91cf\uff0cU\u548cV\u8868\u793a\u7684\u662f\u8272\u5ea6\uff0c\u8d77\u4f5c\u7528\u662f\u63cf\u8ff0\u5f71\u50cf\u7684\u8272\u5f69\u53ca\u9971\u548c\u5ea6\uff0c\u5b83\u4eec\u7528\u4e8e\u6307\u5b9a\u50cf\u7d20\u7684\u989c\u8272\u3002 \u6444\u50cf\u673a\u5f55\u51fa\u6765\u7684\u6570\u636e\u5c31\u662fYUV 2.YUV\u91c7\u6837\u683c\u5f0f \u00b6 \u53c2\u8003\u94fe\u63a5 3.YUV\u5b58\u50a8\u683c\u5f0f \u00b6 plannar \u5e73\u9762\u683c\u5f0f \u5148\u8fde\u7eed\u5b58\u50a8\u6240\u6709\u50cf\u7d20\u70b9\u7684Y\u5206\u91cf\uff0c\u7136\u540e\u5b58\u50a8\u6240\u6709\u7684U\u5206\u91cf\uff0c\u6700\u540e\u5b58\u50a8\u6240\u6709\u7684V\u5206\u91cf packed \u6253\u5305\u683c\u5f0f \u6bcf\u4e2a\u50cf\u7d20\u70b9\u7684Y\u3001U\u3001V\u5206\u91cf\u662f\u8fde\u7eed\u4ea4\u66ff\u5b58\u50a8\u7684","title":"\u5f7b\u5e95\u7406\u89e3YUV\u683c\u5f0f"},{"location":"Multimedia/yuv/#yuv","text":"","title":"\u4e00\u6587\u8bfb\u61c2YUV\u91c7\u6837\u539f\u7406"},{"location":"Multimedia/yuv/#1rgb","text":"","title":"1.\u989c\u8272\u7f16\u7801\u65b9\u5f0f\uff1aRGB"},{"location":"Multimedia/yuv/#2yuv","text":"\u4ece\u7535\u89c6\u7cfb\u7edf\u4e2d\u884d\u751f\u7684\uff0c\u9ed1\u767d\u7535\u89c6\u4f7f\u7528\u7684\u5c31\u662fY\u6570\u636e\uff08\u660e\u4eae\u503c\uff09\uff0c\u540e\u6765\u51fa\u73b0\u4e86\u5f69\u8272\u683c\u5f0f\uff0c\u7535\u89c6\u8282\u76ee\u65e2\u9700\u8981\u5728\u9ed1\u767d\u7535\u89c6\u4e0a\u64ad\u653e\uff0c\u53c8\u9700\u8981\u5728\u5f69\u8272\u7535\u89c6\u4e0a\u64ad\u653e\uff0c\u5c31\u9700\u8981\u505a\u683c\u5f0f\u517c\u5bb9\uff0c\u65b9\u6cd5\u5c31\u662f\u589e\u52a0U\u548cV\u5206\u91cf\uff0cU\u548cV\u8868\u793a\u7684\u662f\u8272\u5ea6\uff0c\u8d77\u4f5c\u7528\u662f\u63cf\u8ff0\u5f71\u50cf\u7684\u8272\u5f69\u53ca\u9971\u548c\u5ea6\uff0c\u5b83\u4eec\u7528\u4e8e\u6307\u5b9a\u50cf\u7d20\u7684\u989c\u8272\u3002 \u6444\u50cf\u673a\u5f55\u51fa\u6765\u7684\u6570\u636e\u5c31\u662fYUV","title":"2.\u989c\u8272\u7f16\u7801\u65b9\u5f0f\uff1aYUV"},{"location":"Multimedia/yuv/#2yuv_1","text":"\u53c2\u8003\u94fe\u63a5","title":"2.YUV\u91c7\u6837\u683c\u5f0f"},{"location":"Multimedia/yuv/#3yuv","text":"plannar \u5e73\u9762\u683c\u5f0f \u5148\u8fde\u7eed\u5b58\u50a8\u6240\u6709\u50cf\u7d20\u70b9\u7684Y\u5206\u91cf\uff0c\u7136\u540e\u5b58\u50a8\u6240\u6709\u7684U\u5206\u91cf\uff0c\u6700\u540e\u5b58\u50a8\u6240\u6709\u7684V\u5206\u91cf packed \u6253\u5305\u683c\u5f0f \u6bcf\u4e2a\u50cf\u7d20\u70b9\u7684Y\u3001U\u3001V\u5206\u91cf\u662f\u8fde\u7eed\u4ea4\u66ff\u5b58\u50a8\u7684","title":"3.YUV\u5b58\u50a8\u683c\u5f0f"},{"location":"Multimedia/AliyunVOD/get_play_url/","text":"\u83b7\u53d6\u64ad\u653eURL \u00b6 1. \u5f00\u901a\u963f\u91cc\u4e91\u70b9\u64ad\u670d\u52a1 \u00b6 \u5f00\u59cb\u4f7f\u7528\u89c6\u9891\u70b9\u64ad \u6839\u636e\u4e0a\u9762\u6587\u6863\u7684\u63d0\u793a\u4e0a\u4f20\u89c6\u9891 2.\u83b7\u53d6AccessKey \u00b6 \u767b\u5f55\u963f\u91cc\u4e91\u540e\uff0c\u9f20\u6807\u79fb\u52a8\u5230\u7528\u6237\u5934\u50cf\u70b9\u51fbAccessKey -> \u65b0\u5efa 3.\u4f7f\u7528\u4ee3\u7801\u83b7\u53d6\u64ad\u653eURL \u00b6 \u987b\u901a\u8fc7HTTP GET\u8bf7\u6c42\u5e76\u4f20\u9012\u76f8\u5e94\u53c2\u6570\u624d\u80fd\u83b7\u53d6\u5230\u64ad\u653eURL\uff0c\u5e76\u4e14\u53c2\u6570\u9700\u8981\u8ba1\u7b97\uff0c\u6240\u4ee5\u4f7f\u7528\u4ee3\u7801\u8fdb\u884c\u83b7\u53d6\u6bd4\u8f83\u65b9\u4fbf\u3002 \u5b98\u65b9\u8c03\u7528\u793a\u4f8b 3.1 \u8bf4\u660e \u00b6 access_key_id\u548caccess_key_secret\u4e3a\u5fc5\u987b\u9879 Action \u7684\u503c\u6839\u636e\u9700\u6c42\u6539\u53d8\uff0c\u6b64\u5904\u4f7f\u7528GetPlayInfo\uff08\u83b7\u53d6\u64ad\u653eURL\uff09 Key Value Meaning Action GetPlayInfo \u83b7\u53d6\u64ad\u653eURL Action GetVideoPlayAuth \u4e0b\u9762\u662f\u5b98\u65b9\u4ee3\u7801\uff08\u4fee\u6539\u4e86Action\u7684\u503c\uff09 1 2 3 4 5 <dependency> <groupId> org.apache.httpcomponents </groupId> <artifactId> httpclient </artifactId> <version> 4.5.1 </version> </dependency> 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 import org.apache.http.HttpResponse ; import org.apache.http.client.ClientProtocolException ; import org.apache.http.client.config.RequestConfig ; import org.apache.http.client.methods.HttpGet ; import org.apache.http.impl.client.CloseableHttpClient ; import org.apache.http.impl.client.HttpClients ; import org.apache.http.util.EntityUtils ; import sun.misc.BASE64Encoder ; import javax.crypto.Mac ; import javax.crypto.spec.SecretKeySpec ; import java.io.IOException ; import java.io.UnsupportedEncodingException ; import java.net.URI ; import java.net.URISyntaxException ; import java.net.URLEncoder ; import java.security.SignatureException ; import java.text.SimpleDateFormat ; import java.util.* ; import java.util.logging.Logger ; /** * \u89c6\u9891\u70b9\u64adOpenAPI\u8c03\u7528\u793a\u4f8b * \u4ee5GetVideoPlayAuth\u63a5\u53e3\u4e3a\u4f8b\uff0c\u5176\u4ed6\u63a5\u53e3\u8bf7\u66ff\u6362\u76f8\u5e94\u63a5\u53e3\u540d\u79f0\u53ca\u79c1\u6709\u53c2\u6570 */ public class Main { //\u8d26\u53f7AccessKey\u4fe1\u606f\u8bf7\u586b\u5199(\u5fc5\u9009) private static String access_key_id = \"\" ; //\u8d26\u53f7AccessKey\u4fe1\u606f\u8bf7\u586b\u5199(\u5fc5\u9009) private static String access_key_secret = \"\" ; //STS\u4e34\u65f6\u6388\u6743\u65b9\u5f0f\u8bbf\u95ee\u65f6\u8be5\u53c2\u6570\u4e3a\u5fc5\u9009\uff0c\u4f7f\u7528\u4e3b\u8d26\u53f7AccessKey\u548cRAM\u5b50\u8d26\u53f7AccessKey\u4e0d\u9700\u8981\u586b\u5199 private static String security_token = \"\" ; //\u4ee5\u4e0b\u53c2\u6570\u4e0d\u9700\u8981\u4fee\u6539 private final static String VOD_DOMAIN = \"http://vod.cn-shanghai.aliyuncs.com\" ; private final static String ISO8601_DATE_FORMAT = \"yyyy-MM-dd'T'HH:mm:ss'Z'\" ; private final static String HTTP_METHOD = \"GET\" ; private final static String HMAC_SHA1_ALGORITHM = \"HmacSHA1\" ; private final static String UTF_8 = \"utf-8\" ; private final static Logger LOG = Logger . getLogger ( Main . class . getName ()); public static void main ( String [] args ) throws Exception { //\u751f\u6210\u79c1\u6709\u53c2\u6570\uff0c\u4e0d\u540cAPI\u9700\u8981\u4fee\u6539 Map < String , String > privateParams = generatePrivateParamters (); //\u751f\u6210\u516c\u5171\u53c2\u6570\uff0c\u4e0d\u9700\u8981\u4fee\u6539 Map < String , String > publicParams = generatePublicParamters (); //\u751f\u6210OpenAPI\u5730\u5740\uff0c\u4e0d\u9700\u8981\u4fee\u6539 String URL = generateOpenAPIURL ( publicParams , privateParams ); //\u53d1\u9001HTTP GET \u8bf7\u6c42 httpGet ( URL ); } /** * \u751f\u6210\u89c6\u9891\u70b9\u64adOpenAPI\u79c1\u6709\u53c2\u6570 * \u4e0d\u540cAPI\u9700\u8981\u4fee\u6539\u6b64\u65b9\u6cd5\u4e2d\u7684\u53c2\u6570 * @return */ private static Map < String , String > generatePrivateParamters () { // \u63a5\u53e3\u79c1\u6709\u53c2\u6570\u5217\u8868, \u4e0d\u540cAPI\u8bf7\u66ff\u6362\u76f8\u5e94\u53c2\u6570 Map < String , String > privateParams = new HashMap < String , String >(); // \u89c6\u9891ID privateParams . put ( \"VideoId\" , \"24c5334a35a841f099456f2b39108b8e\" ); // API\u540d\u79f0 privateParams . put ( \"Action\" , \"GetPlayInfo\" ); return privateParams ; } /** * \u751f\u6210\u89c6\u9891\u70b9\u64adOpenAPI\u516c\u5171\u53c2\u6570 * \u4e0d\u9700\u8981\u4fee\u6539 * @return */ private static Map < String , String > generatePublicParamters () { Map < String , String > publicParams = new HashMap < String , String >(); publicParams . put ( \"Format\" , \"JSON\" ); publicParams . put ( \"Version\" , \"2017-03-21\" ); publicParams . put ( \"AccessKeyId\" , access_key_id ); publicParams . put ( \"SignatureMethod\" , \"HMAC-SHA1\" ); publicParams . put ( \"Timestamp\" , generateTimestamp ()); publicParams . put ( \"SignatureVersion\" , \"1.0\" ); publicParams . put ( \"SignatureNonce\" , generateRandom ()); if ( security_token != null && security_token . length () > 0 ) { publicParams . put ( \"SecurityToken\" , security_token ); } return publicParams ; } /** * \u751f\u6210OpenAPI\u5730\u5740 * @param privateParams * @return * @throws Exception */ private static String generateOpenAPIURL ( Map < String , String > publicParams , Map < String , String > privateParams ) { return generateURL ( VOD_DOMAIN , HTTP_METHOD , publicParams , privateParams ); } /** * @param domain \u8bf7\u6c42\u5730\u5740 * @param httpMethod HTTP\u8bf7\u6c42\u65b9\u5f0fGET\uff0cPOST\u7b49 * @param publicParams \u516c\u5171\u53c2\u6570 * @param privateParams \u63a5\u53e3\u7684\u79c1\u6709\u53c2\u6570 * @return \u6700\u540e\u7684url */ private static String generateURL ( String domain , String httpMethod , Map < String , String > publicParams , Map < String , String > privateParams ) { List < String > allEncodeParams = getAllParams ( publicParams , privateParams ); String cqsString = getCQS ( allEncodeParams ); out ( \"CanonicalizedQueryString = \" + cqsString ); String stringToSign = httpMethod + \"&\" + percentEncode ( \"/\" ) + \"&\" + percentEncode ( cqsString ); out ( \"StringtoSign = \" + stringToSign ); String signature = hmacSHA1Signature ( access_key_secret , stringToSign ); out ( \"Signature = \" + signature ); return domain + \"?\" + cqsString + \"&\" + percentEncode ( \"Signature\" ) + \"=\" + percentEncode ( signature ); } private static List < String > getAllParams ( Map < String , String > publicParams , Map < String , String > privateParams ) { List < String > encodeParams = new ArrayList < String >(); if ( publicParams != null ) { for ( String key : publicParams . keySet ()) { String value = publicParams . get ( key ); //\u5c06\u53c2\u6570\u548c\u503c\u90fdurlEncode\u4e00\u4e0b\u3002 String encodeKey = percentEncode ( key ); String encodeVal = percentEncode ( value ); encodeParams . add ( encodeKey + \"=\" + encodeVal ); } } if ( privateParams != null ) { for ( String key : privateParams . keySet ()) { String value = privateParams . get ( key ); //\u5c06\u53c2\u6570\u548c\u503c\u90fdurlEncode\u4e00\u4e0b\u3002 String encodeKey = percentEncode ( key ); String encodeVal = percentEncode ( value ); encodeParams . add ( encodeKey + \"=\" + encodeVal ); } } return encodeParams ; } /** * \u53c2\u6570urlEncode * * @param value * @return */ private static String percentEncode ( String value ) { try { String urlEncodeOrignStr = URLEncoder . encode ( value , \"UTF-8\" ); String plusReplaced = urlEncodeOrignStr . replace ( \"+\" , \"%20\" ); String starReplaced = plusReplaced . replace ( \"*\" , \"%2A\" ); String waveReplaced = starReplaced . replace ( \"%7E\" , \"~\" ); return waveReplaced ; } catch ( UnsupportedEncodingException e ) { e . printStackTrace (); } return value ; } /** * \u83b7\u53d6CQS \u7684\u5b57\u7b26\u4e32 * * @param allParams * @return */ private static String getCQS ( List < String > allParams ) { ParamsComparator paramsComparator = new ParamsComparator (); Collections . sort ( allParams , paramsComparator ); String cqString = \"\" ; for ( int i = 0 ; i < allParams . size (); i ++) { cqString += allParams . get ( i ); if ( i != allParams . size () - 1 ) { cqString += \"&\" ; } } return cqString ; } private static class ParamsComparator implements Comparator < String > { public int compare ( String lhs , String rhs ) { return lhs . compareTo ( rhs ); } } private static String hmacSHA1Signature ( String accessKeySecret , String stringtoSign ) { try { String key = accessKeySecret + \"&\" ; try { SecretKeySpec signKey = new SecretKeySpec ( key . getBytes (), HMAC_SHA1_ALGORITHM ); Mac mac = Mac . getInstance ( HMAC_SHA1_ALGORITHM ); mac . init ( signKey ); byte [] rawHmac = mac . doFinal ( stringtoSign . getBytes ()); //\u6309\u7167Base64 \u7f16\u7801\u89c4\u5219\u628a\u4e0a\u9762\u7684 HMAC \u503c\u7f16\u7801\u6210\u5b57\u7b26\u4e32\uff0c\u5373\u5f97\u5230\u7b7e\u540d\u503c\uff08Signature\uff09 return new String ( new BASE64Encoder (). encode ( rawHmac )); } catch ( Exception e ) { throw new SignatureException ( \"Failed to generate HMAC : \" + e . getMessage ()); } } catch ( SignatureException e ) { e . printStackTrace (); } return \"\" ; } /** * \u751f\u6210\u968f\u673a\u6570 * * @return */ private static String generateRandom () { String signatureNonce = UUID . randomUUID (). toString (); return signatureNonce ; } /** * \u751f\u6210\u5f53\u524dUTC\u65f6\u95f4\u6233 * * @return */ public static String generateTimestamp () { Date date = new Date ( System . currentTimeMillis ()); SimpleDateFormat df = new SimpleDateFormat ( ISO8601_DATE_FORMAT ); df . setTimeZone ( new SimpleTimeZone ( 0 , \"GMT\" )); return df . format ( date ); } private static String httpGet ( String url ) throws Exception { CloseableHttpClient httpClient = null ; try { httpClient = HttpClients . createDefault (); HttpGet httpGet = new HttpGet (); httpGet . setURI ( new URI ( url )); RequestConfig requestConfig = RequestConfig . custom () . setConnectTimeout ( 3000 ) . setSocketTimeout ( 3000 ) . build (); httpGet . setConfig ( requestConfig ); HttpResponse result = httpClient . execute ( httpGet ); String str ; try { /**\u8bfb\u53d6\u670d\u52a1\u5668\u8fd4\u56de\u8fc7\u6765\u7684json\u5b57\u7b26\u4e32\u6570\u636e**/ str = EntityUtils . toString ( result . getEntity ()); EntityUtils . consume ( result . getEntity ()); } catch ( Exception e ) { e . printStackTrace (); throw e ; } out ( str ); // \u8fd9\u91cc\u53ef\u4ee5\u89e3\u6790\u89c6\u9891\u4e91\u70b9\u64ad\u670d\u52a1\u7aef\u7684\u54cd\u5e94\u7ed3\u679c return str ; } catch ( URISyntaxException e ) { e . printStackTrace (); throw e ; } catch ( ClientProtocolException e ) { e . printStackTrace (); throw e ; } catch ( IOException e ) { e . printStackTrace (); throw e ; } finally { try { if ( httpClient != null ) httpClient . close (); } catch ( Exception e ) { e . printStackTrace (); throw e ; } } } private static void out ( String newLine ) { System . out . println ( newLine ); LOG . info ( newLine ); } }","title":"VOD"},{"location":"Multimedia/AliyunVOD/get_play_url/#url","text":"","title":"\u83b7\u53d6\u64ad\u653eURL"},{"location":"Multimedia/AliyunVOD/get_play_url/#1","text":"\u5f00\u59cb\u4f7f\u7528\u89c6\u9891\u70b9\u64ad \u6839\u636e\u4e0a\u9762\u6587\u6863\u7684\u63d0\u793a\u4e0a\u4f20\u89c6\u9891","title":"1. \u5f00\u901a\u963f\u91cc\u4e91\u70b9\u64ad\u670d\u52a1"},{"location":"Multimedia/AliyunVOD/get_play_url/#2accesskey","text":"\u767b\u5f55\u963f\u91cc\u4e91\u540e\uff0c\u9f20\u6807\u79fb\u52a8\u5230\u7528\u6237\u5934\u50cf\u70b9\u51fbAccessKey -> \u65b0\u5efa","title":"2.\u83b7\u53d6AccessKey"},{"location":"Multimedia/AliyunVOD/get_play_url/#3url","text":"\u987b\u901a\u8fc7HTTP GET\u8bf7\u6c42\u5e76\u4f20\u9012\u76f8\u5e94\u53c2\u6570\u624d\u80fd\u83b7\u53d6\u5230\u64ad\u653eURL\uff0c\u5e76\u4e14\u53c2\u6570\u9700\u8981\u8ba1\u7b97\uff0c\u6240\u4ee5\u4f7f\u7528\u4ee3\u7801\u8fdb\u884c\u83b7\u53d6\u6bd4\u8f83\u65b9\u4fbf\u3002 \u5b98\u65b9\u8c03\u7528\u793a\u4f8b","title":"3.\u4f7f\u7528\u4ee3\u7801\u83b7\u53d6\u64ad\u653eURL"},{"location":"Multimedia/AliyunVOD/get_play_url/#31","text":"access_key_id\u548caccess_key_secret\u4e3a\u5fc5\u987b\u9879 Action \u7684\u503c\u6839\u636e\u9700\u6c42\u6539\u53d8\uff0c\u6b64\u5904\u4f7f\u7528GetPlayInfo\uff08\u83b7\u53d6\u64ad\u653eURL\uff09 Key Value Meaning Action GetPlayInfo \u83b7\u53d6\u64ad\u653eURL Action GetVideoPlayAuth \u4e0b\u9762\u662f\u5b98\u65b9\u4ee3\u7801\uff08\u4fee\u6539\u4e86Action\u7684\u503c\uff09 1 2 3 4 5 <dependency> <groupId> org.apache.httpcomponents </groupId> <artifactId> httpclient </artifactId> <version> 4.5.1 </version> </dependency> 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 import org.apache.http.HttpResponse ; import org.apache.http.client.ClientProtocolException ; import org.apache.http.client.config.RequestConfig ; import org.apache.http.client.methods.HttpGet ; import org.apache.http.impl.client.CloseableHttpClient ; import org.apache.http.impl.client.HttpClients ; import org.apache.http.util.EntityUtils ; import sun.misc.BASE64Encoder ; import javax.crypto.Mac ; import javax.crypto.spec.SecretKeySpec ; import java.io.IOException ; import java.io.UnsupportedEncodingException ; import java.net.URI ; import java.net.URISyntaxException ; import java.net.URLEncoder ; import java.security.SignatureException ; import java.text.SimpleDateFormat ; import java.util.* ; import java.util.logging.Logger ; /** * \u89c6\u9891\u70b9\u64adOpenAPI\u8c03\u7528\u793a\u4f8b * \u4ee5GetVideoPlayAuth\u63a5\u53e3\u4e3a\u4f8b\uff0c\u5176\u4ed6\u63a5\u53e3\u8bf7\u66ff\u6362\u76f8\u5e94\u63a5\u53e3\u540d\u79f0\u53ca\u79c1\u6709\u53c2\u6570 */ public class Main { //\u8d26\u53f7AccessKey\u4fe1\u606f\u8bf7\u586b\u5199(\u5fc5\u9009) private static String access_key_id = \"\" ; //\u8d26\u53f7AccessKey\u4fe1\u606f\u8bf7\u586b\u5199(\u5fc5\u9009) private static String access_key_secret = \"\" ; //STS\u4e34\u65f6\u6388\u6743\u65b9\u5f0f\u8bbf\u95ee\u65f6\u8be5\u53c2\u6570\u4e3a\u5fc5\u9009\uff0c\u4f7f\u7528\u4e3b\u8d26\u53f7AccessKey\u548cRAM\u5b50\u8d26\u53f7AccessKey\u4e0d\u9700\u8981\u586b\u5199 private static String security_token = \"\" ; //\u4ee5\u4e0b\u53c2\u6570\u4e0d\u9700\u8981\u4fee\u6539 private final static String VOD_DOMAIN = \"http://vod.cn-shanghai.aliyuncs.com\" ; private final static String ISO8601_DATE_FORMAT = \"yyyy-MM-dd'T'HH:mm:ss'Z'\" ; private final static String HTTP_METHOD = \"GET\" ; private final static String HMAC_SHA1_ALGORITHM = \"HmacSHA1\" ; private final static String UTF_8 = \"utf-8\" ; private final static Logger LOG = Logger . getLogger ( Main . class . getName ()); public static void main ( String [] args ) throws Exception { //\u751f\u6210\u79c1\u6709\u53c2\u6570\uff0c\u4e0d\u540cAPI\u9700\u8981\u4fee\u6539 Map < String , String > privateParams = generatePrivateParamters (); //\u751f\u6210\u516c\u5171\u53c2\u6570\uff0c\u4e0d\u9700\u8981\u4fee\u6539 Map < String , String > publicParams = generatePublicParamters (); //\u751f\u6210OpenAPI\u5730\u5740\uff0c\u4e0d\u9700\u8981\u4fee\u6539 String URL = generateOpenAPIURL ( publicParams , privateParams ); //\u53d1\u9001HTTP GET \u8bf7\u6c42 httpGet ( URL ); } /** * \u751f\u6210\u89c6\u9891\u70b9\u64adOpenAPI\u79c1\u6709\u53c2\u6570 * \u4e0d\u540cAPI\u9700\u8981\u4fee\u6539\u6b64\u65b9\u6cd5\u4e2d\u7684\u53c2\u6570 * @return */ private static Map < String , String > generatePrivateParamters () { // \u63a5\u53e3\u79c1\u6709\u53c2\u6570\u5217\u8868, \u4e0d\u540cAPI\u8bf7\u66ff\u6362\u76f8\u5e94\u53c2\u6570 Map < String , String > privateParams = new HashMap < String , String >(); // \u89c6\u9891ID privateParams . put ( \"VideoId\" , \"24c5334a35a841f099456f2b39108b8e\" ); // API\u540d\u79f0 privateParams . put ( \"Action\" , \"GetPlayInfo\" ); return privateParams ; } /** * \u751f\u6210\u89c6\u9891\u70b9\u64adOpenAPI\u516c\u5171\u53c2\u6570 * \u4e0d\u9700\u8981\u4fee\u6539 * @return */ private static Map < String , String > generatePublicParamters () { Map < String , String > publicParams = new HashMap < String , String >(); publicParams . put ( \"Format\" , \"JSON\" ); publicParams . put ( \"Version\" , \"2017-03-21\" ); publicParams . put ( \"AccessKeyId\" , access_key_id ); publicParams . put ( \"SignatureMethod\" , \"HMAC-SHA1\" ); publicParams . put ( \"Timestamp\" , generateTimestamp ()); publicParams . put ( \"SignatureVersion\" , \"1.0\" ); publicParams . put ( \"SignatureNonce\" , generateRandom ()); if ( security_token != null && security_token . length () > 0 ) { publicParams . put ( \"SecurityToken\" , security_token ); } return publicParams ; } /** * \u751f\u6210OpenAPI\u5730\u5740 * @param privateParams * @return * @throws Exception */ private static String generateOpenAPIURL ( Map < String , String > publicParams , Map < String , String > privateParams ) { return generateURL ( VOD_DOMAIN , HTTP_METHOD , publicParams , privateParams ); } /** * @param domain \u8bf7\u6c42\u5730\u5740 * @param httpMethod HTTP\u8bf7\u6c42\u65b9\u5f0fGET\uff0cPOST\u7b49 * @param publicParams \u516c\u5171\u53c2\u6570 * @param privateParams \u63a5\u53e3\u7684\u79c1\u6709\u53c2\u6570 * @return \u6700\u540e\u7684url */ private static String generateURL ( String domain , String httpMethod , Map < String , String > publicParams , Map < String , String > privateParams ) { List < String > allEncodeParams = getAllParams ( publicParams , privateParams ); String cqsString = getCQS ( allEncodeParams ); out ( \"CanonicalizedQueryString = \" + cqsString ); String stringToSign = httpMethod + \"&\" + percentEncode ( \"/\" ) + \"&\" + percentEncode ( cqsString ); out ( \"StringtoSign = \" + stringToSign ); String signature = hmacSHA1Signature ( access_key_secret , stringToSign ); out ( \"Signature = \" + signature ); return domain + \"?\" + cqsString + \"&\" + percentEncode ( \"Signature\" ) + \"=\" + percentEncode ( signature ); } private static List < String > getAllParams ( Map < String , String > publicParams , Map < String , String > privateParams ) { List < String > encodeParams = new ArrayList < String >(); if ( publicParams != null ) { for ( String key : publicParams . keySet ()) { String value = publicParams . get ( key ); //\u5c06\u53c2\u6570\u548c\u503c\u90fdurlEncode\u4e00\u4e0b\u3002 String encodeKey = percentEncode ( key ); String encodeVal = percentEncode ( value ); encodeParams . add ( encodeKey + \"=\" + encodeVal ); } } if ( privateParams != null ) { for ( String key : privateParams . keySet ()) { String value = privateParams . get ( key ); //\u5c06\u53c2\u6570\u548c\u503c\u90fdurlEncode\u4e00\u4e0b\u3002 String encodeKey = percentEncode ( key ); String encodeVal = percentEncode ( value ); encodeParams . add ( encodeKey + \"=\" + encodeVal ); } } return encodeParams ; } /** * \u53c2\u6570urlEncode * * @param value * @return */ private static String percentEncode ( String value ) { try { String urlEncodeOrignStr = URLEncoder . encode ( value , \"UTF-8\" ); String plusReplaced = urlEncodeOrignStr . replace ( \"+\" , \"%20\" ); String starReplaced = plusReplaced . replace ( \"*\" , \"%2A\" ); String waveReplaced = starReplaced . replace ( \"%7E\" , \"~\" ); return waveReplaced ; } catch ( UnsupportedEncodingException e ) { e . printStackTrace (); } return value ; } /** * \u83b7\u53d6CQS \u7684\u5b57\u7b26\u4e32 * * @param allParams * @return */ private static String getCQS ( List < String > allParams ) { ParamsComparator paramsComparator = new ParamsComparator (); Collections . sort ( allParams , paramsComparator ); String cqString = \"\" ; for ( int i = 0 ; i < allParams . size (); i ++) { cqString += allParams . get ( i ); if ( i != allParams . size () - 1 ) { cqString += \"&\" ; } } return cqString ; } private static class ParamsComparator implements Comparator < String > { public int compare ( String lhs , String rhs ) { return lhs . compareTo ( rhs ); } } private static String hmacSHA1Signature ( String accessKeySecret , String stringtoSign ) { try { String key = accessKeySecret + \"&\" ; try { SecretKeySpec signKey = new SecretKeySpec ( key . getBytes (), HMAC_SHA1_ALGORITHM ); Mac mac = Mac . getInstance ( HMAC_SHA1_ALGORITHM ); mac . init ( signKey ); byte [] rawHmac = mac . doFinal ( stringtoSign . getBytes ()); //\u6309\u7167Base64 \u7f16\u7801\u89c4\u5219\u628a\u4e0a\u9762\u7684 HMAC \u503c\u7f16\u7801\u6210\u5b57\u7b26\u4e32\uff0c\u5373\u5f97\u5230\u7b7e\u540d\u503c\uff08Signature\uff09 return new String ( new BASE64Encoder (). encode ( rawHmac )); } catch ( Exception e ) { throw new SignatureException ( \"Failed to generate HMAC : \" + e . getMessage ()); } } catch ( SignatureException e ) { e . printStackTrace (); } return \"\" ; } /** * \u751f\u6210\u968f\u673a\u6570 * * @return */ private static String generateRandom () { String signatureNonce = UUID . randomUUID (). toString (); return signatureNonce ; } /** * \u751f\u6210\u5f53\u524dUTC\u65f6\u95f4\u6233 * * @return */ public static String generateTimestamp () { Date date = new Date ( System . currentTimeMillis ()); SimpleDateFormat df = new SimpleDateFormat ( ISO8601_DATE_FORMAT ); df . setTimeZone ( new SimpleTimeZone ( 0 , \"GMT\" )); return df . format ( date ); } private static String httpGet ( String url ) throws Exception { CloseableHttpClient httpClient = null ; try { httpClient = HttpClients . createDefault (); HttpGet httpGet = new HttpGet (); httpGet . setURI ( new URI ( url )); RequestConfig requestConfig = RequestConfig . custom () . setConnectTimeout ( 3000 ) . setSocketTimeout ( 3000 ) . build (); httpGet . setConfig ( requestConfig ); HttpResponse result = httpClient . execute ( httpGet ); String str ; try { /**\u8bfb\u53d6\u670d\u52a1\u5668\u8fd4\u56de\u8fc7\u6765\u7684json\u5b57\u7b26\u4e32\u6570\u636e**/ str = EntityUtils . toString ( result . getEntity ()); EntityUtils . consume ( result . getEntity ()); } catch ( Exception e ) { e . printStackTrace (); throw e ; } out ( str ); // \u8fd9\u91cc\u53ef\u4ee5\u89e3\u6790\u89c6\u9891\u4e91\u70b9\u64ad\u670d\u52a1\u7aef\u7684\u54cd\u5e94\u7ed3\u679c return str ; } catch ( URISyntaxException e ) { e . printStackTrace (); throw e ; } catch ( ClientProtocolException e ) { e . printStackTrace (); throw e ; } catch ( IOException e ) { e . printStackTrace (); throw e ; } finally { try { if ( httpClient != null ) httpClient . close (); } catch ( Exception e ) { e . printStackTrace (); throw e ; } } } private static void out ( String newLine ) { System . out . println ( newLine ); LOG . info ( newLine ); } }","title":"3.1 \u8bf4\u660e"},{"location":"Python/crc16/","text":"CRC16\u8ba1\u7b97-Python\u5b9e\u73b0 \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 crc16_table = [ 0x0000 , 0x1021 , 0x2042 , 0x3063 , 0x4084 , 0x50A5 , 0x60C6 , 0x70E7 , 0x8108 , 0x9129 , 0xA14A , 0xB16B , 0xC18C , 0xD1AD , 0xE1CE , 0xF1EF , 0x1231 , 0x0210 , 0x3273 , 0x2252 , 0x52B5 , 0x4294 , 0x72F7 , 0x62D6 , 0x9339 , 0x8318 , 0xB37B , 0xA35A , 0xD3BD , 0xC39C , 0xF3FF , 0xE3DE , 0x2462 , 0x3443 , 0x0420 , 0x1401 , 0x64E6 , 0x74C7 , 0x44A4 , 0x5485 , 0xA56A , 0xB54B , 0x8528 , 0x9509 , 0xE5EE , 0xF5CF , 0xC5AC , 0xD58D , 0x3653 , 0x2672 , 0x1611 , 0x0630 , 0x76D7 , 0x66F6 , 0x5695 , 0x46B4 , 0xB75B , 0xA77A , 0x9719 , 0x8738 , 0xF7DF , 0xE7FE , 0xD79D , 0xC7BC , 0x48C4 , 0x58E5 , 0x6886 , 0x78A7 , 0x0840 , 0x1861 , 0x2802 , 0x3823 , 0xC9CC , 0xD9ED , 0xE98E , 0xF9AF , 0x8948 , 0x9969 , 0xA90A , 0xB92B , 0x5AF5 , 0x4AD4 , 0x7AB7 , 0x6A96 , 0x1A71 , 0x0A50 , 0x3A33 , 0x2A12 , 0xDBFD , 0xCBDC , 0xFBBF , 0xEB9E , 0x9B79 , 0x8B58 , 0xBB3B , 0xAB1A , 0x6CA6 , 0x7C87 , 0x4CE4 , 0x5CC5 , 0x2C22 , 0x3C03 , 0x0C60 , 0x1C41 , 0xEDAE , 0xFD8F , 0xCDEC , 0xDDCD , 0xAD2A , 0xBD0B , 0x8D68 , 0x9D49 , 0x7E97 , 0x6EB6 , 0x5ED5 , 0x4EF4 , 0x3E13 , 0x2E32 , 0x1E51 , 0x0E70 , 0xFF9F , 0xEFBE , 0xDFDD , 0xCFFC , 0xBF1B , 0xAF3A , 0x9F59 , 0x8F78 , 0x9188 , 0x81A9 , 0xB1CA , 0xA1EB , 0xD10C , 0xC12D , 0xF14E , 0xE16F , 0x1080 , 0x00A1 , 0x30C2 , 0x20E3 , 0x5004 , 0x4025 , 0x7046 , 0x6067 , 0x83B9 , 0x9398 , 0xA3FB , 0xB3DA , 0xC33D , 0xD31C , 0xE37F , 0xF35E , 0x02B1 , 0x1290 , 0x22F3 , 0x32D2 , 0x4235 , 0x5214 , 0x6277 , 0x7256 , 0xB5EA , 0xA5CB , 0x95A8 , 0x8589 , 0xF56E , 0xE54F , 0xD52C , 0xC50D , 0x34E2 , 0x24C3 , 0x14A0 , 0x0481 , 0x7466 , 0x6447 , 0x5424 , 0x4405 , 0xA7DB , 0xB7FA , 0x8799 , 0x97B8 , 0xE75F , 0xF77E , 0xC71D , 0xD73C , 0x26D3 , 0x36F2 , 0x0691 , 0x16B0 , 0x6657 , 0x7676 , 0x4615 , 0x5634 , 0xD94C , 0xC96D , 0xF90E , 0xE92F , 0x99C8 , 0x89E9 , 0xB98A , 0xA9AB , 0x5844 , 0x4865 , 0x7806 , 0x6827 , 0x18C0 , 0x08E1 , 0x3882 , 0x28A3 , 0xCB7D , 0xDB5C , 0xEB3F , 0xFB1E , 0x8BF9 , 0x9BD8 , 0xABBB , 0xBB9A , 0x4A75 , 0x5A54 , 0x6A37 , 0x7A16 , 0x0AF1 , 0x1AD0 , 0x2AB3 , 0x3A92 , 0xFD2E , 0xED0F , 0xDD6C , 0xCD4D , 0xBDAA , 0xAD8B , 0x9DE8 , 0x8DC9 , 0x7C26 , 0x6C07 , 0x5C64 , 0x4C45 , 0x3CA2 , 0x2C83 , 0x1CE0 , 0x0CC1 , 0xEF1F , 0xFF3E , 0xCF5D , 0xDF7C , 0xAF9B , 0xBFBA , 0x8FD9 , 0x9FF8 , 0x6E17 , 0x7E36 , 0x4E55 , 0x5E74 , 0x2E93 , 0x3EB2 , 0x0ED1 , 0x1EF0 ] def crc_16 ( buf , len ): crc = 0 for i in range ( 1 , len ): index = (( crc >> 8 ) ^ ord ( buf [ i ])) & 0xFF crc = (( crc << 8 ) ^ crc16_table [ index ]) & 0xFFFF return crc","title":"CRC16"},{"location":"Python/crc16/#crc16-python","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 crc16_table = [ 0x0000 , 0x1021 , 0x2042 , 0x3063 , 0x4084 , 0x50A5 , 0x60C6 , 0x70E7 , 0x8108 , 0x9129 , 0xA14A , 0xB16B , 0xC18C , 0xD1AD , 0xE1CE , 0xF1EF , 0x1231 , 0x0210 , 0x3273 , 0x2252 , 0x52B5 , 0x4294 , 0x72F7 , 0x62D6 , 0x9339 , 0x8318 , 0xB37B , 0xA35A , 0xD3BD , 0xC39C , 0xF3FF , 0xE3DE , 0x2462 , 0x3443 , 0x0420 , 0x1401 , 0x64E6 , 0x74C7 , 0x44A4 , 0x5485 , 0xA56A , 0xB54B , 0x8528 , 0x9509 , 0xE5EE , 0xF5CF , 0xC5AC , 0xD58D , 0x3653 , 0x2672 , 0x1611 , 0x0630 , 0x76D7 , 0x66F6 , 0x5695 , 0x46B4 , 0xB75B , 0xA77A , 0x9719 , 0x8738 , 0xF7DF , 0xE7FE , 0xD79D , 0xC7BC , 0x48C4 , 0x58E5 , 0x6886 , 0x78A7 , 0x0840 , 0x1861 , 0x2802 , 0x3823 , 0xC9CC , 0xD9ED , 0xE98E , 0xF9AF , 0x8948 , 0x9969 , 0xA90A , 0xB92B , 0x5AF5 , 0x4AD4 , 0x7AB7 , 0x6A96 , 0x1A71 , 0x0A50 , 0x3A33 , 0x2A12 , 0xDBFD , 0xCBDC , 0xFBBF , 0xEB9E , 0x9B79 , 0x8B58 , 0xBB3B , 0xAB1A , 0x6CA6 , 0x7C87 , 0x4CE4 , 0x5CC5 , 0x2C22 , 0x3C03 , 0x0C60 , 0x1C41 , 0xEDAE , 0xFD8F , 0xCDEC , 0xDDCD , 0xAD2A , 0xBD0B , 0x8D68 , 0x9D49 , 0x7E97 , 0x6EB6 , 0x5ED5 , 0x4EF4 , 0x3E13 , 0x2E32 , 0x1E51 , 0x0E70 , 0xFF9F , 0xEFBE , 0xDFDD , 0xCFFC , 0xBF1B , 0xAF3A , 0x9F59 , 0x8F78 , 0x9188 , 0x81A9 , 0xB1CA , 0xA1EB , 0xD10C , 0xC12D , 0xF14E , 0xE16F , 0x1080 , 0x00A1 , 0x30C2 , 0x20E3 , 0x5004 , 0x4025 , 0x7046 , 0x6067 , 0x83B9 , 0x9398 , 0xA3FB , 0xB3DA , 0xC33D , 0xD31C , 0xE37F , 0xF35E , 0x02B1 , 0x1290 , 0x22F3 , 0x32D2 , 0x4235 , 0x5214 , 0x6277 , 0x7256 , 0xB5EA , 0xA5CB , 0x95A8 , 0x8589 , 0xF56E , 0xE54F , 0xD52C , 0xC50D , 0x34E2 , 0x24C3 , 0x14A0 , 0x0481 , 0x7466 , 0x6447 , 0x5424 , 0x4405 , 0xA7DB , 0xB7FA , 0x8799 , 0x97B8 , 0xE75F , 0xF77E , 0xC71D , 0xD73C , 0x26D3 , 0x36F2 , 0x0691 , 0x16B0 , 0x6657 , 0x7676 , 0x4615 , 0x5634 , 0xD94C , 0xC96D , 0xF90E , 0xE92F , 0x99C8 , 0x89E9 , 0xB98A , 0xA9AB , 0x5844 , 0x4865 , 0x7806 , 0x6827 , 0x18C0 , 0x08E1 , 0x3882 , 0x28A3 , 0xCB7D , 0xDB5C , 0xEB3F , 0xFB1E , 0x8BF9 , 0x9BD8 , 0xABBB , 0xBB9A , 0x4A75 , 0x5A54 , 0x6A37 , 0x7A16 , 0x0AF1 , 0x1AD0 , 0x2AB3 , 0x3A92 , 0xFD2E , 0xED0F , 0xDD6C , 0xCD4D , 0xBDAA , 0xAD8B , 0x9DE8 , 0x8DC9 , 0x7C26 , 0x6C07 , 0x5C64 , 0x4C45 , 0x3CA2 , 0x2C83 , 0x1CE0 , 0x0CC1 , 0xEF1F , 0xFF3E , 0xCF5D , 0xDF7C , 0xAF9B , 0xBFBA , 0x8FD9 , 0x9FF8 , 0x6E17 , 0x7E36 , 0x4E55 , 0x5E74 , 0x2E93 , 0x3EB2 , 0x0ED1 , 0x1EF0 ] def crc_16 ( buf , len ): crc = 0 for i in range ( 1 , len ): index = (( crc >> 8 ) ^ ord ( buf [ i ])) & 0xFF crc = (( crc << 8 ) ^ crc16_table [ index ]) & 0xFFFF return crc","title":"CRC16\u8ba1\u7b97-Python\u5b9e\u73b0"},{"location":"Python/matplotlib/","text":"matplotlib\u5e93\u4f7f\u7528\u6307\u5357 \u00b6 1.\u753b\u56fe\u57fa\u7840 \u00b6 1 2 3 4 5 6 7 8 import matplotlib.pyplot as plt import numpy as np x = np . linspace ( - 100 , 100 , 200 ) y = 2 * x plt . plot ( x , y ) plt . show () 2.\u4e3a\u56fe\u6807\u6dfb\u52a0\u6ce8\u91ca \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 import matplotlib.pyplot as plt import numpy as np import math angle = 0.05 distance = 100 k = ( math . atan ( math . radians ( angle ))) x = np . linspace ( 0 , distance , 10000 ) y = k * x plt . figure ( num = 1 , figsize = ( 8 , 5 ),) plt . plot ( x , y ) ax = plt . gca () ax . spines [ 'right' ] . set_color ( 'none' ) ax . spines [ 'top' ] . set_color ( 'none' ) ax . spines [ 'top' ] . set_color ( 'none' ) ax . xaxis . set_ticks_position ( 'bottom' ) ax . spines [ 'bottom' ] . set_position (( 'data' , 0 )) ax . yaxis . set_ticks_position ( 'left' ) ax . spines [ 'left' ] . set_position (( 'data' , 0 )) x0 = 100 y0 = k * x0 # \u753b\u51fa\u4e00\u6761\u5782\u76f4\u4e8ex\u8f74\u7684\u865a\u7ebf. plt . plot ([ x0 , x0 ,], [ 0 , y0 ,], 'k--' , linewidth = 2.5 ) # set dot styles plt . scatter ([ x0 , ], [ y0 , ], s = 50 , color = 'b' ) # \u6dfb\u52a0\u6ce8\u91ca annotate, (x0, y0)\u8fd9\u4e2a\u70b9\u8fdb\u884c\u6807\u6ce8. #\u53c2\u6570xycoords='data' \u662f\u8bf4\u57fa\u4e8e\u6570\u636e\u7684\u503c\u6765\u9009\u4f4d\u7f6e, # xytext=(+30, -30) \u548c textcoords='offset points' \u5bf9\u4e8e\u6807\u6ce8\u4f4d\u7f6e\u7684\u63cf\u8ff0 \u548c xy \u504f\u5dee\u503c, # arrowprops\u662f\u5bf9\u56fe\u4e2d\u7bad\u5934\u7c7b\u578b\u7684\u4e00\u4e9b\u8bbe\u7f6e. y0_ = y0 * distance plt . annotate ( r '$ %.4f cm$' % y0_ , xy = ( x0 , y0 ), xycoords = 'data' , xytext = ( - 30 , + 30 ), textcoords = 'offset points' , fontsize = 16 , arrowprops = dict ( arrowstyle = '->' , connectionstyle = \"arc3,rad=.2\" )) plt . annotate ( r '$ %.2f \u00b0$' % angle , xy = ( 0 , 0 ), xycoords = 'data' , xytext = ( + 30 , + 5 ), textcoords = 'offset points' , fontsize = 16 , arrowprops = dict ( arrowstyle = '->' , connectionstyle = \"arc3,rad=.2\" )) # \u6dfb\u52a0\u6ce8\u91ca text # \u5176\u4e2d-3.7, 3,\u662f\u9009\u53d6text\u7684\u4f4d\u7f6e plt . text ( 3 , 0.05 , 'ok' , fontdict = { 'size' : 16 , 'color' : 'r' }) plt . show ()","title":"matplotlib\u4f7f\u7528"},{"location":"Python/matplotlib/#matplotlib","text":"","title":"matplotlib\u5e93\u4f7f\u7528\u6307\u5357"},{"location":"Python/matplotlib/#1","text":"1 2 3 4 5 6 7 8 import matplotlib.pyplot as plt import numpy as np x = np . linspace ( - 100 , 100 , 200 ) y = 2 * x plt . plot ( x , y ) plt . show ()","title":"1.\u753b\u56fe\u57fa\u7840"},{"location":"Python/matplotlib/#2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 import matplotlib.pyplot as plt import numpy as np import math angle = 0.05 distance = 100 k = ( math . atan ( math . radians ( angle ))) x = np . linspace ( 0 , distance , 10000 ) y = k * x plt . figure ( num = 1 , figsize = ( 8 , 5 ),) plt . plot ( x , y ) ax = plt . gca () ax . spines [ 'right' ] . set_color ( 'none' ) ax . spines [ 'top' ] . set_color ( 'none' ) ax . spines [ 'top' ] . set_color ( 'none' ) ax . xaxis . set_ticks_position ( 'bottom' ) ax . spines [ 'bottom' ] . set_position (( 'data' , 0 )) ax . yaxis . set_ticks_position ( 'left' ) ax . spines [ 'left' ] . set_position (( 'data' , 0 )) x0 = 100 y0 = k * x0 # \u753b\u51fa\u4e00\u6761\u5782\u76f4\u4e8ex\u8f74\u7684\u865a\u7ebf. plt . plot ([ x0 , x0 ,], [ 0 , y0 ,], 'k--' , linewidth = 2.5 ) # set dot styles plt . scatter ([ x0 , ], [ y0 , ], s = 50 , color = 'b' ) # \u6dfb\u52a0\u6ce8\u91ca annotate, (x0, y0)\u8fd9\u4e2a\u70b9\u8fdb\u884c\u6807\u6ce8. #\u53c2\u6570xycoords='data' \u662f\u8bf4\u57fa\u4e8e\u6570\u636e\u7684\u503c\u6765\u9009\u4f4d\u7f6e, # xytext=(+30, -30) \u548c textcoords='offset points' \u5bf9\u4e8e\u6807\u6ce8\u4f4d\u7f6e\u7684\u63cf\u8ff0 \u548c xy \u504f\u5dee\u503c, # arrowprops\u662f\u5bf9\u56fe\u4e2d\u7bad\u5934\u7c7b\u578b\u7684\u4e00\u4e9b\u8bbe\u7f6e. y0_ = y0 * distance plt . annotate ( r '$ %.4f cm$' % y0_ , xy = ( x0 , y0 ), xycoords = 'data' , xytext = ( - 30 , + 30 ), textcoords = 'offset points' , fontsize = 16 , arrowprops = dict ( arrowstyle = '->' , connectionstyle = \"arc3,rad=.2\" )) plt . annotate ( r '$ %.2f \u00b0$' % angle , xy = ( 0 , 0 ), xycoords = 'data' , xytext = ( + 30 , + 5 ), textcoords = 'offset points' , fontsize = 16 , arrowprops = dict ( arrowstyle = '->' , connectionstyle = \"arc3,rad=.2\" )) # \u6dfb\u52a0\u6ce8\u91ca text # \u5176\u4e2d-3.7, 3,\u662f\u9009\u53d6text\u7684\u4f4d\u7f6e plt . text ( 3 , 0.05 , 'ok' , fontdict = { 'size' : 16 , 'color' : 'r' }) plt . show ()","title":"2.\u4e3a\u56fe\u6807\u6dfb\u52a0\u6ce8\u91ca"},{"location":"Python/python_record_play/","text":"python\u5f55\u97f3\u4e0e\u64ad\u653e \u00b6 \u4f7f\u7528pyAudio \u70b9\u51fb\u67e5\u9605pyAudio\u5b98\u65b9\u6587\u6863 Note pyAudio\u5bf9Python\u7684\u7248\u672c\u662f\u6709\u8981\u6c42\u7684\uff0c\u4f7f\u7528\u65f6\u8bf7\u7559\u610f\u5b98\u65b9\u6587\u6863\u8bf4\u660e\uff0c\u76ee\u524d\uff082019-03-08\uff09\u652f\u6301Python 2.7, 3.4, 3.5, and 3.6 1. \u5f55\u97f3\u4ee3\u7801\u793a\u4f8b \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 \"\"\"PyAudio example: Record a few seconds of audio and save to a WAVE file.\"\"\" import pyaudio import wave CHUNK = 1024 FORMAT = pyaudio . paInt16 CHANNELS = 2 RATE = 44100 RECORD_SECONDS = 5 WAVE_OUTPUT_FILENAME = \"output.wav\" p = pyaudio . PyAudio () stream = p . open ( format = FORMAT , channels = CHANNELS , rate = RATE , input = True , frames_per_buffer = CHUNK ) print ( \"* recording\" ) frames = [] for i in range ( 0 , int ( RATE / CHUNK * RECORD_SECONDS )): data = stream . read ( CHUNK ) frames . append ( data ) print ( \"* done recording\" ) stream . stop_stream () stream . close () p . terminate () wf = wave . open ( WAVE_OUTPUT_FILENAME , 'wb' ) wf . setnchannels ( CHANNELS ) wf . setsampwidth ( p . get_sample_size ( FORMAT )) wf . setframerate ( RATE ) wf . writeframes ( b '' . join ( frames )) wf . close () 2. \u64ad\u653e\u5f55\u97f3\u4ee3\u7801\u793a\u4f8b \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 \"\"\"PyAudio Example: Play a WAVE file.\"\"\" import pyaudio import wave import sys CHUNK = 1024 if len ( sys . argv ) < 2 : print ( \"Plays a wave file. \\n\\n Usage: %s filename.wav\" % sys . argv [ 0 ]) sys . exit ( - 1 ) wf = wave . open ( sys . argv [ 1 ], 'rb' ) p = pyaudio . PyAudio () stream = p . open ( format = p . get_format_from_width ( wf . getsampwidth ()), channels = wf . getnchannels (), rate = wf . getframerate (), output = True ) data = wf . readframes ( CHUNK ) while data != '' : stream . write ( data ) data = wf . readframes ( CHUNK ) stream . stop_stream () stream . close () p . terminate ()","title":"\u5f55\u97f3\u4e0e\u64ad\u653e"},{"location":"Python/python_record_play/#python","text":"\u4f7f\u7528pyAudio \u70b9\u51fb\u67e5\u9605pyAudio\u5b98\u65b9\u6587\u6863 Note pyAudio\u5bf9Python\u7684\u7248\u672c\u662f\u6709\u8981\u6c42\u7684\uff0c\u4f7f\u7528\u65f6\u8bf7\u7559\u610f\u5b98\u65b9\u6587\u6863\u8bf4\u660e\uff0c\u76ee\u524d\uff082019-03-08\uff09\u652f\u6301Python 2.7, 3.4, 3.5, and 3.6","title":"python\u5f55\u97f3\u4e0e\u64ad\u653e"},{"location":"Python/python_record_play/#1","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 \"\"\"PyAudio example: Record a few seconds of audio and save to a WAVE file.\"\"\" import pyaudio import wave CHUNK = 1024 FORMAT = pyaudio . paInt16 CHANNELS = 2 RATE = 44100 RECORD_SECONDS = 5 WAVE_OUTPUT_FILENAME = \"output.wav\" p = pyaudio . PyAudio () stream = p . open ( format = FORMAT , channels = CHANNELS , rate = RATE , input = True , frames_per_buffer = CHUNK ) print ( \"* recording\" ) frames = [] for i in range ( 0 , int ( RATE / CHUNK * RECORD_SECONDS )): data = stream . read ( CHUNK ) frames . append ( data ) print ( \"* done recording\" ) stream . stop_stream () stream . close () p . terminate () wf = wave . open ( WAVE_OUTPUT_FILENAME , 'wb' ) wf . setnchannels ( CHANNELS ) wf . setsampwidth ( p . get_sample_size ( FORMAT )) wf . setframerate ( RATE ) wf . writeframes ( b '' . join ( frames )) wf . close ()","title":"1. \u5f55\u97f3\u4ee3\u7801\u793a\u4f8b"},{"location":"Python/python_record_play/#2","text":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 \"\"\"PyAudio Example: Play a WAVE file.\"\"\" import pyaudio import wave import sys CHUNK = 1024 if len ( sys . argv ) < 2 : print ( \"Plays a wave file. \\n\\n Usage: %s filename.wav\" % sys . argv [ 0 ]) sys . exit ( - 1 ) wf = wave . open ( sys . argv [ 1 ], 'rb' ) p = pyaudio . PyAudio () stream = p . open ( format = p . get_format_from_width ( wf . getsampwidth ()), channels = wf . getnchannels (), rate = wf . getframerate (), output = True ) data = wf . readframes ( CHUNK ) while data != '' : stream . write ( data ) data = wf . readframes ( CHUNK ) stream . stop_stream () stream . close () p . terminate ()","title":"2. \u64ad\u653e\u5f55\u97f3\u4ee3\u7801\u793a\u4f8b"},{"location":"Python/python_string_format/","text":"Python\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u7684\u4e00\u79cd\u65b9\u6cd5 \u00b6 1 cmd_1 = \"#ud %d 0 %d \" % ( step , direction )","title":"Python\u5b57\u7b26\u4e32\u683c\u5f0f\u5316"},{"location":"Python/python_string_format/#python","text":"1 cmd_1 = \"#ud %d 0 %d \" % ( step , direction )","title":"Python\u5b57\u7b26\u4e32\u683c\u5f0f\u5316\u7684\u4e00\u79cd\u65b9\u6cd5"},{"location":"Python/python_trigonometric/","text":"python \u4e09\u89d2\u51fd\u6570 \u00b6 *\u8ba1\u7b971500m 1MOA\u7684\u76f4\u5f84 1 2 3 4 import math # *100\u5c06m\u53d8\u6210cm\uff0c*2\u5c06\u534a\u5f84\u53d8\u76f4\u5f84 math . tan ( math . radians ( 1.0 / 60.0 )) * 1500 * 100 * 2 \u51fd\u6570 \u8bf4\u660e \u793a\u4f8b acos(x) \u6c42x\u7684\u53cd\u4f59\u5f26(\u7ed3\u679c\u662f\u5f27\u5ea6) acos(2.0)\u7b49\u4e8e0.0 asin(x) \u6c42x\u7684\u53cd\u6b63\u5f26(\u7ed3\u679c\u662f\u5f27\u5ea6 asin(0.0)\u7b49\u4e8e0.0 atan(x) \u6c42x\u7684\u53cd\u6b63\u5207(\u7ed3\u679c\u662f\u5f27\u5ea6\uff09 atan(0.0)\u7b49\u4e8e0.0 ceil(x) \u4e3ax\u53d6\u6574\uff0c\u7ed3\u679c\u662f\u4e0d\u5c0f\u4e8ex\u7684\u6700\u5c0f\u6574\u6570 ceil(9.2)\u7b49\u4e8e10.0 ceil(-9.8)\u7b49\u4e8e-9.0 cos(x) \u6c42x\u7684\u4f59\u5f26(x\u662f\u5f27\u5ea6\uff09 cos(0.0)\u7b49\u4e8e1.0 exp(x) \u6c42\u5e42\u51fd\u6570e exp(1.0)\u7b49\u4e8e2.71828 exp(2.0)\u7b49\u4e8e7.38906 fabs(x) \u6c42x\u7684\u7edd\u5bf9\u503c fabs(5.1)\u7b49\u4e8e5.1 fabs(-5.1)\u7b49\u4e8e5.1 floor(x) \u4e3ax\u53d6\u6574\uff0c\u7ed3\u679c\u662f\u4e0d\u5927\u4e8ex\u7684\u6700\u5927\u6574\u6570 floor(9.2)\u7b49\u4e8e9.0 floor(-9.8)\u7b49\u4e8e-10.0 fmod(x,y) \u6c42x/y\u7684\u4f59\u6570\uff0c\u7ed3\u679c\u662f\u6d6e\u70b9\u6570 fmod(9.8,4.0)\u7b49\u4e8e1.8 hypot(x,y) \u6c42\u76f4\u89d2\u4e09\u89d2\u7684\u659c\u8fb9\u957f\u5ea6 hypot(3.0,4.0)\u7b49\u4e8e5.0 log10(x) \u6c42x\u7684\u5bf9\u6570\uff08\u4ee510\u4e3a\u5e95\uff09 log10(10.0)\u7b49\u4e8e1.0 log10(100.0)\u7b49\u4e8e2.0 pow(x,y) \u6c42x\u7684y\u6b21\u65b9\uff08xy\uff09 pow(2.7,7.0)\u7b49\u4e8e128.0 pow(9.0,0.5)\u7b49\u4e8e3.0 sin(x) \u6c42x\u7684\u6b63\u5f26\uff08x\u662f\u5f27\u5ea6\uff09 sin(0.0)\u7b49\u4e8e0.0 sqrt(x) \u6c42x\u7684\u5e73\u65b9\u6839 sqrt(900.0)\u7b49\u4e8e30.0 tan(x) \u6c42x\u7684\u6b63\u5207\uff08x\u662f\u5f27\u5ea6\uff09 tan(0.0)\u7b49\u4e8e0.0 radians(x) \u89d2\u5ea6\u8f6c\u5f27\u5ea6","title":"\u4e09\u89d2\u51fd\u6570"},{"location":"Python/python_trigonometric/#python","text":"*\u8ba1\u7b971500m 1MOA\u7684\u76f4\u5f84 1 2 3 4 import math # *100\u5c06m\u53d8\u6210cm\uff0c*2\u5c06\u534a\u5f84\u53d8\u76f4\u5f84 math . tan ( math . radians ( 1.0 / 60.0 )) * 1500 * 100 * 2 \u51fd\u6570 \u8bf4\u660e \u793a\u4f8b acos(x) \u6c42x\u7684\u53cd\u4f59\u5f26(\u7ed3\u679c\u662f\u5f27\u5ea6) acos(2.0)\u7b49\u4e8e0.0 asin(x) \u6c42x\u7684\u53cd\u6b63\u5f26(\u7ed3\u679c\u662f\u5f27\u5ea6 asin(0.0)\u7b49\u4e8e0.0 atan(x) \u6c42x\u7684\u53cd\u6b63\u5207(\u7ed3\u679c\u662f\u5f27\u5ea6\uff09 atan(0.0)\u7b49\u4e8e0.0 ceil(x) \u4e3ax\u53d6\u6574\uff0c\u7ed3\u679c\u662f\u4e0d\u5c0f\u4e8ex\u7684\u6700\u5c0f\u6574\u6570 ceil(9.2)\u7b49\u4e8e10.0 ceil(-9.8)\u7b49\u4e8e-9.0 cos(x) \u6c42x\u7684\u4f59\u5f26(x\u662f\u5f27\u5ea6\uff09 cos(0.0)\u7b49\u4e8e1.0 exp(x) \u6c42\u5e42\u51fd\u6570e exp(1.0)\u7b49\u4e8e2.71828 exp(2.0)\u7b49\u4e8e7.38906 fabs(x) \u6c42x\u7684\u7edd\u5bf9\u503c fabs(5.1)\u7b49\u4e8e5.1 fabs(-5.1)\u7b49\u4e8e5.1 floor(x) \u4e3ax\u53d6\u6574\uff0c\u7ed3\u679c\u662f\u4e0d\u5927\u4e8ex\u7684\u6700\u5927\u6574\u6570 floor(9.2)\u7b49\u4e8e9.0 floor(-9.8)\u7b49\u4e8e-10.0 fmod(x,y) \u6c42x/y\u7684\u4f59\u6570\uff0c\u7ed3\u679c\u662f\u6d6e\u70b9\u6570 fmod(9.8,4.0)\u7b49\u4e8e1.8 hypot(x,y) \u6c42\u76f4\u89d2\u4e09\u89d2\u7684\u659c\u8fb9\u957f\u5ea6 hypot(3.0,4.0)\u7b49\u4e8e5.0 log10(x) \u6c42x\u7684\u5bf9\u6570\uff08\u4ee510\u4e3a\u5e95\uff09 log10(10.0)\u7b49\u4e8e1.0 log10(100.0)\u7b49\u4e8e2.0 pow(x,y) \u6c42x\u7684y\u6b21\u65b9\uff08xy\uff09 pow(2.7,7.0)\u7b49\u4e8e128.0 pow(9.0,0.5)\u7b49\u4e8e3.0 sin(x) \u6c42x\u7684\u6b63\u5f26\uff08x\u662f\u5f27\u5ea6\uff09 sin(0.0)\u7b49\u4e8e0.0 sqrt(x) \u6c42x\u7684\u5e73\u65b9\u6839 sqrt(900.0)\u7b49\u4e8e30.0 tan(x) \u6c42x\u7684\u6b63\u5207\uff08x\u662f\u5f27\u5ea6\uff09 tan(0.0)\u7b49\u4e8e0.0 radians(x) \u89d2\u5ea6\u8f6c\u5f27\u5ea6","title":"python \u4e09\u89d2\u51fd\u6570"},{"location":"Python/tensorflow_install_on_windows/","text":"\u5b89\u88c5Tensorflow \u00b6 1 2 3 4 5 6 7 8 # Current stable release for CPU-only pip install tensorflow # Preview nightly build for CPU-only (unstable) pip install tf-nightly # Install TensorFlow 2.0 Beta pip install tensorflow == 2 .0.0-beta1 \u5982\u679c\u62a5\u9519\uff0c\u90a3\u4e48\u8bf7\u5347\u7ea7\u60a8\u7684pip\uff0cnumpy\u548cmatplotlib 1 2 3 4 5 python -m install --upgrade pip pip install -U numpy pip install -U matplotlib","title":"\u5b89\u88c5Tensorflow"},{"location":"Python/tensorflow_install_on_windows/#tensorflow","text":"1 2 3 4 5 6 7 8 # Current stable release for CPU-only pip install tensorflow # Preview nightly build for CPU-only (unstable) pip install tf-nightly # Install TensorFlow 2.0 Beta pip install tensorflow == 2 .0.0-beta1 \u5982\u679c\u62a5\u9519\uff0c\u90a3\u4e48\u8bf7\u5347\u7ea7\u60a8\u7684pip\uff0cnumpy\u548cmatplotlib 1 2 3 4 5 python -m install --upgrade pip pip install -U numpy pip install -U matplotlib","title":"\u5b89\u88c5Tensorflow"},{"location":"Tools/JupyterNotebook/","text":"\u5c40\u57df\u7f51\u8bbf\u95eeJupyter Notebook\u7684\u8bbe\u7f6e\u65b9\u6cd5 \u00b6 1.\u5b89\u88c5Jupyter Notebook \u00b6 1 pip install jupyter 2.\u5bfc\u51faJupyter Notebook\u7684\u914d\u7f6e\u6587\u4ef6 1 jupyter notebook --generate-config 3.\u5bf9Jupyter Notebook\u7684\u914d\u7f6e\u6587\u4ef6\u505a\u5982\u4e0b\u4fee\u6539 1 2 3 c.NotebookApp.ip = '*' c.NotebookApp.open_browser = False c.NotebookApp.port = 8888 4.\u542f\u52a8Jupyter Notebook 1 jupyter notebook --ip = 0 .0.0.0 --no-browser --allow-root \u7136\u540e\u6839\u636e\u547d\u4ee4\u884c\u63d0\u793a\u7684URL\u767b\u5f55\u5373\u53ef","title":"\u5c40\u57df\u7f51\u8bbf\u95eeJupyter Notebook"},{"location":"Tools/JupyterNotebook/#jupyter-notebook","text":"","title":"\u5c40\u57df\u7f51\u8bbf\u95eeJupyter Notebook\u7684\u8bbe\u7f6e\u65b9\u6cd5"},{"location":"Tools/JupyterNotebook/#1jupyter-notebook","text":"1 pip install jupyter 2.\u5bfc\u51faJupyter Notebook\u7684\u914d\u7f6e\u6587\u4ef6 1 jupyter notebook --generate-config 3.\u5bf9Jupyter Notebook\u7684\u914d\u7f6e\u6587\u4ef6\u505a\u5982\u4e0b\u4fee\u6539 1 2 3 c.NotebookApp.ip = '*' c.NotebookApp.open_browser = False c.NotebookApp.port = 8888 4.\u542f\u52a8Jupyter Notebook 1 jupyter notebook --ip = 0 .0.0.0 --no-browser --allow-root \u7136\u540e\u6839\u636e\u547d\u4ee4\u884c\u63d0\u793a\u7684URL\u767b\u5f55\u5373\u53ef","title":"1.\u5b89\u88c5Jupyter Notebook"},{"location":"Tools/PlantUML/","text":"UML Tool \u00b6 Resources \u00b6 PlantUML Office Site Graphviz Office Site Install Graphviz for PlantUML Download plantuml.jar Set \"graphviz/bin\" path to environment variables. PlantUML for Notepad++ \u00b6 PlantUML for Notepad++ Test with Notepad++ \u00b6 Create a new txt file with PlantUML commands, like this example called test_uml.txt 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 @startuml :Main Admin: as Admin (Use the application) as (Use) User -> (Start) User --> (Use) Admin ---> (Use) note right of Admin : This is an example. note right of (Use) A note can also be on several lines end note note \"This note is connected\\nto several objects.\" as N2 (Start) .. N2 N2 .. (Use) @enduml Then, run PlantUML, using test_uml.txt as input. The output is an image. 1 java - jar plantuml . jar test_uml . txt The result is: Note It only is sytax highlighting support for PlantUML user defined language defined for Notepad++, the real program is plantuml.jar. PlantUML for Android Studio \u00b6 File -> Settings -> Plug -> Browse Repositories Then search \"plantuml\" Then install it Test with Android Studio \u00b6 File -> New -> UML Use Case -> \"test.puml\" The result is:","title":"UML"},{"location":"Tools/PlantUML/#uml-tool","text":"","title":"UML Tool"},{"location":"Tools/PlantUML/#resources","text":"PlantUML Office Site Graphviz Office Site Install Graphviz for PlantUML Download plantuml.jar Set \"graphviz/bin\" path to environment variables.","title":"Resources"},{"location":"Tools/PlantUML/#plantuml-for-notepad","text":"PlantUML for Notepad++","title":"PlantUML for Notepad++"},{"location":"Tools/PlantUML/#test-with-notepad","text":"Create a new txt file with PlantUML commands, like this example called test_uml.txt 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 @startuml :Main Admin: as Admin (Use the application) as (Use) User -> (Start) User --> (Use) Admin ---> (Use) note right of Admin : This is an example. note right of (Use) A note can also be on several lines end note note \"This note is connected\\nto several objects.\" as N2 (Start) .. N2 N2 .. (Use) @enduml Then, run PlantUML, using test_uml.txt as input. The output is an image. 1 java - jar plantuml . jar test_uml . txt The result is: Note It only is sytax highlighting support for PlantUML user defined language defined for Notepad++, the real program is plantuml.jar.","title":"Test with Notepad++"},{"location":"Tools/PlantUML/#plantuml-for-android-studio","text":"File -> Settings -> Plug -> Browse Repositories Then search \"plantuml\" Then install it","title":"PlantUML for Android Studio"},{"location":"Tools/PlantUML/#test-with-android-studio","text":"File -> New -> UML Use Case -> \"test.puml\" The result is:","title":"Test with Android Studio"},{"location":"Tools/Shadowsock/","text":"Shadowsocks for Ubuntu \u00b6 1. Install Shadowsocks \u00b6 Ubuntu16.04 and above 1 2 3 sudo add-apt-repository ppa:hzwhuang/ss-qt5 sudo apt-get update sudo apt-get install shadowsocks-qt5 Ubuntu18.04 1 2 3 4 sudo vim /etc/apt/sources.list.d/hzwhuang-ubuntu-ss-qt5-bionic.list deb http://ppa.launchpad.net/hzwhuang/ss-qt5/ubuntu xenial main # deb-src http://ppa.launchpad.net/hzwhuang/ss-qt5/ubuntu xenial main 2. \u542f\u52a8Shadowsocks-qt5\u5e76\u914d\u7f6e \u00b6 Note \u6b64\u5904\u7684\u8d26\u53f7\u771f\u5b9e\u6709\u6548\uff0c\u9700\u8981\u5bc6\u7801\u7684\u540c\u5b66\u8bf7\u79c1\u4fe1\u6211\u54e6\uff01 3. \u914d\u7f6e\u7cfb\u7edf\u4ee3\u7406 \u00b6 1 2 3 4 5 // \u76f4\u63a5\u4ecegfwlist\u7f51\u7ad9\u83b7\u53d6gfwlist.txt\u6587\u4ef6 genpac --pac-proxy \"SOCKS5 127.0.0.1:8123\" --gfwlist-proxy = \"SOCKS5 127.0.0.1:8123\" --gfwlist-url = https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt --output = \"autoproxy.pac\" // \u5047\u5982\u65e0\u6cd5\u8bbf\u95eegfwlist\uff0c\u76f4\u63a5\u4f7f\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\u5176\u7f51\u5740\uff0c\u4e0b\u8f7dgfwlist.txt\u6587\u4ef6\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4 genpac --pac-proxy \"SOCKS5 127.0.0.1:8123\" --gfwlist-proxy = \"SOCKS5 127.0.0.1:8123\" --gfwlist-local = ./gfwlist.txt --output = \"autoproxy.pac\" Network -> Network Proxy -> Automatic \u5728Configuration URL\u4e2d 1 file:///home/fhc/autoproxy.pac 4. \u5728\u6d4f\u89c8\u5668\u4e2d\u914d\u7f6e\u4f7f\u7528\u7cfb\u7edf\u4ee3\u7406 \u00b6 5. \u547d\u4ee4\u884c\u4f7f\u7528\u7cfb\u7edf\u4ee3\u7406 \u00b6 1 2 sudo apt-get install proxychains4 proxychains4 curl www.google.com","title":"Shadowsock"},{"location":"Tools/Shadowsock/#shadowsocks-for-ubuntu","text":"","title":"Shadowsocks for Ubuntu"},{"location":"Tools/Shadowsock/#1-install-shadowsocks","text":"Ubuntu16.04 and above 1 2 3 sudo add-apt-repository ppa:hzwhuang/ss-qt5 sudo apt-get update sudo apt-get install shadowsocks-qt5 Ubuntu18.04 1 2 3 4 sudo vim /etc/apt/sources.list.d/hzwhuang-ubuntu-ss-qt5-bionic.list deb http://ppa.launchpad.net/hzwhuang/ss-qt5/ubuntu xenial main # deb-src http://ppa.launchpad.net/hzwhuang/ss-qt5/ubuntu xenial main","title":"1. Install Shadowsocks"},{"location":"Tools/Shadowsock/#2-shadowsocks-qt5","text":"Note \u6b64\u5904\u7684\u8d26\u53f7\u771f\u5b9e\u6709\u6548\uff0c\u9700\u8981\u5bc6\u7801\u7684\u540c\u5b66\u8bf7\u79c1\u4fe1\u6211\u54e6\uff01","title":"2. \u542f\u52a8Shadowsocks-qt5\u5e76\u914d\u7f6e"},{"location":"Tools/Shadowsock/#3","text":"1 2 3 4 5 // \u76f4\u63a5\u4ecegfwlist\u7f51\u7ad9\u83b7\u53d6gfwlist.txt\u6587\u4ef6 genpac --pac-proxy \"SOCKS5 127.0.0.1:8123\" --gfwlist-proxy = \"SOCKS5 127.0.0.1:8123\" --gfwlist-url = https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt --output = \"autoproxy.pac\" // \u5047\u5982\u65e0\u6cd5\u8bbf\u95eegfwlist\uff0c\u76f4\u63a5\u4f7f\u7528\u6d4f\u89c8\u5668\u8bbf\u95ee\u5176\u7f51\u5740\uff0c\u4e0b\u8f7dgfwlist.txt\u6587\u4ef6\uff0c\u7136\u540e\u6267\u884c\u4e0b\u9762\u7684\u547d\u4ee4 genpac --pac-proxy \"SOCKS5 127.0.0.1:8123\" --gfwlist-proxy = \"SOCKS5 127.0.0.1:8123\" --gfwlist-local = ./gfwlist.txt --output = \"autoproxy.pac\" Network -> Network Proxy -> Automatic \u5728Configuration URL\u4e2d 1 file:///home/fhc/autoproxy.pac","title":"3. \u914d\u7f6e\u7cfb\u7edf\u4ee3\u7406"},{"location":"Tools/Shadowsock/#4","text":"","title":"4. \u5728\u6d4f\u89c8\u5668\u4e2d\u914d\u7f6e\u4f7f\u7528\u7cfb\u7edf\u4ee3\u7406"},{"location":"Tools/Shadowsock/#5","text":"1 2 sudo apt-get install proxychains4 proxychains4 curl www.google.com","title":"5. \u547d\u4ee4\u884c\u4f7f\u7528\u7cfb\u7edf\u4ee3\u7406"},{"location":"Tools/Shadowsock_CML/","text":"\u547d\u4ee4\u884c\u914d\u7f6eShadowsocks\u5e76\u4f7f\u7528 \u00b6 1.\u5b89\u88c5Shadowsocks \u00b6 1 2 # Ubuntu16.10\u53ca\u4ee5\u4e0a sudo apt-get install shadowsocks 2.\u914d\u7f6eShadowsocks \u00b6 1 sudo vim /etc/shadowsocks/config.json 3.\u5b89\u88c5proxychains4 \u00b6 1 sudo apt-get install proxychains4 4.\u4fee\u6539proxychains4\u914d\u7f6e\u6587\u4ef6 \u00b6 1 2 3 4 5 # \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 sudo vim /etc/proxychains4.conf # \u5728\u6587\u4ef6\u672b\u5c3e\u6dfb\u52a0 socks5 127 .0.0.1 1080 5.\u6d4b\u8bd5 \u00b6 \u5927\u529f\u544a\u6210\uff0c\u6d4b\u8bd5\u4e00\u4e0b\u3002 Warning \u4e0d\u80fd\u7528ping\u547d\u4ee4\u6d4b\u8bd5\uff0c\u56e0\u4e3aproxychains\u53ea\u652f\u6301\u4f7f\u7528tcp\u6216udp\u534f\u8bae\u7684\u7a0b\u5e8f\u3002 ping\u7528\u7684\u662fICMP\u534f\u8bae\uff0c\u4e0d\u4ee5tcp\u6216udp\u4e3a\u57fa\u7840\uff0c\u6240\u4ee5\u7528\u4e0d\u4e86\u3002 1 proxychains4 curl www.google.com","title":"Shadowsock\u547d\u4ee4\u884c\u914d\u7f6e"},{"location":"Tools/Shadowsock_CML/#shadowsocks","text":"","title":"\u547d\u4ee4\u884c\u914d\u7f6eShadowsocks\u5e76\u4f7f\u7528"},{"location":"Tools/Shadowsock_CML/#1shadowsocks","text":"1 2 # Ubuntu16.10\u53ca\u4ee5\u4e0a sudo apt-get install shadowsocks","title":"1.\u5b89\u88c5Shadowsocks"},{"location":"Tools/Shadowsock_CML/#2shadowsocks","text":"1 sudo vim /etc/shadowsocks/config.json","title":"2.\u914d\u7f6eShadowsocks"},{"location":"Tools/Shadowsock_CML/#3proxychains4","text":"1 sudo apt-get install proxychains4","title":"3.\u5b89\u88c5proxychains4"},{"location":"Tools/Shadowsock_CML/#4proxychains4","text":"1 2 3 4 5 # \u6253\u5f00\u914d\u7f6e\u6587\u4ef6 sudo vim /etc/proxychains4.conf # \u5728\u6587\u4ef6\u672b\u5c3e\u6dfb\u52a0 socks5 127 .0.0.1 1080","title":"4.\u4fee\u6539proxychains4\u914d\u7f6e\u6587\u4ef6"},{"location":"Tools/Shadowsock_CML/#5","text":"\u5927\u529f\u544a\u6210\uff0c\u6d4b\u8bd5\u4e00\u4e0b\u3002 Warning \u4e0d\u80fd\u7528ping\u547d\u4ee4\u6d4b\u8bd5\uff0c\u56e0\u4e3aproxychains\u53ea\u652f\u6301\u4f7f\u7528tcp\u6216udp\u534f\u8bae\u7684\u7a0b\u5e8f\u3002 ping\u7528\u7684\u662fICMP\u534f\u8bae\uff0c\u4e0d\u4ee5tcp\u6216udp\u4e3a\u57fa\u7840\uff0c\u6240\u4ee5\u7528\u4e0d\u4e86\u3002 1 proxychains4 curl www.google.com","title":"5.\u6d4b\u8bd5"},{"location":"Tools/embedded_develop_tools/","text":"\u5d4c\u5165\u5f0f\u5f00\u53d1\u4e4b\u795e\u5175\u5229\u5668 \u00b6 1. Source Insight\u4ee3\u7801\u9605\u8bfb\u795e\u5668 \u00b6 Source Insight\u662f\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u9762\u5411\u9879\u76ee\u7684\u7f16\u7a0b\u7f16\u8f91\u5668\uff0c\u4ee3\u7801\u6d4f\u89c8\u5668\u548c\u5206\u6790\u5668\uff0c\u53ef\u5e2e\u52a9\u60a8\u5728\u5de5\u4f5c\u548c\u8ba1\u5212\u200b\u200b\u65f6\u7406\u89e3\u4ee3\u7801\u3002 Source Insight\u5177\u6709\u9488\u5bf9C / C ++\uff0cC\uff03\uff0cJava\uff0cObjective-C\u7b49\u7684\u5185\u7f6e\u52a8\u6001\u5206\u6790\u3002 \u4e3b\u8981\u4f18\u70b9 \u5e2e\u52a9\u7406\u89e3\u73b0\u6709\u7684\u4ee3\u7801\u5e93\u3002 \u5feb\u901f\u5bfc\u822a\u529f\u80fd\u8c03\u7528\u548c\u547c\u53eb\u8005\u3002 \u67e5\u627e\u5bf9\u51fd\u6570\uff0c\u53d8\u91cf\u7b49\u7684\u5f15\u7528 - \u51e0\u4e4e\u662f\u5373\u65f6\u7684\u3002 \u8bf7\u53c2\u9605\u8c03\u7528\u56fe\u548c\u7c7b\u6811\u56fe\u3002 \u65e0\u9700\u6253\u5f00\u6587\u4ef6\u5373\u53ef\u9884\u89c8\u51fd\u6570\u548c\u7c7b\u5b9a\u4e49\u3002 \u4f7f\u7528\u8bed\u6cd5\u683c\u5f0f\u67e5\u770b\u5bf9\u53d8\u91cf\u548c\u5176\u4ed6\u58f0\u660e\u7684\u5b9e\u65f6\u5f15\u7528\u3002 \u5f3a\u5927\u7684\u7f16\u8f91\u529f\u80fd\uff0c\u5305\u62ec\u4ee3\u7801\u7247\u6bb5\uff0c\u7b26\u53f7\u81ea\u52a8\u5b8c\u6210\u548c\u667a\u80fd\u91cd\u547d\u540d\u3002 \u52a8\u6001\u4fe1\u606f\u9762\u677f\u534f\u540c\u5de5\u4f5c\u4ee5\u521b\u5efa\u9ad8\u6548\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002 \u4ee3\u7801\u5206\u6790 https://www.audacityteam.org/ https://ardour.org/ https://lmms.io/ https://www.openshot.org/ https://shotcut.org/ https://www.blender.org/ Avidemux\u662f\u4e00\u6b3e\u514d\u8d39\u7684\u89c6\u9891\u7f16\u8f91\u5668\uff0c\u4e13\u4e3a\u7b80\u5355\u7684\u526a\u5207\uff0c\u8fc7\u6ee4\u548c\u7f16\u7801\u4efb\u52a1\u800c\u8bbe\u8ba1\u3002\u5b83\u652f\u6301\u591a\u79cd\u6587\u4ef6\u7c7b\u578b\uff0c\u5305\u62ecAVI\uff0cDVD\u517c\u5bb9\u7684MPEG\u6587\u4ef6\uff0cMP4\u548cASF\uff0c\u4f7f\u7528\u5404\u79cd\u7f16\u89e3\u7801\u5668\u3002\u53ef\u4ee5\u4f7f\u7528\u9879\u76ee\uff0c\u4f5c\u4e1a\u961f\u5217\u548c\u5f3a\u5927\u7684\u811a\u672c\u529f\u80fd\u81ea\u52a8\u6267\u884c\u4efb\u52a1\u3002 Avidemux\u53ef\u5728GNU GPL\u8bb8\u53ef\u4e0b\u7528\u4e8eLinux\uff0cBSD\uff0cMac OS X\u548cMicrosoft Windows\u3002\u8be5\u7a0b\u5e8f\u662f\u7531Mean\u4ece\u5934\u5f00\u59cb\u7f16\u5199\u7684\uff0c\u4f46\u4e5f\u4f7f\u7528\u4e86\u6765\u81ea\u5176\u4ed6\u4eba\u548c\u9879\u76ee\u7684\u4ee3\u7801\u3002\u968f\u65f6\u6b22\u8fce\u8865\u4e01\uff0c\u7ffb\u8bd1\u751a\u81f3\u9519\u8bef\u62a5\u544a\u3002","title":"\u5d4c\u5165\u5f0f\u5f00\u53d1\u4e4b\u795e\u5175\u5229\u5668"},{"location":"Tools/embedded_develop_tools/#_1","text":"","title":"\u5d4c\u5165\u5f0f\u5f00\u53d1\u4e4b\u795e\u5175\u5229\u5668"},{"location":"Tools/embedded_develop_tools/#1-source-insight","text":"Source Insight\u662f\u4e00\u4e2a\u529f\u80fd\u5f3a\u5927\u7684\u9762\u5411\u9879\u76ee\u7684\u7f16\u7a0b\u7f16\u8f91\u5668\uff0c\u4ee3\u7801\u6d4f\u89c8\u5668\u548c\u5206\u6790\u5668\uff0c\u53ef\u5e2e\u52a9\u60a8\u5728\u5de5\u4f5c\u548c\u8ba1\u5212\u200b\u200b\u65f6\u7406\u89e3\u4ee3\u7801\u3002 Source Insight\u5177\u6709\u9488\u5bf9C / C ++\uff0cC\uff03\uff0cJava\uff0cObjective-C\u7b49\u7684\u5185\u7f6e\u52a8\u6001\u5206\u6790\u3002 \u4e3b\u8981\u4f18\u70b9 \u5e2e\u52a9\u7406\u89e3\u73b0\u6709\u7684\u4ee3\u7801\u5e93\u3002 \u5feb\u901f\u5bfc\u822a\u529f\u80fd\u8c03\u7528\u548c\u547c\u53eb\u8005\u3002 \u67e5\u627e\u5bf9\u51fd\u6570\uff0c\u53d8\u91cf\u7b49\u7684\u5f15\u7528 - \u51e0\u4e4e\u662f\u5373\u65f6\u7684\u3002 \u8bf7\u53c2\u9605\u8c03\u7528\u56fe\u548c\u7c7b\u6811\u56fe\u3002 \u65e0\u9700\u6253\u5f00\u6587\u4ef6\u5373\u53ef\u9884\u89c8\u51fd\u6570\u548c\u7c7b\u5b9a\u4e49\u3002 \u4f7f\u7528\u8bed\u6cd5\u683c\u5f0f\u67e5\u770b\u5bf9\u53d8\u91cf\u548c\u5176\u4ed6\u58f0\u660e\u7684\u5b9e\u65f6\u5f15\u7528\u3002 \u5f3a\u5927\u7684\u7f16\u8f91\u529f\u80fd\uff0c\u5305\u62ec\u4ee3\u7801\u7247\u6bb5\uff0c\u7b26\u53f7\u81ea\u52a8\u5b8c\u6210\u548c\u667a\u80fd\u91cd\u547d\u540d\u3002 \u52a8\u6001\u4fe1\u606f\u9762\u677f\u534f\u540c\u5de5\u4f5c\u4ee5\u521b\u5efa\u9ad8\u6548\u7684\u5de5\u4f5c\u6d41\u7a0b\u3002 \u4ee3\u7801\u5206\u6790 https://www.audacityteam.org/ https://ardour.org/ https://lmms.io/ https://www.openshot.org/ https://shotcut.org/ https://www.blender.org/ Avidemux\u662f\u4e00\u6b3e\u514d\u8d39\u7684\u89c6\u9891\u7f16\u8f91\u5668\uff0c\u4e13\u4e3a\u7b80\u5355\u7684\u526a\u5207\uff0c\u8fc7\u6ee4\u548c\u7f16\u7801\u4efb\u52a1\u800c\u8bbe\u8ba1\u3002\u5b83\u652f\u6301\u591a\u79cd\u6587\u4ef6\u7c7b\u578b\uff0c\u5305\u62ecAVI\uff0cDVD\u517c\u5bb9\u7684MPEG\u6587\u4ef6\uff0cMP4\u548cASF\uff0c\u4f7f\u7528\u5404\u79cd\u7f16\u89e3\u7801\u5668\u3002\u53ef\u4ee5\u4f7f\u7528\u9879\u76ee\uff0c\u4f5c\u4e1a\u961f\u5217\u548c\u5f3a\u5927\u7684\u811a\u672c\u529f\u80fd\u81ea\u52a8\u6267\u884c\u4efb\u52a1\u3002 Avidemux\u53ef\u5728GNU GPL\u8bb8\u53ef\u4e0b\u7528\u4e8eLinux\uff0cBSD\uff0cMac OS X\u548cMicrosoft Windows\u3002\u8be5\u7a0b\u5e8f\u662f\u7531Mean\u4ece\u5934\u5f00\u59cb\u7f16\u5199\u7684\uff0c\u4f46\u4e5f\u4f7f\u7528\u4e86\u6765\u81ea\u5176\u4ed6\u4eba\u548c\u9879\u76ee\u7684\u4ee3\u7801\u3002\u968f\u65f6\u6b22\u8fce\u8865\u4e01\uff0c\u7ffb\u8bd1\u751a\u81f3\u9519\u8bef\u62a5\u544a\u3002","title":"1. Source Insight\u4ee3\u7801\u9605\u8bfb\u795e\u5668"},{"location":"Tools/git_command/","text":"Git \u00b6 1.git\u5b50\u6a21\u5757 \u00b6 \u83b7\u53d6\u8fdc\u7a0b\u6307\u5b9a\u5206\u652f \u00b6 \u4ece\u8fdc\u7a0b\u4ed3\u5e93\u91cc\u62c9\u53d6\u4e00\u6761\u672c\u5730\u4e0d\u5b58\u5728\u7684\u5206\u652f\u65f6 1 git checkout -b new_local_branch_name origin/remote_branch_name 2.\u4ee5\u56fe\u5f62\u7684\u65b9\u5f0f\u67e5\u770b\u5206\u652f\u4e4b\u95f4\u7684\u5173\u7cfb \u00b6 1 gitk --simplify-by-decoration --all 3.Git\u521b\u5efa\u7a7a\u767d\uff08\u5b64\u513f\uff09\u5206\u652f \u00b6 3.1 \u521b\u5efa\u4e00\u4e2a\u7a7a\u767d\u5206\u652f \u00b6 1 2 3 4 5 6 7 8 9 10 11 12 // \u521b\u5efa\u5e76\u5207\u6362\u5230\u65b0\u5206\u652f git checkout --orphan <branch_name> // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u72ec\u7acb\u5206\u652f git rm -rf . // \u521b\u5efa\u6587\u4ef6\u5e76\u63d0\u4ea4\uff08\u5982\u679c\u6ca1\u6709\u63d0\u4ea4orphan\u5206\u652f\u5c06\u4e0d\u4f1a\u751f\u6548\uff09 vim README.md git add README.md git commit -m \"add README.md\" 3.2 \u521b\u5efa\u4e00\u4e2a\u4ee5\u5f53\u524d\u8282\u70b9\u4e3a\u57fa\u7840\u7684\u72ec\u7acb\u5206\u652f \u00b6 1 2 3 4 5 // \u521b\u5efa\u5e76\u5207\u6362\u5230\u65b0\u5206\u652f git checkout --orphan <branch_name> // \u5c06\u5f53\u524d\u6240\u6709\u6587\u4ef6\u63d0\u4ea4 git commit -a 4.git\u5220\u9664\u5df2\u7ecf\u63d0\u4ea4\u7684\u6587\u4ef6 \u00b6 1 2 3 4 git rm - r -- cached xxx // xxx\u662f\u4f60\u8981\u5220\u9664\u7684\u6587\u4ef6\uff0c\u672c\u547d\u4ee4\u6267\u884c\u5b8c\u4e4b\u540e\uff0c\u5728.gitignore\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e0a\u8be5\u9700\u8981\u5220\u9664\u7684\u6587\u4ef6 git add . git commit - m \"update .gitignore\" git push - f origin master // \u5f3a\u63a8 5.git\u5f3a\u5236\u62c9\u53d6\u8fdc\u7a0b\u5206\u652f\u66f4\u65b0 \u00b6 \u5047\u8bbe\u4f60\u5de5\u4f5c\u5728master\u5206\u652f 1 2 3 4 5 # \u83b7\u53d6\u8fdc\u7a0b\u5206\u652f\u7684\u5185\u5bb9 git fetch -all # \u6307\u5411\u65b0\u7684\u5206\u652f git reset --hard origin/master","title":"git command"},{"location":"Tools/git_command/#git","text":"","title":"Git"},{"location":"Tools/git_command/#1git","text":"","title":"1.git\u5b50\u6a21\u5757"},{"location":"Tools/git_command/#_1","text":"\u4ece\u8fdc\u7a0b\u4ed3\u5e93\u91cc\u62c9\u53d6\u4e00\u6761\u672c\u5730\u4e0d\u5b58\u5728\u7684\u5206\u652f\u65f6 1 git checkout -b new_local_branch_name origin/remote_branch_name","title":"\u83b7\u53d6\u8fdc\u7a0b\u6307\u5b9a\u5206\u652f"},{"location":"Tools/git_command/#2","text":"1 gitk --simplify-by-decoration --all","title":"2.\u4ee5\u56fe\u5f62\u7684\u65b9\u5f0f\u67e5\u770b\u5206\u652f\u4e4b\u95f4\u7684\u5173\u7cfb"},{"location":"Tools/git_command/#3git","text":"","title":"3.Git\u521b\u5efa\u7a7a\u767d\uff08\u5b64\u513f\uff09\u5206\u652f"},{"location":"Tools/git_command/#31","text":"1 2 3 4 5 6 7 8 9 10 11 12 // \u521b\u5efa\u5e76\u5207\u6362\u5230\u65b0\u5206\u652f git checkout --orphan <branch_name> // \u521b\u5efa\u4e00\u4e2a\u7a7a\u7684\u72ec\u7acb\u5206\u652f git rm -rf . // \u521b\u5efa\u6587\u4ef6\u5e76\u63d0\u4ea4\uff08\u5982\u679c\u6ca1\u6709\u63d0\u4ea4orphan\u5206\u652f\u5c06\u4e0d\u4f1a\u751f\u6548\uff09 vim README.md git add README.md git commit -m \"add README.md\"","title":"3.1 \u521b\u5efa\u4e00\u4e2a\u7a7a\u767d\u5206\u652f"},{"location":"Tools/git_command/#32","text":"1 2 3 4 5 // \u521b\u5efa\u5e76\u5207\u6362\u5230\u65b0\u5206\u652f git checkout --orphan <branch_name> // \u5c06\u5f53\u524d\u6240\u6709\u6587\u4ef6\u63d0\u4ea4 git commit -a","title":"3.2 \u521b\u5efa\u4e00\u4e2a\u4ee5\u5f53\u524d\u8282\u70b9\u4e3a\u57fa\u7840\u7684\u72ec\u7acb\u5206\u652f"},{"location":"Tools/git_command/#4git","text":"1 2 3 4 git rm - r -- cached xxx // xxx\u662f\u4f60\u8981\u5220\u9664\u7684\u6587\u4ef6\uff0c\u672c\u547d\u4ee4\u6267\u884c\u5b8c\u4e4b\u540e\uff0c\u5728.gitignore\u6587\u4ef6\u4e2d\u6dfb\u52a0\u4e0a\u8be5\u9700\u8981\u5220\u9664\u7684\u6587\u4ef6 git add . git commit - m \"update .gitignore\" git push - f origin master // \u5f3a\u63a8","title":"4.git\u5220\u9664\u5df2\u7ecf\u63d0\u4ea4\u7684\u6587\u4ef6"},{"location":"Tools/git_command/#5git","text":"\u5047\u8bbe\u4f60\u5de5\u4f5c\u5728master\u5206\u652f 1 2 3 4 5 # \u83b7\u53d6\u8fdc\u7a0b\u5206\u652f\u7684\u5185\u5bb9 git fetch -all # \u6307\u5411\u65b0\u7684\u5206\u652f git reset --hard origin/master","title":"5.git\u5f3a\u5236\u62c9\u53d6\u8fdc\u7a0b\u5206\u652f\u66f4\u65b0"},{"location":"Tools/hexo/","text":"Hexo\u914d\u7f6e \u00b6 1.\u5728\u53f3\u4e0a\u89d2\u6216\u8005\u5de6\u4e0a\u89d2\u5b9e\u73b0fork me on github \u00b6 \u53f3\u4e0a\u89d2 \u5de6\u4e0a\u89d2 2.\u4e3b\u9875\u6587\u7ae0\u6dfb\u52a0\u9634\u5f71\u6548\u679c \u00b6 2.1 \u6253\u5f00\\themes\\next\\source\\css_custom\\custom.styl,\u5411\u91cc\u9762\u52a0\u5165\uff1a \u00b6 1 2 3 4 5 6 7 8 // \u4e3b\u9875\u6587\u7ae0\u6dfb\u52a0\u9634\u5f71\u6548\u679c .post { margin-top: 60px; margin-bottom: 60px; padding: 25px; -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5); -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5); } 3.\u5728\u7f51\u7ad9\u5e95\u90e8\u52a0\u4e0a\u8bbf\u95ee\u91cf \u00b6 \u4e0d\u849c\u5b50 \u6253\u5f00\\themes\\next\\layout_partials\\footer.swig\u6587\u4ef6,\u5728copyright\u524d\u52a0\u4e0a\u753b\u7ea2\u7ebf\u8fd9\u53e5\u8bdd\uff1a 1 < script async src = \"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\" ></ script > \u7136\u540e\u5728\\themes\\next\\layout_partials\\footer.swig 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 {% if theme.footer.powered.enable %} # add < div class = \"powered-by\" > < i class = \"fa fa-user-md\" ></ i >< span id = \"busuanzi_container_site_uv\" > \u672c\u7ad9\u8bbf\u5ba2\u6570: < span id = \"busuanzi_value_site_uv\" ></ span > </ span > </ div > # add < span class = \"post-meta-divider\" > | </ span > < div class = \"powered-by\" > {# #}{{ __('footer.powered', next_url('https://hexo.io', 'Hexo', {class: 'theme-link'})) }}{# #}{% if theme.footer.powered.version %} v{{ hexo_env('version') }}{% endif %}{# #} </ div > {% endif %}","title":"Hexo"},{"location":"Tools/hexo/#hexo","text":"","title":"Hexo\u914d\u7f6e"},{"location":"Tools/hexo/#1fork-me-on-github","text":"\u53f3\u4e0a\u89d2 \u5de6\u4e0a\u89d2","title":"1.\u5728\u53f3\u4e0a\u89d2\u6216\u8005\u5de6\u4e0a\u89d2\u5b9e\u73b0fork me on github"},{"location":"Tools/hexo/#2","text":"","title":"2.\u4e3b\u9875\u6587\u7ae0\u6dfb\u52a0\u9634\u5f71\u6548\u679c"},{"location":"Tools/hexo/#21-themesnextsourcecss95customcustomstyl","text":"1 2 3 4 5 6 7 8 // \u4e3b\u9875\u6587\u7ae0\u6dfb\u52a0\u9634\u5f71\u6548\u679c .post { margin-top: 60px; margin-bottom: 60px; padding: 25px; -webkit-box-shadow: 0 0 5px rgba(202, 203, 203, .5); -moz-box-shadow: 0 0 5px rgba(202, 203, 204, .5); }","title":"2.1 \u6253\u5f00\\themes\\next\\source\\css_custom\\custom.styl,\u5411\u91cc\u9762\u52a0\u5165\uff1a"},{"location":"Tools/hexo/#3","text":"\u4e0d\u849c\u5b50 \u6253\u5f00\\themes\\next\\layout_partials\\footer.swig\u6587\u4ef6,\u5728copyright\u524d\u52a0\u4e0a\u753b\u7ea2\u7ebf\u8fd9\u53e5\u8bdd\uff1a 1 < script async src = \"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\" ></ script > \u7136\u540e\u5728\\themes\\next\\layout_partials\\footer.swig 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 {% if theme.footer.powered.enable %} # add < div class = \"powered-by\" > < i class = \"fa fa-user-md\" ></ i >< span id = \"busuanzi_container_site_uv\" > \u672c\u7ad9\u8bbf\u5ba2\u6570: < span id = \"busuanzi_value_site_uv\" ></ span > </ span > </ div > # add < span class = \"post-meta-divider\" > | </ span > < div class = \"powered-by\" > {# #}{{ __('footer.powered', next_url('https://hexo.io', 'Hexo', {class: 'theme-link'})) }}{# #}{% if theme.footer.powered.version %} v{{ hexo_env('version') }}{% endif %}{# #} </ div > {% endif %}","title":"3.\u5728\u7f51\u7ad9\u5e95\u90e8\u52a0\u4e0a\u8bbf\u95ee\u91cf"},{"location":"UI Design/ps_note/","text":"PS\u521d\u7ea7\u77e5\u8bc6 \u00b6 \u6807\u5c3a\u5feb\u6377\u952e - Ctrl+R","title":"PS\u521d\u7ea7\u77e5\u8bc6"},{"location":"UI Design/ps_note/#ps","text":"\u6807\u5c3a\u5feb\u6377\u952e - Ctrl+R","title":"PS\u521d\u7ea7\u77e5\u8bc6"}]}