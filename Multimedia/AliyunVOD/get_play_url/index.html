<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>VOD - Notebook</title>
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../..">Notebook</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Android <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">Android开机自启</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Android/android_source_code/android_launcher/">Launcher</a>
</li>
            
<li >
    <a href="../../../Android/android_source_code/android_broadcast_boot/">开机广播</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Android6.0源码修改</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Android/android_source_code/android_remove_usb_permission_dialog/">去掉USB权限申请对话框</a>
</li>
            
<li >
    <a href="../../../Android/android_source_code/android_screen_brightness/">修改屏幕默认亮度</a>
</li>
            
<li >
    <a href="../../../Android/android_source_code/android_hide_virtual_navigation_key/">彻底隐藏虚拟导航键</a>
</li>
            
<li >
    <a href="../../../Android/android_source_code/android_enable_usb_debug/">默认开启USB调试功能</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Android应用开发</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Android/Application/RecycleView/">RecycleView</a>
</li>
            
<li >
    <a href="../../../Android/android_screen_adapter/android_screen_adapter/">Android 屏幕适配</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Android NDK开发</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Android/android_ndk/android_ndk/">NDK开发</a>
</li>
            
<li >
    <a href="../../../Embedded System/gcc_clang_llvm/">GCC&Clang&LLVM的关系</a>
</li>
            
<li >
    <a href="../../../Android/android_ndk/cross-compile_opus_for_android/">交叉编译示例OPUS</a>
</li>
            
<li >
    <a href="../../../Android/android_ndk/ijkpalyer_for_rtsp_compile/">交叉编译ijkplayer</a>
</li>
            
<li >
    <a href="../../../Android/android_ndk/android_art/">ART</a>
</li>
            
<li >
    <a href="../../../Android/android_ndk/android_cmake/">Android CMake知识点</a>
</li>
            
<li >
    <a href="../../../Android/android_ndk/cross-compile_opencv_for_android/">Android交叉编译OpenCV</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../../Android/android_compiler_system/android_compile_system/">Android编译系统</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Java</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Android/java/java_ui_swing/">Swing</a>
</li>
            
<li >
    <a href="../../../Android/java/ubuntu_config_java/">Ubuntu中配置Java</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">ML <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../ML/ml_basics/">机器学习基础</a>
</li>
                                    
<li >
    <a href="../../../ML/tensorflow_install/">Tensorflow安装</a>
</li>
                                    
<li >
    <a href="../../../ML/tensorflow_model/">Tensorflow模型转换</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">嵌入式机器学习</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../ML/how_to_run_dl_model_on_stm32/">00~STM32图像分类</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Python</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Python/matplotlib/">matplotlib使用</a>
</li>
            
<li >
    <a href="../../../Python/python_trigonometric/">三角函数</a>
</li>
            
<li >
    <a href="../../../Python/python_record_play/">录音与播放</a>
</li>
            
<li >
    <a href="../../../Python/crc16/">CRC16</a>
</li>
            
<li >
    <a href="../../../Python/python_string_format/">Python字符串格式化</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Embedded System <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
  <li class="dropdown-submenu">
    <a href="#">C/C++</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Embedded System/c&c++/c_memory_layout/">C内存模型</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/crc16/">CRC16</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/c_micro_jing/">C宏定义#与##</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/complement/">补码</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/c_pointer/">C指针</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/c_pragma/">pragma pack()</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/pkg_config/">pkg-config</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/typedef_tips/">typedef使用注意</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/ascii_table/">ASCII Table</a>
</li>
            
<li >
    <a href="../../../Embedded System/c&c++/cmake_usage/">CMake用法</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../../Embedded System/ESP8266/">ESP8266</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">STM32</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Embedded System/STM32/stm32_hal_uart/">STM32串口编程之中断方式</a>
</li>
            
<li >
    <a href="../../../Embedded System/STM32/stm32_hal_uart/">STM32定时器编程之定时中断</a>
</li>
            
<li >
    <a href="../../../Embedded System/STM32/stm32_hal_uart/">STM32定时器编程之PWM</a>
</li>
            
<li >
    <a href="../../../Embedded System/STM32/stm32_spi/">STM32 SPI</a>
</li>
            
<li >
    <a href="../../../Embedded System/STM32/stm32_io_drive_42stepper_l298n/">STM32控制42步进电机</a>
</li>
            
<li >
    <a href="../../../Embedded System/STM32/stm32_flash_erase_leveling/">Flash 磨损均衡算法</a>
</li>
            
<li >
    <a href="../../../Embedded System/STM32/stm32_module_init_like.linux/">初始化函数的另一种写法</a>
</li>
    </ul>
  </li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Linux</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">开发环境相关</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Embedded System/linux/embedded_linux_dev_env/virtual_box_env/">VirtualBox开发环境搭建</a>
</li>
            
<li >
    <a href="../../../Embedded System/linux/embedded_linux_dev_env/samba/">samba服务配置</a>
</li>
            
<li >
    <a href="../../../Embedded System/linux/embedded_linux_dev_env/ftp_server_build/">FTP服务配置</a>
</li>
            
<li >
    <a href="../../../Embedded System/linux/embedded_linux_dev_env/nfs/">NFS</a>
</li>
            
<li >
    <a href="../../../Embedded System/linux/embedded_linux_dev_env/arm_compiler/">ARM交叉编译工具</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">JZ2440开发</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Embedded System/linux/jz2440/cross_compile/">关于交叉编译工具链</a>
</li>
    </ul>
  </li>
            
<li >
    <a href="../../../Embedded System/gcc_dynamic_linking_library/">GCC编译动态链接库</a>
</li>
            
<li >
    <a href="../../../Embedded System/build_linux_source_tree.md">构建内核源码树</a>
</li>
            
<li >
    <a href="../../../Embedded System/linux_shell_cmd/">常用shell命令</a>
</li>
            
<li >
    <a href="../../../Embedded System/linux_shell_program/">Linux Shell脚本编程</a>
</li>
            
<li >
    <a href="../../../Embedded System/gcc_clang_llvm/">GCC&Clang&LLVM的关系</a>
</li>
    </ul>
  </li>
                                    
<li >
    <a href="../../../Embedded System/zigbee_keys/">Zigbee</a>
</li>
                                    
<li >
    <a href="../../../Embedded System/nanopc_m4/">NanoPC RK3399</a>
</li>
                                    
  <li class="dropdown-submenu">
    <a href="#">Hardware</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../../Hardware/battery_work_time/">电池工作时间的计算</a>
</li>
    </ul>
  </li>
                                </ul>
                            </li>
                            <li class="dropdown active">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Multimedia <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li class="active">
    <a href="./">VOD</a>
</li>
                                    
<li >
    <a href="../../optical/">光学知识点</a>
</li>
                                    
<li >
    <a href="../../aac/">AAC编码</a>
</li>
                                    
<li >
    <a href="../../yuv/">彻底理解YUV格式</a>
</li>
                                    
<li >
    <a href="../../av_synchronization/">音视频同步</a>
</li>
                                    
<li >
    <a href="../../nginx/">nginx</a>
</li>
                                    
<li >
    <a href="../../linux_shell_cmd_for_multimedia/">Linux Shell命令</a>
</li>
                                    
<li >
    <a href="../../ffmpeg_compile/">FFMPEG编译</a>
</li>
                                    
<li >
    <a href="../../ffmpeg_command/">FFMPEG命令</a>
</li>
                                    
<li >
    <a href="../../ffmpeg_api/">FFMPEG API</a>
</li>
                                    
<li >
    <a href="../../easydarwin/">EasyDarwin</a>
</li>
                                    
<li >
    <a href="../../pcm/">PCM</a>
</li>
                                    
<li >
    <a href="../../wav_foramt/">WAV</a>
</li>
                                    
<li >
    <a href="../../opus/">OPUS</a>
</li>
                                    
<li >
    <a href="../../Ogg/">Ogg</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../Tools/PlantUML/">UML</a>
</li>
                                    
<li >
    <a href="../../../Tools/git_command/">git command</a>
</li>
                                    
<li >
    <a href="../../../Tools/Shadowsocks/">Shadowsocks</a>
</li>
                                    
<li >
    <a href="../../../Tools/ShadowsocksR/">ShadowsocksR</a>
</li>
                                    
<li >
    <a href="../../../Tools/JupyterNotebook/">局域网访问Jupyter Notebook</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li >
                                <a rel="next" href="../../../Hardware/battery_work_time/">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li >
                                <a rel="prev" href="../../optical/">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/FanHongchuang/notebook/edit/master/docs/Multimedia/AliyunVOD/get_play_url.md">Edit on Notebook</a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#url">获取播放URL</a></li>
            <li><a href="#1">1. 开通阿里云点播服务</a></li>
            <li><a href="#2accesskey">2.获取AccessKey</a></li>
            <li><a href="#3url">3.使用代码获取播放URL</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="url">获取播放URL<a class="headerlink" href="#url" title="Permanent link">#</a></h1>
<h2 id="1">1. 开通阿里云点播服务<a class="headerlink" href="#1" title="Permanent link">#</a></h2>
<ul>
<li><a href="https://help.aliyun.com/document_detail/51512.html?spm=a2c4g.11186623.6.553.61b84bd7xuDBcI">开始使用视频点播</a></li>
</ul>
<p>根据上面文档的提示上传视频</p>
<h2 id="2accesskey">2.获取AccessKey<a class="headerlink" href="#2accesskey" title="Permanent link">#</a></h2>
<p>登录阿里云后，鼠标移动到用户头像点击AccessKey -&gt; 新建</p>
<h2 id="3url">3.使用代码获取播放URL<a class="headerlink" href="#3url" title="Permanent link">#</a></h2>
<p>须通过HTTP GET请求并传递相应参数才能获取到播放URL，并且参数需要计算，所以使用代码进行获取比较方便。</p>
<ul>
<li><a href="https://help.aliyun.com/document_detail/44435.html?spm=a2c4g.11186623.6.703.4f713d44xGaeZA">官方调用示例</a></li>
</ul>
<h3 id="31">3.1 说明<a class="headerlink" href="#31" title="Permanent link">#</a></h3>
<ul>
<li>access_key_id和access_key_secret为必须项</li>
<li><code>Action</code>的值根据需求改变，此处使用GetPlayInfo（获取播放URL）</li>
</ul>
<table>
<thead>
<tr>
<th>Key</th>
<th>Value</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>Action</td>
<td>GetPlayInfo</td>
<td>获取播放URL</td>
</tr>
<tr>
<td>Action</td>
<td>GetVideoPlayAuth</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>下面是官方代码（修改了Action的值）</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.apache.httpcomponents<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>httpclient<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;version&gt;</span>4.5.1<span class="nt">&lt;/version&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</pre></div>
</td></tr></table>

<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">org.apache.http.HttpResponse</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.ClientProtocolException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.config.RequestConfig</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.client.methods.HttpGet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.CloseableHttpClient</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.impl.client.HttpClients</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.http.util.EntityUtils</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">sun.misc.BASE64Encoder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.Mac</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.crypto.spec.SecretKeySpec</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.IOException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.io.UnsupportedEncodingException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URI</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URISyntaxException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.net.URLEncoder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.security.SignatureException</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.text.SimpleDateFormat</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.logging.Logger</span><span class="o">;</span>
<span class="cm">/**</span>
<span class="cm"> * 视频点播OpenAPI调用示例</span>
<span class="cm"> * 以GetVideoPlayAuth接口为例，其他接口请替换相应接口名称及私有参数</span>
<span class="cm"> */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Main</span> <span class="o">{</span>
    <span class="c1">//账号AccessKey信息请填写(必选)</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">access_key_id</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
    <span class="c1">//账号AccessKey信息请填写(必选)</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">access_key_secret</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
    <span class="c1">//STS临时授权方式访问时该参数为必选，使用主账号AccessKey和RAM子账号AccessKey不需要填写</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">security_token</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
    <span class="c1">//以下参数不需要修改</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">VOD_DOMAIN</span> <span class="o">=</span> <span class="s">&quot;http://vod.cn-shanghai.aliyuncs.com&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">ISO8601_DATE_FORMAT</span> <span class="o">=</span> <span class="s">&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss&#39;Z&#39;&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">HTTP_METHOD</span> <span class="o">=</span> <span class="s">&quot;GET&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">HMAC_SHA1_ALGORITHM</span> <span class="o">=</span> <span class="s">&quot;HmacSHA1&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">String</span> <span class="n">UTF_8</span> <span class="o">=</span> <span class="s">&quot;utf-8&quot;</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kd">static</span> <span class="n">Logger</span> <span class="n">LOG</span> <span class="o">=</span> <span class="n">Logger</span><span class="o">.</span><span class="na">getLogger</span><span class="o">(</span><span class="n">Main</span><span class="o">.</span><span class="na">class</span><span class="o">.</span><span class="na">getName</span><span class="o">());</span>

<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="c1">//生成私有参数，不同API需要修改</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">privateParams</span> <span class="o">=</span> <span class="n">generatePrivateParamters</span><span class="o">();</span>
    <span class="c1">//生成公共参数，不需要修改</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">publicParams</span> <span class="o">=</span> <span class="n">generatePublicParamters</span><span class="o">();</span>
    <span class="c1">//生成OpenAPI地址，不需要修改</span>
    <span class="n">String</span> <span class="n">URL</span> <span class="o">=</span> <span class="n">generateOpenAPIURL</span><span class="o">(</span><span class="n">publicParams</span><span class="o">,</span> <span class="n">privateParams</span><span class="o">);</span>
    <span class="c1">//发送HTTP GET 请求</span>
    <span class="n">httpGet</span><span class="o">(</span><span class="n">URL</span><span class="o">);</span>
<span class="o">}</span>
  <span class="cm">/**</span>
<span class="cm">    * 生成视频点播OpenAPI私有参数</span>
<span class="cm">    * 不同API需要修改此方法中的参数</span>
<span class="cm">    * @return</span>
<span class="cm">   */</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">generatePrivateParamters</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// 接口私有参数列表, 不同API请替换相应参数</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">privateParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
    <span class="c1">// 视频ID</span>
    <span class="n">privateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;VideoId&quot;</span><span class="o">,</span><span class="s">&quot;24c5334a35a841f099456f2b39108b8e&quot;</span><span class="o">);</span>
    <span class="c1">// API名称</span>
    <span class="n">privateParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Action&quot;</span><span class="o">,</span> <span class="s">&quot;GetPlayInfo&quot;</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">privateParams</span><span class="o">;</span>
<span class="o">}</span>
  <span class="cm">/**</span>
<span class="cm">   * 生成视频点播OpenAPI公共参数</span>
<span class="cm">   * 不需要修改</span>
<span class="cm">   * @return</span>
<span class="cm">   */</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="nf">generatePublicParamters</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">publicParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
    <span class="n">publicParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Format&quot;</span><span class="o">,</span> <span class="s">&quot;JSON&quot;</span><span class="o">);</span>
    <span class="n">publicParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Version&quot;</span><span class="o">,</span> <span class="s">&quot;2017-03-21&quot;</span><span class="o">);</span>
    <span class="n">publicParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;AccessKeyId&quot;</span><span class="o">,</span> <span class="n">access_key_id</span><span class="o">);</span>
    <span class="n">publicParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;SignatureMethod&quot;</span><span class="o">,</span> <span class="s">&quot;HMAC-SHA1&quot;</span><span class="o">);</span>
    <span class="n">publicParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;Timestamp&quot;</span><span class="o">,</span> <span class="n">generateTimestamp</span><span class="o">());</span>
    <span class="n">publicParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;SignatureVersion&quot;</span><span class="o">,</span> <span class="s">&quot;1.0&quot;</span><span class="o">);</span>
    <span class="n">publicParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;SignatureNonce&quot;</span><span class="o">,</span> <span class="n">generateRandom</span><span class="o">());</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">security_token</span> <span class="o">!=</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span> <span class="n">security_token</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">publicParams</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;SecurityToken&quot;</span><span class="o">,</span> <span class="n">security_token</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">publicParams</span><span class="o">;</span>
<span class="o">}</span>
 <span class="cm">/**</span>
<span class="cm">   * 生成OpenAPI地址</span>
<span class="cm">   * @param privateParams</span>
<span class="cm">   * @return</span>
<span class="cm">   * @throws Exception</span>
<span class="cm">   */</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">generateOpenAPIURL</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">publicParams</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">privateParams</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">generateURL</span><span class="o">(</span><span class="n">VOD_DOMAIN</span><span class="o">,</span> <span class="n">HTTP_METHOD</span><span class="o">,</span> <span class="n">publicParams</span><span class="o">,</span> <span class="n">privateParams</span><span class="o">);</span>
<span class="o">}</span>
<span class="cm">/**</span>
<span class="cm">  * @param domain        请求地址</span>
<span class="cm">  * @param httpMethod    HTTP请求方式GET，POST等</span>
<span class="cm">  * @param publicParams  公共参数</span>
<span class="cm">  * @param privateParams 接口的私有参数</span>
<span class="cm">  * @return 最后的url</span>
<span class="cm"> */</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">generateURL</span><span class="o">(</span><span class="n">String</span> <span class="n">domain</span><span class="o">,</span> <span class="n">String</span> <span class="n">httpMethod</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">publicParams</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">privateParams</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">allEncodeParams</span> <span class="o">=</span> <span class="n">getAllParams</span><span class="o">(</span><span class="n">publicParams</span><span class="o">,</span> <span class="n">privateParams</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">cqsString</span> <span class="o">=</span> <span class="n">getCQS</span><span class="o">(</span><span class="n">allEncodeParams</span><span class="o">);</span>
    <span class="n">out</span><span class="o">(</span><span class="s">&quot;CanonicalizedQueryString = &quot;</span> <span class="o">+</span> <span class="n">cqsString</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">stringToSign</span> <span class="o">=</span> <span class="n">httpMethod</span> <span class="o">+</span> <span class="s">&quot;&amp;&quot;</span> <span class="o">+</span> <span class="n">percentEncode</span><span class="o">(</span><span class="s">&quot;/&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;&amp;&quot;</span> <span class="o">+</span> <span class="n">percentEncode</span><span class="o">(</span><span class="n">cqsString</span><span class="o">);</span>
    <span class="n">out</span><span class="o">(</span><span class="s">&quot;StringtoSign = &quot;</span> <span class="o">+</span> <span class="n">stringToSign</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">signature</span> <span class="o">=</span> <span class="n">hmacSHA1Signature</span><span class="o">(</span><span class="n">access_key_secret</span><span class="o">,</span> <span class="n">stringToSign</span><span class="o">);</span>
    <span class="n">out</span><span class="o">(</span><span class="s">&quot;Signature = &quot;</span> <span class="o">+</span> <span class="n">signature</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">domain</span> <span class="o">+</span> <span class="s">&quot;?&quot;</span> <span class="o">+</span> <span class="n">cqsString</span> <span class="o">+</span> <span class="s">&quot;&amp;&quot;</span> <span class="o">+</span> <span class="n">percentEncode</span><span class="o">(</span><span class="s">&quot;Signature&quot;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">percentEncode</span><span class="o">(</span><span class="n">signature</span><span class="o">);</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">getAllParams</span><span class="o">(</span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">publicParams</span><span class="o">,</span> <span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">privateParams</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">encodeParams</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">publicParams</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">key</span> <span class="o">:</span> <span class="n">publicParams</span><span class="o">.</span><span class="na">keySet</span><span class="o">())</span> <span class="o">{</span>
              <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">publicParams</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
            <span class="c1">//将参数和值都urlEncode一下。</span>
            <span class="n">String</span> <span class="n">encodeKey</span> <span class="o">=</span> <span class="n">percentEncode</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">encodeVal</span> <span class="o">=</span> <span class="n">percentEncode</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
            <span class="n">encodeParams</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">encodeKey</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">encodeVal</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">privateParams</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">key</span> <span class="o">:</span> <span class="n">privateParams</span><span class="o">.</span><span class="na">keySet</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="n">privateParams</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
            <span class="c1">//将参数和值都urlEncode一下。</span>
            <span class="n">String</span> <span class="n">encodeKey</span> <span class="o">=</span> <span class="n">percentEncode</span><span class="o">(</span><span class="n">key</span><span class="o">);</span>
            <span class="n">String</span> <span class="n">encodeVal</span> <span class="o">=</span> <span class="n">percentEncode</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
            <span class="n">encodeParams</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">encodeKey</span> <span class="o">+</span> <span class="s">&quot;=&quot;</span> <span class="o">+</span> <span class="n">encodeVal</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">encodeParams</span><span class="o">;</span>
<span class="o">}</span>
<span class="cm">/**</span>
<span class="cm">* 参数urlEncode</span>
<span class="cm">*</span>
<span class="cm">* @param value</span>
<span class="cm">* @return</span>
<span class="cm">*/</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">percentEncode</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">urlEncodeOrignStr</span> <span class="o">=</span> <span class="n">URLEncoder</span><span class="o">.</span><span class="na">encode</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="s">&quot;UTF-8&quot;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">plusReplaced</span> <span class="o">=</span> <span class="n">urlEncodeOrignStr</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="s">&quot;+&quot;</span><span class="o">,</span> <span class="s">&quot;%20&quot;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">starReplaced</span> <span class="o">=</span> <span class="n">plusReplaced</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="s">&quot;*&quot;</span><span class="o">,</span> <span class="s">&quot;%2A&quot;</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">waveReplaced</span> <span class="o">=</span> <span class="n">starReplaced</span><span class="o">.</span><span class="na">replace</span><span class="o">(</span><span class="s">&quot;%7E&quot;</span><span class="o">,</span> <span class="s">&quot;~&quot;</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">waveReplaced</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">UnsupportedEncodingException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
<span class="o">}</span>
<span class="cm">/**</span>
<span class="cm">* 获取CQS 的字符串</span>
<span class="cm">*</span>
<span class="cm">* @param allParams</span>
<span class="cm">* @return</span>
<span class="cm">*/</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getCQS</span><span class="o">(</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">allParams</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ParamsComparator</span> <span class="n">paramsComparator</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ParamsComparator</span><span class="o">();</span>
    <span class="n">Collections</span><span class="o">.</span><span class="na">sort</span><span class="o">(</span><span class="n">allParams</span><span class="o">,</span> <span class="n">paramsComparator</span><span class="o">);</span>
    <span class="n">String</span> <span class="n">cqString</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">allParams</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="n">cqString</span> <span class="o">+=</span> <span class="n">allParams</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">i</span> <span class="o">!=</span> <span class="n">allParams</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">-</span> <span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">cqString</span> <span class="o">+=</span> <span class="s">&quot;&amp;&quot;</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">cqString</span><span class="o">;</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kd">class</span> <span class="nc">ParamsComparator</span> <span class="kd">implements</span> <span class="n">Comparator</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">int</span> <span class="nf">compare</span><span class="o">(</span><span class="n">String</span> <span class="n">lhs</span><span class="o">,</span> <span class="n">String</span> <span class="n">rhs</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">lhs</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">rhs</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">hmacSHA1Signature</span><span class="o">(</span><span class="n">String</span> <span class="n">accessKeySecret</span><span class="o">,</span> <span class="n">String</span> <span class="n">stringtoSign</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">key</span> <span class="o">=</span> <span class="n">accessKeySecret</span> <span class="o">+</span> <span class="s">&quot;&amp;&quot;</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="n">SecretKeySpec</span> <span class="n">signKey</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SecretKeySpec</span><span class="o">(</span><span class="n">key</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(),</span> <span class="n">HMAC_SHA1_ALGORITHM</span><span class="o">);</span>
            <span class="n">Mac</span> <span class="n">mac</span> <span class="o">=</span> <span class="n">Mac</span><span class="o">.</span><span class="na">getInstance</span><span class="o">(</span><span class="n">HMAC_SHA1_ALGORITHM</span><span class="o">);</span>
            <span class="n">mac</span><span class="o">.</span><span class="na">init</span><span class="o">(</span><span class="n">signKey</span><span class="o">);</span>
            <span class="kt">byte</span><span class="o">[]</span> <span class="n">rawHmac</span> <span class="o">=</span> <span class="n">mac</span><span class="o">.</span><span class="na">doFinal</span><span class="o">(</span><span class="n">stringtoSign</span><span class="o">.</span><span class="na">getBytes</span><span class="o">());</span>
            <span class="c1">//按照Base64 编码规则把上面的 HMAC 值编码成字符串，即得到签名值（Signature）</span>
            <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">(</span><span class="k">new</span> <span class="n">BASE64Encoder</span><span class="o">().</span><span class="na">encode</span><span class="o">(</span><span class="n">rawHmac</span><span class="o">));</span>
            <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="n">SignatureException</span><span class="o">(</span><span class="s">&quot;Failed to generate HMAC : &quot;</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">SignatureException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="s">&quot;&quot;</span><span class="o">;</span>
<span class="o">}</span>
<span class="cm">/**</span>
<span class="cm">* 生成随机数</span>
<span class="cm">*</span>
<span class="cm">* @return</span>
<span class="cm">*/</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">generateRandom</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">String</span> <span class="n">signatureNonce</span> <span class="o">=</span> <span class="n">UUID</span><span class="o">.</span><span class="na">randomUUID</span><span class="o">().</span><span class="na">toString</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">signatureNonce</span><span class="o">;</span>
<span class="o">}</span>
<span class="cm">/**</span>
<span class="cm">* 生成当前UTC时间戳</span>
<span class="cm">*</span>
<span class="cm">* @return</span>
<span class="cm">*/</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">generateTimestamp</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">Date</span> <span class="n">date</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Date</span><span class="o">(</span><span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">());</span>
    <span class="n">SimpleDateFormat</span> <span class="n">df</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SimpleDateFormat</span><span class="o">(</span><span class="n">ISO8601_DATE_FORMAT</span><span class="o">);</span>
    <span class="n">df</span><span class="o">.</span><span class="na">setTimeZone</span><span class="o">(</span><span class="k">new</span> <span class="n">SimpleTimeZone</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="s">&quot;GMT&quot;</span><span class="o">));</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">date</span><span class="o">);</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">httpGet</span><span class="o">(</span><span class="n">String</span> <span class="n">url</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
    <span class="n">CloseableHttpClient</span> <span class="n">httpClient</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">{</span>
        <span class="n">httpClient</span> <span class="o">=</span> <span class="n">HttpClients</span><span class="o">.</span><span class="na">createDefault</span><span class="o">();</span>
        <span class="n">HttpGet</span> <span class="n">httpGet</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HttpGet</span><span class="o">();</span>
        <span class="n">httpGet</span><span class="o">.</span><span class="na">setURI</span><span class="o">(</span><span class="k">new</span> <span class="n">URI</span><span class="o">(</span><span class="n">url</span><span class="o">));</span>
        <span class="n">RequestConfig</span> <span class="n">requestConfig</span> <span class="o">=</span> <span class="n">RequestConfig</span><span class="o">.</span><span class="na">custom</span><span class="o">()</span>
                <span class="o">.</span><span class="na">setConnectTimeout</span><span class="o">(</span><span class="mi">3000</span><span class="o">)</span>
                <span class="o">.</span><span class="na">setSocketTimeout</span><span class="o">(</span><span class="mi">3000</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">();</span>
        <span class="n">httpGet</span><span class="o">.</span><span class="na">setConfig</span><span class="o">(</span><span class="n">requestConfig</span><span class="o">);</span>
        <span class="n">HttpResponse</span> <span class="n">result</span> <span class="o">=</span> <span class="n">httpClient</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">httpGet</span><span class="o">);</span>
        <span class="n">String</span> <span class="n">str</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="cm">/**读取服务器返回过来的json字符串数据**/</span>
            <span class="n">str</span> <span class="o">=</span> <span class="n">EntityUtils</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">getEntity</span><span class="o">());</span>
            <span class="n">EntityUtils</span><span class="o">.</span><span class="na">consume</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="na">getEntity</span><span class="o">());</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="k">throw</span> <span class="n">e</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="n">out</span><span class="o">(</span><span class="n">str</span><span class="o">);</span>
        <span class="c1">// 这里可以解析视频云点播服务端的响应结果</span>
        <span class="k">return</span> <span class="n">str</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">URISyntaxException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="k">throw</span> <span class="n">e</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">ClientProtocolException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="k">throw</span> <span class="n">e</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
        <span class="k">throw</span> <span class="n">e</span><span class="o">;</span>
    <span class="o">}</span> <span class="k">finally</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">httpClient</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span>
                <span class="n">httpClient</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
            <span class="k">throw</span> <span class="n">e</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">out</span><span class="o">(</span><span class="n">String</span> <span class="n">newLine</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">newLine</span><span class="o">);</span>
    <span class="n">LOG</span><span class="o">.</span><span class="na">info</span><span class="o">(</span><span class="n">newLine</span><span class="o">);</span>
<span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright &copy; 2019 - 2020 Hongchaung Fan</p>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
